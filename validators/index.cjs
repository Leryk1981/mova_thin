"use strict";exports.envelope_3_3_schema_json = validate20;const schema31 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://mova.dev/schemas/envelope.3.3.schema.json","title":"MOVA Envelope v3.3","type":"object","required":["mova_version","actions"],"properties":{"mova_version":{"type":"string","pattern":"^3\\.3(\\.\\d+)?$","description":"MOVA version. Only 3.3.x versions are supported."},"id":{"type":"string"},"description":{"type":"string"},"context":{"type":"object"},"vars":{"type":"object","description":"Initial variables for the plan","additionalProperties":true},"policies":{"$ref":"policies.schema.json"},"meta":{"type":"object","deprecated":true,"description":"Deprecated since 3.3: use 'policies' instead.","properties":{"timeout_ms":{"type":"integer","minimum":0},"retry":{"type":"object","properties":{"max_attempts":{"type":"integer","minimum":0},"backoff_ms":{"type":"integer","minimum":0},"strategy":{"type":"string","enum":["fixed","exp"]}},"additionalProperties":true},"dlq":{"type":"object"}},"additionalProperties":true},"payload":{"description":"Initial payload data for the plan","oneOf":[{"type":"null"},{"type":"string"},{"type":"number"},{"type":"boolean"},{"type":"array"},{"type":"object"}]},"actions":{"type":"array","items":{"oneOf":[{"$ref":"https://mova.dev/schemas/actions/print/1.0.1/schema.json"},{"$ref":"https://mova.dev/schemas/actions/http_fetch/1.2.0/schema.json"},{"$ref":"https://mova.dev/schemas/actions/set/1.0.1/schema.json"},{"$ref":"actions/sleep.schema.json"},{"$ref":"actions/transform.schema.json"},{"$ref":"actions/parse_json.schema.json"},{"$ref":"actions/log.schema.json"},{"$ref":"actions/assert.schema.json"},{"$ref":"actions/call.schema.json"},{"$ref":"actions/emit_event.schema.json"},{"$ref":"actions/tool_call.schema.json"},{"$ref":"actions/json_patch.schema.json"},{"$ref":"actions/file_read.schema.json"},{"$ref":"actions/file_write.schema.json"},{"$ref":"actions/regex_extract.schema.json"},{"$ref":"actions/base64.schema.json"},{"$ref":"actions/vnl.schema.json"},{"$ref":"actions/if.schema.json"},{"$ref":"actions/repeat.schema.json"},{"$ref":"actions/parallel.schema.json"}]}}},"additionalProperties":false};const schema32 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://mova.dev/schemas/policies.schema.json","title":"MOVA Policies (timeouts/retry/dlq)","type":"object","properties":{"timeout_ms":{"type":"integer","minimum":0},"retry":{"type":"object","properties":{"max_attempts":{"type":"integer","minimum":0},"backoff_ms":{"anyOf":[{"type":"integer","minimum":0},{"type":"array","items":{"type":"integer","minimum":0}}]},"strategy":{"type":"string","enum":["fixed","exp"]}},"additionalProperties":false},"dlq":{"type":"object","properties":{"enabled":{"type":"boolean"},"target":{"type":"string","description":"Queue/topic/file path or identifier"}},"additionalProperties":false},"budget_ms":{"type":"integer","minimum":0}},"additionalProperties":false};const func1 = Object.prototype.hasOwnProperty;const pattern4 = new RegExp("^3\\.3(\\.\\d+)?$", "u");const schema33 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://mova.dev/schemas/actions/print/1.0.1/schema.json","title":"Action: print","type":"object","anyOf":[{"required":["type","message"],"properties":{"type":{"const":"print"},"name":{"type":"string"},"message":{"oneOf":[{"type":"string"},{"type":"object"},{"type":"array"}]},"save_as":{"type":"string"},"policies":{"$ref":"https://mova.dev/schemas/policies.schema.json"}},"additionalProperties":false},{"required":["type","params"],"properties":{"type":{"const":"print"},"name":{"type":"string"},"params":{"type":"object","required":["text"],"properties":{"text":{"oneOf":[{"type":"string"},{"type":"object"},{"type":"array"}]}},"additionalProperties":false},"save_as":{"type":"string"},"policies":{"$ref":"https://mova.dev/schemas/policies.schema.json"}},"additionalProperties":false}]};function validate21(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="https://mova.dev/schemas/actions/print/1.0.1/schema.json" */;let vErrors = null;let errors = 0;const evaluated0 = validate21.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}if(!(data && typeof data == "object" && !Array.isArray(data))){const err0 = {instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}const _errs1 = errors;let valid0 = false;const _errs2 = errors;if(data && typeof data == "object" && !Array.isArray(data)){if(data.type === undefined){const err1 = {instancePath,schemaPath:"#/anyOf/0/required",keyword:"required",params:{missingProperty: "type"},message:"must have required property '"+"type"+"'"};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}if(data.message === undefined){const err2 = {instancePath,schemaPath:"#/anyOf/0/required",keyword:"required",params:{missingProperty: "message"},message:"must have required property '"+"message"+"'"};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}for(const key0 in data){if(!(((((key0 === "type") || (key0 === "name")) || (key0 === "message")) || (key0 === "save_as")) || (key0 === "policies"))){const err3 = {instancePath,schemaPath:"#/anyOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key0},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}}if(data.type !== undefined){if("print" !== data.type){const err4 = {instancePath:instancePath+"/type",schemaPath:"#/anyOf/0/properties/type/const",keyword:"const",params:{allowedValue: "print"},message:"must be equal to constant"};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}}if(data.name !== undefined){if(typeof data.name !== "string"){const err5 = {instancePath:instancePath+"/name",schemaPath:"#/anyOf/0/properties/name/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}}if(data.message !== undefined){let data2 = data.message;const _errs8 = errors;let valid2 = false;let passing0 = null;const _errs9 = errors;if(typeof data2 !== "string"){const err6 = {instancePath:instancePath+"/message",schemaPath:"#/anyOf/0/properties/message/oneOf/0/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}var _valid1 = _errs9 === errors;if(_valid1){valid2 = true;passing0 = 0;}const _errs11 = errors;if(!(data2 && typeof data2 == "object" && !Array.isArray(data2))){const err7 = {instancePath:instancePath+"/message",schemaPath:"#/anyOf/0/properties/message/oneOf/1/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}var _valid1 = _errs11 === errors;if(_valid1 && valid2){valid2 = false;passing0 = [passing0, 1];}else {if(_valid1){valid2 = true;passing0 = 1;}const _errs13 = errors;if(!(Array.isArray(data2))){const err8 = {instancePath:instancePath+"/message",schemaPath:"#/anyOf/0/properties/message/oneOf/2/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}var _valid1 = _errs13 === errors;if(_valid1 && valid2){valid2 = false;passing0 = [passing0, 2];}else {if(_valid1){valid2 = true;passing0 = 2;}}}if(!valid2){const err9 = {instancePath:instancePath+"/message",schemaPath:"#/anyOf/0/properties/message/oneOf",keyword:"oneOf",params:{passingSchemas: passing0},message:"must match exactly one schema in oneOf"};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}else {errors = _errs8;if(vErrors !== null){if(_errs8){vErrors.length = _errs8;}else {vErrors = null;}}}}if(data.save_as !== undefined){if(typeof data.save_as !== "string"){const err10 = {instancePath:instancePath+"/save_as",schemaPath:"#/anyOf/0/properties/save_as/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}}if(data.policies !== undefined){let data4 = data.policies;if(data4 && typeof data4 == "object" && !Array.isArray(data4)){for(const key1 in data4){if(!((((key1 === "timeout_ms") || (key1 === "retry")) || (key1 === "dlq")) || (key1 === "budget_ms"))){const err11 = {instancePath:instancePath+"/policies",schemaPath:"https://mova.dev/schemas/policies.schema.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key1},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}}if(data4.timeout_ms !== undefined){let data5 = data4.timeout_ms;if(!(((typeof data5 == "number") && (!(data5 % 1) && !isNaN(data5))) && (isFinite(data5)))){const err12 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/timeout_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}if((typeof data5 == "number") && (isFinite(data5))){if(data5 < 0 || isNaN(data5)){const err13 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/timeout_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}}}if(data4.retry !== undefined){let data6 = data4.retry;if(data6 && typeof data6 == "object" && !Array.isArray(data6)){for(const key2 in data6){if(!(((key2 === "max_attempts") || (key2 === "backoff_ms")) || (key2 === "strategy"))){const err14 = {instancePath:instancePath+"/policies/retry",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key2},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}}if(data6.max_attempts !== undefined){let data7 = data6.max_attempts;if(!(((typeof data7 == "number") && (!(data7 % 1) && !isNaN(data7))) && (isFinite(data7)))){const err15 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/max_attempts/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}if((typeof data7 == "number") && (isFinite(data7))){if(data7 < 0 || isNaN(data7)){const err16 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/max_attempts/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err16];}else {vErrors.push(err16);}errors++;}}}if(data6.backoff_ms !== undefined){let data8 = data6.backoff_ms;const _errs29 = errors;let valid6 = false;const _errs30 = errors;if(!(((typeof data8 == "number") && (!(data8 % 1) && !isNaN(data8))) && (isFinite(data8)))){const err17 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err17];}else {vErrors.push(err17);}errors++;}if((typeof data8 == "number") && (isFinite(data8))){if(data8 < 0 || isNaN(data8)){const err18 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err18];}else {vErrors.push(err18);}errors++;}}var _valid2 = _errs30 === errors;valid6 = valid6 || _valid2;const _errs32 = errors;if(Array.isArray(data8)){const len0 = data8.length;for(let i0=0; i0<len0; i0++){let data9 = data8[i0];if(!(((typeof data9 == "number") && (!(data9 % 1) && !isNaN(data9))) && (isFinite(data9)))){const err19 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err19];}else {vErrors.push(err19);}errors++;}if((typeof data9 == "number") && (isFinite(data9))){if(data9 < 0 || isNaN(data9)){const err20 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err20];}else {vErrors.push(err20);}errors++;}}}}else {const err21 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err21];}else {vErrors.push(err21);}errors++;}var _valid2 = _errs32 === errors;valid6 = valid6 || _valid2;if(!valid6){const err22 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err22];}else {vErrors.push(err22);}errors++;}else {errors = _errs29;if(vErrors !== null){if(_errs29){vErrors.length = _errs29;}else {vErrors = null;}}}}if(data6.strategy !== undefined){let data10 = data6.strategy;if(typeof data10 !== "string"){const err23 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/strategy/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err23];}else {vErrors.push(err23);}errors++;}if(!((data10 === "fixed") || (data10 === "exp"))){const err24 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/strategy/enum",keyword:"enum",params:{allowedValues: schema32.properties.retry.properties.strategy.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err24];}else {vErrors.push(err24);}errors++;}}}else {const err25 = {instancePath:instancePath+"/policies/retry",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err25];}else {vErrors.push(err25);}errors++;}}if(data4.dlq !== undefined){let data11 = data4.dlq;if(data11 && typeof data11 == "object" && !Array.isArray(data11)){for(const key3 in data11){if(!((key3 === "enabled") || (key3 === "target"))){const err26 = {instancePath:instancePath+"/policies/dlq",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/dlq/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key3},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err26];}else {vErrors.push(err26);}errors++;}}if(data11.enabled !== undefined){if(typeof data11.enabled !== "boolean"){const err27 = {instancePath:instancePath+"/policies/dlq/enabled",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/dlq/properties/enabled/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"};if(vErrors === null){vErrors = [err27];}else {vErrors.push(err27);}errors++;}}if(data11.target !== undefined){if(typeof data11.target !== "string"){const err28 = {instancePath:instancePath+"/policies/dlq/target",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/dlq/properties/target/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err28];}else {vErrors.push(err28);}errors++;}}}else {const err29 = {instancePath:instancePath+"/policies/dlq",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/dlq/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err29];}else {vErrors.push(err29);}errors++;}}if(data4.budget_ms !== undefined){let data14 = data4.budget_ms;if(!(((typeof data14 == "number") && (!(data14 % 1) && !isNaN(data14))) && (isFinite(data14)))){const err30 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/budget_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err30];}else {vErrors.push(err30);}errors++;}if((typeof data14 == "number") && (isFinite(data14))){if(data14 < 0 || isNaN(data14)){const err31 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/budget_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err31];}else {vErrors.push(err31);}errors++;}}}}else {const err32 = {instancePath:instancePath+"/policies",schemaPath:"https://mova.dev/schemas/policies.schema.json/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err32];}else {vErrors.push(err32);}errors++;}}}var _valid0 = _errs2 === errors;valid0 = valid0 || _valid0;if(_valid0){var props0 = true;}const _errs47 = errors;if(data && typeof data == "object" && !Array.isArray(data)){if(data.type === undefined){const err33 = {instancePath,schemaPath:"#/anyOf/1/required",keyword:"required",params:{missingProperty: "type"},message:"must have required property '"+"type"+"'"};if(vErrors === null){vErrors = [err33];}else {vErrors.push(err33);}errors++;}if(data.params === undefined){const err34 = {instancePath,schemaPath:"#/anyOf/1/required",keyword:"required",params:{missingProperty: "params"},message:"must have required property '"+"params"+"'"};if(vErrors === null){vErrors = [err34];}else {vErrors.push(err34);}errors++;}for(const key4 in data){if(!(((((key4 === "type") || (key4 === "name")) || (key4 === "params")) || (key4 === "save_as")) || (key4 === "policies"))){const err35 = {instancePath,schemaPath:"#/anyOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key4},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err35];}else {vErrors.push(err35);}errors++;}}if(data.type !== undefined){if("print" !== data.type){const err36 = {instancePath:instancePath+"/type",schemaPath:"#/anyOf/1/properties/type/const",keyword:"const",params:{allowedValue: "print"},message:"must be equal to constant"};if(vErrors === null){vErrors = [err36];}else {vErrors.push(err36);}errors++;}}if(data.name !== undefined){if(typeof data.name !== "string"){const err37 = {instancePath:instancePath+"/name",schemaPath:"#/anyOf/1/properties/name/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err37];}else {vErrors.push(err37);}errors++;}}if(data.params !== undefined){let data17 = data.params;if(data17 && typeof data17 == "object" && !Array.isArray(data17)){if(data17.text === undefined){const err38 = {instancePath:instancePath+"/params",schemaPath:"#/anyOf/1/properties/params/required",keyword:"required",params:{missingProperty: "text"},message:"must have required property '"+"text"+"'"};if(vErrors === null){vErrors = [err38];}else {vErrors.push(err38);}errors++;}for(const key5 in data17){if(!(key5 === "text")){const err39 = {instancePath:instancePath+"/params",schemaPath:"#/anyOf/1/properties/params/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key5},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err39];}else {vErrors.push(err39);}errors++;}}if(data17.text !== undefined){let data18 = data17.text;const _errs56 = errors;let valid12 = false;let passing1 = null;const _errs57 = errors;if(typeof data18 !== "string"){const err40 = {instancePath:instancePath+"/params/text",schemaPath:"#/anyOf/1/properties/params/properties/text/oneOf/0/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err40];}else {vErrors.push(err40);}errors++;}var _valid3 = _errs57 === errors;if(_valid3){valid12 = true;passing1 = 0;}const _errs59 = errors;if(!(data18 && typeof data18 == "object" && !Array.isArray(data18))){const err41 = {instancePath:instancePath+"/params/text",schemaPath:"#/anyOf/1/properties/params/properties/text/oneOf/1/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err41];}else {vErrors.push(err41);}errors++;}var _valid3 = _errs59 === errors;if(_valid3 && valid12){valid12 = false;passing1 = [passing1, 1];}else {if(_valid3){valid12 = true;passing1 = 1;}const _errs61 = errors;if(!(Array.isArray(data18))){const err42 = {instancePath:instancePath+"/params/text",schemaPath:"#/anyOf/1/properties/params/properties/text/oneOf/2/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err42];}else {vErrors.push(err42);}errors++;}var _valid3 = _errs61 === errors;if(_valid3 && valid12){valid12 = false;passing1 = [passing1, 2];}else {if(_valid3){valid12 = true;passing1 = 2;}}}if(!valid12){const err43 = {instancePath:instancePath+"/params/text",schemaPath:"#/anyOf/1/properties/params/properties/text/oneOf",keyword:"oneOf",params:{passingSchemas: passing1},message:"must match exactly one schema in oneOf"};if(vErrors === null){vErrors = [err43];}else {vErrors.push(err43);}errors++;}else {errors = _errs56;if(vErrors !== null){if(_errs56){vErrors.length = _errs56;}else {vErrors = null;}}}}}else {const err44 = {instancePath:instancePath+"/params",schemaPath:"#/anyOf/1/properties/params/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err44];}else {vErrors.push(err44);}errors++;}}if(data.save_as !== undefined){if(typeof data.save_as !== "string"){const err45 = {instancePath:instancePath+"/save_as",schemaPath:"#/anyOf/1/properties/save_as/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err45];}else {vErrors.push(err45);}errors++;}}if(data.policies !== undefined){let data20 = data.policies;if(data20 && typeof data20 == "object" && !Array.isArray(data20)){for(const key6 in data20){if(!((((key6 === "timeout_ms") || (key6 === "retry")) || (key6 === "dlq")) || (key6 === "budget_ms"))){const err46 = {instancePath:instancePath+"/policies",schemaPath:"https://mova.dev/schemas/policies.schema.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key6},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err46];}else {vErrors.push(err46);}errors++;}}if(data20.timeout_ms !== undefined){let data21 = data20.timeout_ms;if(!(((typeof data21 == "number") && (!(data21 % 1) && !isNaN(data21))) && (isFinite(data21)))){const err47 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/timeout_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err47];}else {vErrors.push(err47);}errors++;}if((typeof data21 == "number") && (isFinite(data21))){if(data21 < 0 || isNaN(data21)){const err48 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/timeout_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err48];}else {vErrors.push(err48);}errors++;}}}if(data20.retry !== undefined){let data22 = data20.retry;if(data22 && typeof data22 == "object" && !Array.isArray(data22)){for(const key7 in data22){if(!(((key7 === "max_attempts") || (key7 === "backoff_ms")) || (key7 === "strategy"))){const err49 = {instancePath:instancePath+"/policies/retry",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key7},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err49];}else {vErrors.push(err49);}errors++;}}if(data22.max_attempts !== undefined){let data23 = data22.max_attempts;if(!(((typeof data23 == "number") && (!(data23 % 1) && !isNaN(data23))) && (isFinite(data23)))){const err50 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/max_attempts/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err50];}else {vErrors.push(err50);}errors++;}if((typeof data23 == "number") && (isFinite(data23))){if(data23 < 0 || isNaN(data23)){const err51 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/max_attempts/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err51];}else {vErrors.push(err51);}errors++;}}}if(data22.backoff_ms !== undefined){let data24 = data22.backoff_ms;const _errs77 = errors;let valid16 = false;const _errs78 = errors;if(!(((typeof data24 == "number") && (!(data24 % 1) && !isNaN(data24))) && (isFinite(data24)))){const err52 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err52];}else {vErrors.push(err52);}errors++;}if((typeof data24 == "number") && (isFinite(data24))){if(data24 < 0 || isNaN(data24)){const err53 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err53];}else {vErrors.push(err53);}errors++;}}var _valid4 = _errs78 === errors;valid16 = valid16 || _valid4;const _errs80 = errors;if(Array.isArray(data24)){const len1 = data24.length;for(let i1=0; i1<len1; i1++){let data25 = data24[i1];if(!(((typeof data25 == "number") && (!(data25 % 1) && !isNaN(data25))) && (isFinite(data25)))){const err54 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i1,schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err54];}else {vErrors.push(err54);}errors++;}if((typeof data25 == "number") && (isFinite(data25))){if(data25 < 0 || isNaN(data25)){const err55 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i1,schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err55];}else {vErrors.push(err55);}errors++;}}}}else {const err56 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err56];}else {vErrors.push(err56);}errors++;}var _valid4 = _errs80 === errors;valid16 = valid16 || _valid4;if(!valid16){const err57 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err57];}else {vErrors.push(err57);}errors++;}else {errors = _errs77;if(vErrors !== null){if(_errs77){vErrors.length = _errs77;}else {vErrors = null;}}}}if(data22.strategy !== undefined){let data26 = data22.strategy;if(typeof data26 !== "string"){const err58 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/strategy/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err58];}else {vErrors.push(err58);}errors++;}if(!((data26 === "fixed") || (data26 === "exp"))){const err59 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/strategy/enum",keyword:"enum",params:{allowedValues: schema32.properties.retry.properties.strategy.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err59];}else {vErrors.push(err59);}errors++;}}}else {const err60 = {instancePath:instancePath+"/policies/retry",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err60];}else {vErrors.push(err60);}errors++;}}if(data20.dlq !== undefined){let data27 = data20.dlq;if(data27 && typeof data27 == "object" && !Array.isArray(data27)){for(const key8 in data27){if(!((key8 === "enabled") || (key8 === "target"))){const err61 = {instancePath:instancePath+"/policies/dlq",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/dlq/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key8},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err61];}else {vErrors.push(err61);}errors++;}}if(data27.enabled !== undefined){if(typeof data27.enabled !== "boolean"){const err62 = {instancePath:instancePath+"/policies/dlq/enabled",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/dlq/properties/enabled/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"};if(vErrors === null){vErrors = [err62];}else {vErrors.push(err62);}errors++;}}if(data27.target !== undefined){if(typeof data27.target !== "string"){const err63 = {instancePath:instancePath+"/policies/dlq/target",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/dlq/properties/target/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err63];}else {vErrors.push(err63);}errors++;}}}else {const err64 = {instancePath:instancePath+"/policies/dlq",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/dlq/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err64];}else {vErrors.push(err64);}errors++;}}if(data20.budget_ms !== undefined){let data30 = data20.budget_ms;if(!(((typeof data30 == "number") && (!(data30 % 1) && !isNaN(data30))) && (isFinite(data30)))){const err65 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/budget_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err65];}else {vErrors.push(err65);}errors++;}if((typeof data30 == "number") && (isFinite(data30))){if(data30 < 0 || isNaN(data30)){const err66 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/budget_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err66];}else {vErrors.push(err66);}errors++;}}}}else {const err67 = {instancePath:instancePath+"/policies",schemaPath:"https://mova.dev/schemas/policies.schema.json/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err67];}else {vErrors.push(err67);}errors++;}}}var _valid0 = _errs47 === errors;valid0 = valid0 || _valid0;if(_valid0){if(props0 !== true){props0 = true;}}if(!valid0){const err68 = {instancePath,schemaPath:"#/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err68];}else {vErrors.push(err68);}errors++;}else {errors = _errs1;if(vErrors !== null){if(_errs1){vErrors.length = _errs1;}else {vErrors = null;}}}validate21.errors = vErrors;evaluated0.props = props0;return errors === 0;}validate21.evaluated = {"dynamicProps":true,"dynamicItems":false};const schema36 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://mova.dev/schemas/actions/http_fetch/1.2.0/schema.json","title":"Action: http_fetch","type":"object","required":["type"],"properties":{"type":{"const":"http_fetch"},"name":{"type":"string"},"params":{"type":"object","required":["endpoint","method"],"properties":{"endpoint":{"type":"string","pattern":"^https?://"},"method":{"type":"string","enum":["GET","HEAD","POST","PUT","PATCH","DELETE","OPTIONS"]},"headers":{"type":"object","patternProperties":{"^[A-Za-z0-9!#$%&'*+.^_`|~-]+$":{"type":"string","maxLength":8192}},"additionalProperties":false},"payload":{"oneOf":[{"type":"null"},{"type":"string","maxLength":1048576},{"type":"array"},{"type":"object"}]},"timeout_ms":{"type":"integer","minimum":1,"maximum":120000},"retry":{"type":"object","properties":{"max_attempts":{"type":"integer","minimum":0,"maximum":10},"backoff_ms":{"type":"integer","minimum":0,"maximum":60000}},"required":["max_attempts","backoff_ms"],"additionalProperties":false},"idempotency_key":{"type":"string"}},"additionalProperties":false},"endpoint":{"type":"string","pattern":"^https?://"},"method":{"type":"string","enum":["GET","HEAD","POST","PUT","PATCH","DELETE","OPTIONS"]},"headers":{"type":"object","patternProperties":{"^[A-Za-z0-9!#$%&'*+.^_`|~-]+$":{"type":"string","maxLength":8192}},"additionalProperties":false},"payload":{"oneOf":[{"type":"null"},{"type":"string","maxLength":1048576},{"type":"array"},{"type":"object"}]},"timeout_ms":{"type":"integer","minimum":1,"maximum":120000},"retry":{"type":"object","properties":{"max_attempts":{"type":"integer","minimum":0,"maximum":10},"backoff_ms":{"type":"integer","minimum":0,"maximum":60000}},"required":["max_attempts","backoff_ms"],"additionalProperties":false},"idempotency_key":{"type":"string"},"save_as":{"type":"string"},"policies":{"$ref":"https://mova.dev/schemas/policies.schema.json"}},"anyOf":[{"properties":{"params":{}},"required":["params"]},{"properties":{"endpoint":{},"method":{}},"required":["endpoint","method"]}],"additionalProperties":false};const func3 = require("ajv/dist/runtime/ucs2length").default;const pattern5 = new RegExp("^https?://", "u");const pattern6 = new RegExp("^[A-Za-z0-9!#$%&'*+.^_`|~-]+$", "u");function validate23(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="https://mova.dev/schemas/actions/http_fetch/1.2.0/schema.json" */;let vErrors = null;let errors = 0;const evaluated0 = validate23.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}const _errs1 = errors;let valid0 = false;const _errs2 = errors;if(data && typeof data == "object" && !Array.isArray(data)){if(data.params === undefined){const err0 = {instancePath,schemaPath:"#/anyOf/0/required",keyword:"required",params:{missingProperty: "params"},message:"must have required property '"+"params"+"'"};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}}var _valid0 = _errs2 === errors;valid0 = valid0 || _valid0;if(_valid0){var props0 = {};props0.params = true;}const _errs3 = errors;if(data && typeof data == "object" && !Array.isArray(data)){if(data.endpoint === undefined){const err1 = {instancePath,schemaPath:"#/anyOf/1/required",keyword:"required",params:{missingProperty: "endpoint"},message:"must have required property '"+"endpoint"+"'"};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}if(data.method === undefined){const err2 = {instancePath,schemaPath:"#/anyOf/1/required",keyword:"required",params:{missingProperty: "method"},message:"must have required property '"+"method"+"'"};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}}var _valid0 = _errs3 === errors;valid0 = valid0 || _valid0;if(_valid0){if(props0 !== true){props0 = props0 || {};props0.endpoint = true;props0.method = true;}}if(!valid0){const err3 = {instancePath,schemaPath:"#/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}else {errors = _errs1;if(vErrors !== null){if(_errs1){vErrors.length = _errs1;}else {vErrors = null;}}}if(data && typeof data == "object" && !Array.isArray(data)){if(data.type === undefined){const err4 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "type"},message:"must have required property '"+"type"+"'"};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}for(const key0 in data){if(!(func1.call(schema36.properties, key0))){const err5 = {instancePath,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key0},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}}if(data.type !== undefined){if("http_fetch" !== data.type){const err6 = {instancePath:instancePath+"/type",schemaPath:"#/properties/type/const",keyword:"const",params:{allowedValue: "http_fetch"},message:"must be equal to constant"};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}}if(data.name !== undefined){if(typeof data.name !== "string"){const err7 = {instancePath:instancePath+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}}if(data.params !== undefined){let data2 = data.params;if(data2 && typeof data2 == "object" && !Array.isArray(data2)){if(data2.endpoint === undefined){const err8 = {instancePath:instancePath+"/params",schemaPath:"#/properties/params/required",keyword:"required",params:{missingProperty: "endpoint"},message:"must have required property '"+"endpoint"+"'"};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}if(data2.method === undefined){const err9 = {instancePath:instancePath+"/params",schemaPath:"#/properties/params/required",keyword:"required",params:{missingProperty: "method"},message:"must have required property '"+"method"+"'"};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}for(const key1 in data2){if(!(((((((key1 === "endpoint") || (key1 === "method")) || (key1 === "headers")) || (key1 === "payload")) || (key1 === "timeout_ms")) || (key1 === "retry")) || (key1 === "idempotency_key"))){const err10 = {instancePath:instancePath+"/params",schemaPath:"#/properties/params/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key1},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}}if(data2.endpoint !== undefined){let data3 = data2.endpoint;if(typeof data3 === "string"){if(!pattern5.test(data3)){const err11 = {instancePath:instancePath+"/params/endpoint",schemaPath:"#/properties/params/properties/endpoint/pattern",keyword:"pattern",params:{pattern: "^https?://"},message:"must match pattern \""+"^https?://"+"\""};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}}else {const err12 = {instancePath:instancePath+"/params/endpoint",schemaPath:"#/properties/params/properties/endpoint/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}}if(data2.method !== undefined){let data4 = data2.method;if(typeof data4 !== "string"){const err13 = {instancePath:instancePath+"/params/method",schemaPath:"#/properties/params/properties/method/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}if(!(((((((data4 === "GET") || (data4 === "HEAD")) || (data4 === "POST")) || (data4 === "PUT")) || (data4 === "PATCH")) || (data4 === "DELETE")) || (data4 === "OPTIONS"))){const err14 = {instancePath:instancePath+"/params/method",schemaPath:"#/properties/params/properties/method/enum",keyword:"enum",params:{allowedValues: schema36.properties.params.properties.method.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}}if(data2.headers !== undefined){let data5 = data2.headers;if(data5 && typeof data5 == "object" && !Array.isArray(data5)){for(const key2 in data5){if(!(pattern6.test(key2))){const err15 = {instancePath:instancePath+"/params/headers",schemaPath:"#/properties/params/properties/headers/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key2},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}}for(const key3 in data5){if(pattern6.test(key3)){let data6 = data5[key3];if(typeof data6 === "string"){if(func3(data6) > 8192){const err16 = {instancePath:instancePath+"/params/headers/" + key3.replace(/~/g, "~0").replace(/\//g, "~1"),schemaPath:"#/properties/params/properties/headers/patternProperties/%5E%5BA-Za-z0-9!%23%24%25%26'*%2B.%5E_%60%7C~0-%5D%2B%24/maxLength",keyword:"maxLength",params:{limit: 8192},message:"must NOT have more than 8192 characters"};if(vErrors === null){vErrors = [err16];}else {vErrors.push(err16);}errors++;}}else {const err17 = {instancePath:instancePath+"/params/headers/" + key3.replace(/~/g, "~0").replace(/\//g, "~1"),schemaPath:"#/properties/params/properties/headers/patternProperties/%5E%5BA-Za-z0-9!%23%24%25%26'*%2B.%5E_%60%7C~0-%5D%2B%24/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err17];}else {vErrors.push(err17);}errors++;}}}}else {const err18 = {instancePath:instancePath+"/params/headers",schemaPath:"#/properties/params/properties/headers/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err18];}else {vErrors.push(err18);}errors++;}}if(data2.payload !== undefined){let data7 = data2.payload;const _errs21 = errors;let valid4 = false;let passing0 = null;const _errs22 = errors;if(data7 !== null){const err19 = {instancePath:instancePath+"/params/payload",schemaPath:"#/properties/params/properties/payload/oneOf/0/type",keyword:"type",params:{type: "null"},message:"must be null"};if(vErrors === null){vErrors = [err19];}else {vErrors.push(err19);}errors++;}var _valid1 = _errs22 === errors;if(_valid1){valid4 = true;passing0 = 0;}const _errs24 = errors;if(typeof data7 === "string"){if(func3(data7) > 1048576){const err20 = {instancePath:instancePath+"/params/payload",schemaPath:"#/properties/params/properties/payload/oneOf/1/maxLength",keyword:"maxLength",params:{limit: 1048576},message:"must NOT have more than 1048576 characters"};if(vErrors === null){vErrors = [err20];}else {vErrors.push(err20);}errors++;}}else {const err21 = {instancePath:instancePath+"/params/payload",schemaPath:"#/properties/params/properties/payload/oneOf/1/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err21];}else {vErrors.push(err21);}errors++;}var _valid1 = _errs24 === errors;if(_valid1 && valid4){valid4 = false;passing0 = [passing0, 1];}else {if(_valid1){valid4 = true;passing0 = 1;}const _errs26 = errors;if(!(Array.isArray(data7))){const err22 = {instancePath:instancePath+"/params/payload",schemaPath:"#/properties/params/properties/payload/oneOf/2/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err22];}else {vErrors.push(err22);}errors++;}var _valid1 = _errs26 === errors;if(_valid1 && valid4){valid4 = false;passing0 = [passing0, 2];}else {if(_valid1){valid4 = true;passing0 = 2;}const _errs28 = errors;if(!(data7 && typeof data7 == "object" && !Array.isArray(data7))){const err23 = {instancePath:instancePath+"/params/payload",schemaPath:"#/properties/params/properties/payload/oneOf/3/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err23];}else {vErrors.push(err23);}errors++;}var _valid1 = _errs28 === errors;if(_valid1 && valid4){valid4 = false;passing0 = [passing0, 3];}else {if(_valid1){valid4 = true;passing0 = 3;}}}}if(!valid4){const err24 = {instancePath:instancePath+"/params/payload",schemaPath:"#/properties/params/properties/payload/oneOf",keyword:"oneOf",params:{passingSchemas: passing0},message:"must match exactly one schema in oneOf"};if(vErrors === null){vErrors = [err24];}else {vErrors.push(err24);}errors++;}else {errors = _errs21;if(vErrors !== null){if(_errs21){vErrors.length = _errs21;}else {vErrors = null;}}}}if(data2.timeout_ms !== undefined){let data8 = data2.timeout_ms;if(!(((typeof data8 == "number") && (!(data8 % 1) && !isNaN(data8))) && (isFinite(data8)))){const err25 = {instancePath:instancePath+"/params/timeout_ms",schemaPath:"#/properties/params/properties/timeout_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err25];}else {vErrors.push(err25);}errors++;}if((typeof data8 == "number") && (isFinite(data8))){if(data8 > 120000 || isNaN(data8)){const err26 = {instancePath:instancePath+"/params/timeout_ms",schemaPath:"#/properties/params/properties/timeout_ms/maximum",keyword:"maximum",params:{comparison: "<=", limit: 120000},message:"must be <= 120000"};if(vErrors === null){vErrors = [err26];}else {vErrors.push(err26);}errors++;}if(data8 < 1 || isNaN(data8)){const err27 = {instancePath:instancePath+"/params/timeout_ms",schemaPath:"#/properties/params/properties/timeout_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 1},message:"must be >= 1"};if(vErrors === null){vErrors = [err27];}else {vErrors.push(err27);}errors++;}}}if(data2.retry !== undefined){let data9 = data2.retry;if(data9 && typeof data9 == "object" && !Array.isArray(data9)){if(data9.max_attempts === undefined){const err28 = {instancePath:instancePath+"/params/retry",schemaPath:"#/properties/params/properties/retry/required",keyword:"required",params:{missingProperty: "max_attempts"},message:"must have required property '"+"max_attempts"+"'"};if(vErrors === null){vErrors = [err28];}else {vErrors.push(err28);}errors++;}if(data9.backoff_ms === undefined){const err29 = {instancePath:instancePath+"/params/retry",schemaPath:"#/properties/params/properties/retry/required",keyword:"required",params:{missingProperty: "backoff_ms"},message:"must have required property '"+"backoff_ms"+"'"};if(vErrors === null){vErrors = [err29];}else {vErrors.push(err29);}errors++;}for(const key4 in data9){if(!((key4 === "max_attempts") || (key4 === "backoff_ms"))){const err30 = {instancePath:instancePath+"/params/retry",schemaPath:"#/properties/params/properties/retry/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key4},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err30];}else {vErrors.push(err30);}errors++;}}if(data9.max_attempts !== undefined){let data10 = data9.max_attempts;if(!(((typeof data10 == "number") && (!(data10 % 1) && !isNaN(data10))) && (isFinite(data10)))){const err31 = {instancePath:instancePath+"/params/retry/max_attempts",schemaPath:"#/properties/params/properties/retry/properties/max_attempts/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err31];}else {vErrors.push(err31);}errors++;}if((typeof data10 == "number") && (isFinite(data10))){if(data10 > 10 || isNaN(data10)){const err32 = {instancePath:instancePath+"/params/retry/max_attempts",schemaPath:"#/properties/params/properties/retry/properties/max_attempts/maximum",keyword:"maximum",params:{comparison: "<=", limit: 10},message:"must be <= 10"};if(vErrors === null){vErrors = [err32];}else {vErrors.push(err32);}errors++;}if(data10 < 0 || isNaN(data10)){const err33 = {instancePath:instancePath+"/params/retry/max_attempts",schemaPath:"#/properties/params/properties/retry/properties/max_attempts/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err33];}else {vErrors.push(err33);}errors++;}}}if(data9.backoff_ms !== undefined){let data11 = data9.backoff_ms;if(!(((typeof data11 == "number") && (!(data11 % 1) && !isNaN(data11))) && (isFinite(data11)))){const err34 = {instancePath:instancePath+"/params/retry/backoff_ms",schemaPath:"#/properties/params/properties/retry/properties/backoff_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err34];}else {vErrors.push(err34);}errors++;}if((typeof data11 == "number") && (isFinite(data11))){if(data11 > 60000 || isNaN(data11)){const err35 = {instancePath:instancePath+"/params/retry/backoff_ms",schemaPath:"#/properties/params/properties/retry/properties/backoff_ms/maximum",keyword:"maximum",params:{comparison: "<=", limit: 60000},message:"must be <= 60000"};if(vErrors === null){vErrors = [err35];}else {vErrors.push(err35);}errors++;}if(data11 < 0 || isNaN(data11)){const err36 = {instancePath:instancePath+"/params/retry/backoff_ms",schemaPath:"#/properties/params/properties/retry/properties/backoff_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err36];}else {vErrors.push(err36);}errors++;}}}}else {const err37 = {instancePath:instancePath+"/params/retry",schemaPath:"#/properties/params/properties/retry/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err37];}else {vErrors.push(err37);}errors++;}}if(data2.idempotency_key !== undefined){if(typeof data2.idempotency_key !== "string"){const err38 = {instancePath:instancePath+"/params/idempotency_key",schemaPath:"#/properties/params/properties/idempotency_key/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err38];}else {vErrors.push(err38);}errors++;}}}else {const err39 = {instancePath:instancePath+"/params",schemaPath:"#/properties/params/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err39];}else {vErrors.push(err39);}errors++;}}if(data.endpoint !== undefined){let data13 = data.endpoint;if(typeof data13 === "string"){if(!pattern5.test(data13)){const err40 = {instancePath:instancePath+"/endpoint",schemaPath:"#/properties/endpoint/pattern",keyword:"pattern",params:{pattern: "^https?://"},message:"must match pattern \""+"^https?://"+"\""};if(vErrors === null){vErrors = [err40];}else {vErrors.push(err40);}errors++;}}else {const err41 = {instancePath:instancePath+"/endpoint",schemaPath:"#/properties/endpoint/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err41];}else {vErrors.push(err41);}errors++;}}if(data.method !== undefined){let data14 = data.method;if(typeof data14 !== "string"){const err42 = {instancePath:instancePath+"/method",schemaPath:"#/properties/method/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err42];}else {vErrors.push(err42);}errors++;}if(!(((((((data14 === "GET") || (data14 === "HEAD")) || (data14 === "POST")) || (data14 === "PUT")) || (data14 === "PATCH")) || (data14 === "DELETE")) || (data14 === "OPTIONS"))){const err43 = {instancePath:instancePath+"/method",schemaPath:"#/properties/method/enum",keyword:"enum",params:{allowedValues: schema36.properties.method.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err43];}else {vErrors.push(err43);}errors++;}}if(data.headers !== undefined){let data15 = data.headers;if(data15 && typeof data15 == "object" && !Array.isArray(data15)){for(const key5 in data15){if(!(pattern6.test(key5))){const err44 = {instancePath:instancePath+"/headers",schemaPath:"#/properties/headers/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key5},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err44];}else {vErrors.push(err44);}errors++;}}for(const key6 in data15){if(pattern6.test(key6)){let data16 = data15[key6];if(typeof data16 === "string"){if(func3(data16) > 8192){const err45 = {instancePath:instancePath+"/headers/" + key6.replace(/~/g, "~0").replace(/\//g, "~1"),schemaPath:"#/properties/headers/patternProperties/%5E%5BA-Za-z0-9!%23%24%25%26'*%2B.%5E_%60%7C~0-%5D%2B%24/maxLength",keyword:"maxLength",params:{limit: 8192},message:"must NOT have more than 8192 characters"};if(vErrors === null){vErrors = [err45];}else {vErrors.push(err45);}errors++;}}else {const err46 = {instancePath:instancePath+"/headers/" + key6.replace(/~/g, "~0").replace(/\//g, "~1"),schemaPath:"#/properties/headers/patternProperties/%5E%5BA-Za-z0-9!%23%24%25%26'*%2B.%5E_%60%7C~0-%5D%2B%24/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err46];}else {vErrors.push(err46);}errors++;}}}}else {const err47 = {instancePath:instancePath+"/headers",schemaPath:"#/properties/headers/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err47];}else {vErrors.push(err47);}errors++;}}if(data.payload !== undefined){let data17 = data.payload;const _errs51 = errors;let valid7 = false;let passing1 = null;const _errs52 = errors;if(data17 !== null){const err48 = {instancePath:instancePath+"/payload",schemaPath:"#/properties/payload/oneOf/0/type",keyword:"type",params:{type: "null"},message:"must be null"};if(vErrors === null){vErrors = [err48];}else {vErrors.push(err48);}errors++;}var _valid2 = _errs52 === errors;if(_valid2){valid7 = true;passing1 = 0;}const _errs54 = errors;if(typeof data17 === "string"){if(func3(data17) > 1048576){const err49 = {instancePath:instancePath+"/payload",schemaPath:"#/properties/payload/oneOf/1/maxLength",keyword:"maxLength",params:{limit: 1048576},message:"must NOT have more than 1048576 characters"};if(vErrors === null){vErrors = [err49];}else {vErrors.push(err49);}errors++;}}else {const err50 = {instancePath:instancePath+"/payload",schemaPath:"#/properties/payload/oneOf/1/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err50];}else {vErrors.push(err50);}errors++;}var _valid2 = _errs54 === errors;if(_valid2 && valid7){valid7 = false;passing1 = [passing1, 1];}else {if(_valid2){valid7 = true;passing1 = 1;}const _errs56 = errors;if(!(Array.isArray(data17))){const err51 = {instancePath:instancePath+"/payload",schemaPath:"#/properties/payload/oneOf/2/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err51];}else {vErrors.push(err51);}errors++;}var _valid2 = _errs56 === errors;if(_valid2 && valid7){valid7 = false;passing1 = [passing1, 2];}else {if(_valid2){valid7 = true;passing1 = 2;}const _errs58 = errors;if(!(data17 && typeof data17 == "object" && !Array.isArray(data17))){const err52 = {instancePath:instancePath+"/payload",schemaPath:"#/properties/payload/oneOf/3/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err52];}else {vErrors.push(err52);}errors++;}var _valid2 = _errs58 === errors;if(_valid2 && valid7){valid7 = false;passing1 = [passing1, 3];}else {if(_valid2){valid7 = true;passing1 = 3;}}}}if(!valid7){const err53 = {instancePath:instancePath+"/payload",schemaPath:"#/properties/payload/oneOf",keyword:"oneOf",params:{passingSchemas: passing1},message:"must match exactly one schema in oneOf"};if(vErrors === null){vErrors = [err53];}else {vErrors.push(err53);}errors++;}else {errors = _errs51;if(vErrors !== null){if(_errs51){vErrors.length = _errs51;}else {vErrors = null;}}}}if(data.timeout_ms !== undefined){let data18 = data.timeout_ms;if(!(((typeof data18 == "number") && (!(data18 % 1) && !isNaN(data18))) && (isFinite(data18)))){const err54 = {instancePath:instancePath+"/timeout_ms",schemaPath:"#/properties/timeout_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err54];}else {vErrors.push(err54);}errors++;}if((typeof data18 == "number") && (isFinite(data18))){if(data18 > 120000 || isNaN(data18)){const err55 = {instancePath:instancePath+"/timeout_ms",schemaPath:"#/properties/timeout_ms/maximum",keyword:"maximum",params:{comparison: "<=", limit: 120000},message:"must be <= 120000"};if(vErrors === null){vErrors = [err55];}else {vErrors.push(err55);}errors++;}if(data18 < 1 || isNaN(data18)){const err56 = {instancePath:instancePath+"/timeout_ms",schemaPath:"#/properties/timeout_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 1},message:"must be >= 1"};if(vErrors === null){vErrors = [err56];}else {vErrors.push(err56);}errors++;}}}if(data.retry !== undefined){let data19 = data.retry;if(data19 && typeof data19 == "object" && !Array.isArray(data19)){if(data19.max_attempts === undefined){const err57 = {instancePath:instancePath+"/retry",schemaPath:"#/properties/retry/required",keyword:"required",params:{missingProperty: "max_attempts"},message:"must have required property '"+"max_attempts"+"'"};if(vErrors === null){vErrors = [err57];}else {vErrors.push(err57);}errors++;}if(data19.backoff_ms === undefined){const err58 = {instancePath:instancePath+"/retry",schemaPath:"#/properties/retry/required",keyword:"required",params:{missingProperty: "backoff_ms"},message:"must have required property '"+"backoff_ms"+"'"};if(vErrors === null){vErrors = [err58];}else {vErrors.push(err58);}errors++;}for(const key7 in data19){if(!((key7 === "max_attempts") || (key7 === "backoff_ms"))){const err59 = {instancePath:instancePath+"/retry",schemaPath:"#/properties/retry/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key7},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err59];}else {vErrors.push(err59);}errors++;}}if(data19.max_attempts !== undefined){let data20 = data19.max_attempts;if(!(((typeof data20 == "number") && (!(data20 % 1) && !isNaN(data20))) && (isFinite(data20)))){const err60 = {instancePath:instancePath+"/retry/max_attempts",schemaPath:"#/properties/retry/properties/max_attempts/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err60];}else {vErrors.push(err60);}errors++;}if((typeof data20 == "number") && (isFinite(data20))){if(data20 > 10 || isNaN(data20)){const err61 = {instancePath:instancePath+"/retry/max_attempts",schemaPath:"#/properties/retry/properties/max_attempts/maximum",keyword:"maximum",params:{comparison: "<=", limit: 10},message:"must be <= 10"};if(vErrors === null){vErrors = [err61];}else {vErrors.push(err61);}errors++;}if(data20 < 0 || isNaN(data20)){const err62 = {instancePath:instancePath+"/retry/max_attempts",schemaPath:"#/properties/retry/properties/max_attempts/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err62];}else {vErrors.push(err62);}errors++;}}}if(data19.backoff_ms !== undefined){let data21 = data19.backoff_ms;if(!(((typeof data21 == "number") && (!(data21 % 1) && !isNaN(data21))) && (isFinite(data21)))){const err63 = {instancePath:instancePath+"/retry/backoff_ms",schemaPath:"#/properties/retry/properties/backoff_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err63];}else {vErrors.push(err63);}errors++;}if((typeof data21 == "number") && (isFinite(data21))){if(data21 > 60000 || isNaN(data21)){const err64 = {instancePath:instancePath+"/retry/backoff_ms",schemaPath:"#/properties/retry/properties/backoff_ms/maximum",keyword:"maximum",params:{comparison: "<=", limit: 60000},message:"must be <= 60000"};if(vErrors === null){vErrors = [err64];}else {vErrors.push(err64);}errors++;}if(data21 < 0 || isNaN(data21)){const err65 = {instancePath:instancePath+"/retry/backoff_ms",schemaPath:"#/properties/retry/properties/backoff_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err65];}else {vErrors.push(err65);}errors++;}}}}else {const err66 = {instancePath:instancePath+"/retry",schemaPath:"#/properties/retry/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err66];}else {vErrors.push(err66);}errors++;}}if(data.idempotency_key !== undefined){if(typeof data.idempotency_key !== "string"){const err67 = {instancePath:instancePath+"/idempotency_key",schemaPath:"#/properties/idempotency_key/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err67];}else {vErrors.push(err67);}errors++;}}if(data.save_as !== undefined){if(typeof data.save_as !== "string"){const err68 = {instancePath:instancePath+"/save_as",schemaPath:"#/properties/save_as/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err68];}else {vErrors.push(err68);}errors++;}}if(data.policies !== undefined){let data24 = data.policies;if(data24 && typeof data24 == "object" && !Array.isArray(data24)){for(const key8 in data24){if(!((((key8 === "timeout_ms") || (key8 === "retry")) || (key8 === "dlq")) || (key8 === "budget_ms"))){const err69 = {instancePath:instancePath+"/policies",schemaPath:"https://mova.dev/schemas/policies.schema.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key8},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err69];}else {vErrors.push(err69);}errors++;}}if(data24.timeout_ms !== undefined){let data25 = data24.timeout_ms;if(!(((typeof data25 == "number") && (!(data25 % 1) && !isNaN(data25))) && (isFinite(data25)))){const err70 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/timeout_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err70];}else {vErrors.push(err70);}errors++;}if((typeof data25 == "number") && (isFinite(data25))){if(data25 < 0 || isNaN(data25)){const err71 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/timeout_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err71];}else {vErrors.push(err71);}errors++;}}}if(data24.retry !== undefined){let data26 = data24.retry;if(data26 && typeof data26 == "object" && !Array.isArray(data26)){for(const key9 in data26){if(!(((key9 === "max_attempts") || (key9 === "backoff_ms")) || (key9 === "strategy"))){const err72 = {instancePath:instancePath+"/policies/retry",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key9},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err72];}else {vErrors.push(err72);}errors++;}}if(data26.max_attempts !== undefined){let data27 = data26.max_attempts;if(!(((typeof data27 == "number") && (!(data27 % 1) && !isNaN(data27))) && (isFinite(data27)))){const err73 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/max_attempts/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err73];}else {vErrors.push(err73);}errors++;}if((typeof data27 == "number") && (isFinite(data27))){if(data27 < 0 || isNaN(data27)){const err74 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/max_attempts/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err74];}else {vErrors.push(err74);}errors++;}}}if(data26.backoff_ms !== undefined){let data28 = data26.backoff_ms;const _errs85 = errors;let valid12 = false;const _errs86 = errors;if(!(((typeof data28 == "number") && (!(data28 % 1) && !isNaN(data28))) && (isFinite(data28)))){const err75 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err75];}else {vErrors.push(err75);}errors++;}if((typeof data28 == "number") && (isFinite(data28))){if(data28 < 0 || isNaN(data28)){const err76 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err76];}else {vErrors.push(err76);}errors++;}}var _valid3 = _errs86 === errors;valid12 = valid12 || _valid3;const _errs88 = errors;if(Array.isArray(data28)){const len0 = data28.length;for(let i0=0; i0<len0; i0++){let data29 = data28[i0];if(!(((typeof data29 == "number") && (!(data29 % 1) && !isNaN(data29))) && (isFinite(data29)))){const err77 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err77];}else {vErrors.push(err77);}errors++;}if((typeof data29 == "number") && (isFinite(data29))){if(data29 < 0 || isNaN(data29)){const err78 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err78];}else {vErrors.push(err78);}errors++;}}}}else {const err79 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err79];}else {vErrors.push(err79);}errors++;}var _valid3 = _errs88 === errors;valid12 = valid12 || _valid3;if(!valid12){const err80 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err80];}else {vErrors.push(err80);}errors++;}else {errors = _errs85;if(vErrors !== null){if(_errs85){vErrors.length = _errs85;}else {vErrors = null;}}}}if(data26.strategy !== undefined){let data30 = data26.strategy;if(typeof data30 !== "string"){const err81 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/strategy/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err81];}else {vErrors.push(err81);}errors++;}if(!((data30 === "fixed") || (data30 === "exp"))){const err82 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/strategy/enum",keyword:"enum",params:{allowedValues: schema32.properties.retry.properties.strategy.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err82];}else {vErrors.push(err82);}errors++;}}}else {const err83 = {instancePath:instancePath+"/policies/retry",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err83];}else {vErrors.push(err83);}errors++;}}if(data24.dlq !== undefined){let data31 = data24.dlq;if(data31 && typeof data31 == "object" && !Array.isArray(data31)){for(const key10 in data31){if(!((key10 === "enabled") || (key10 === "target"))){const err84 = {instancePath:instancePath+"/policies/dlq",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/dlq/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key10},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err84];}else {vErrors.push(err84);}errors++;}}if(data31.enabled !== undefined){if(typeof data31.enabled !== "boolean"){const err85 = {instancePath:instancePath+"/policies/dlq/enabled",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/dlq/properties/enabled/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"};if(vErrors === null){vErrors = [err85];}else {vErrors.push(err85);}errors++;}}if(data31.target !== undefined){if(typeof data31.target !== "string"){const err86 = {instancePath:instancePath+"/policies/dlq/target",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/dlq/properties/target/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err86];}else {vErrors.push(err86);}errors++;}}}else {const err87 = {instancePath:instancePath+"/policies/dlq",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/dlq/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err87];}else {vErrors.push(err87);}errors++;}}if(data24.budget_ms !== undefined){let data34 = data24.budget_ms;if(!(((typeof data34 == "number") && (!(data34 % 1) && !isNaN(data34))) && (isFinite(data34)))){const err88 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/budget_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err88];}else {vErrors.push(err88);}errors++;}if((typeof data34 == "number") && (isFinite(data34))){if(data34 < 0 || isNaN(data34)){const err89 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/budget_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err89];}else {vErrors.push(err89);}errors++;}}}}else {const err90 = {instancePath:instancePath+"/policies",schemaPath:"https://mova.dev/schemas/policies.schema.json/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err90];}else {vErrors.push(err90);}errors++;}}}else {const err91 = {instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err91];}else {vErrors.push(err91);}errors++;}validate23.errors = vErrors;return errors === 0;}validate23.evaluated = {"props":true,"dynamicProps":false,"dynamicItems":false};const schema38 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://mova.dev/schemas/actions/set/1.0.1/schema.json","title":"Action: set","type":"object","anyOf":[{"required":["type","vars"],"properties":{"type":{"const":"set"},"name":{"type":"string"},"vars":{"type":"object","additionalProperties":true},"policies":{"$ref":"https://mova.dev/schemas/policies.schema.json"}},"additionalProperties":false},{"required":["type","params"],"properties":{"type":{"const":"set"},"name":{"type":"string"},"params":{"type":"object","required":["vars"],"properties":{"vars":{"type":"object","additionalProperties":true}},"additionalProperties":false},"policies":{"$ref":"https://mova.dev/schemas/policies.schema.json"}},"additionalProperties":false}]};function validate25(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="https://mova.dev/schemas/actions/set/1.0.1/schema.json" */;let vErrors = null;let errors = 0;const evaluated0 = validate25.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}if(!(data && typeof data == "object" && !Array.isArray(data))){const err0 = {instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}const _errs1 = errors;let valid0 = false;const _errs2 = errors;if(data && typeof data == "object" && !Array.isArray(data)){if(data.type === undefined){const err1 = {instancePath,schemaPath:"#/anyOf/0/required",keyword:"required",params:{missingProperty: "type"},message:"must have required property '"+"type"+"'"};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}if(data.vars === undefined){const err2 = {instancePath,schemaPath:"#/anyOf/0/required",keyword:"required",params:{missingProperty: "vars"},message:"must have required property '"+"vars"+"'"};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}for(const key0 in data){if(!((((key0 === "type") || (key0 === "name")) || (key0 === "vars")) || (key0 === "policies"))){const err3 = {instancePath,schemaPath:"#/anyOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key0},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}}if(data.type !== undefined){if("set" !== data.type){const err4 = {instancePath:instancePath+"/type",schemaPath:"#/anyOf/0/properties/type/const",keyword:"const",params:{allowedValue: "set"},message:"must be equal to constant"};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}}if(data.name !== undefined){if(typeof data.name !== "string"){const err5 = {instancePath:instancePath+"/name",schemaPath:"#/anyOf/0/properties/name/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}}if(data.vars !== undefined){let data2 = data.vars;if(data2 && typeof data2 == "object" && !Array.isArray(data2)){}else {const err6 = {instancePath:instancePath+"/vars",schemaPath:"#/anyOf/0/properties/vars/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}}if(data.policies !== undefined){let data3 = data.policies;if(data3 && typeof data3 == "object" && !Array.isArray(data3)){for(const key1 in data3){if(!((((key1 === "timeout_ms") || (key1 === "retry")) || (key1 === "dlq")) || (key1 === "budget_ms"))){const err7 = {instancePath:instancePath+"/policies",schemaPath:"https://mova.dev/schemas/policies.schema.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key1},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}}if(data3.timeout_ms !== undefined){let data4 = data3.timeout_ms;if(!(((typeof data4 == "number") && (!(data4 % 1) && !isNaN(data4))) && (isFinite(data4)))){const err8 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/timeout_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}if((typeof data4 == "number") && (isFinite(data4))){if(data4 < 0 || isNaN(data4)){const err9 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/timeout_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}}}if(data3.retry !== undefined){let data5 = data3.retry;if(data5 && typeof data5 == "object" && !Array.isArray(data5)){for(const key2 in data5){if(!(((key2 === "max_attempts") || (key2 === "backoff_ms")) || (key2 === "strategy"))){const err10 = {instancePath:instancePath+"/policies/retry",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key2},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}}if(data5.max_attempts !== undefined){let data6 = data5.max_attempts;if(!(((typeof data6 == "number") && (!(data6 % 1) && !isNaN(data6))) && (isFinite(data6)))){const err11 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/max_attempts/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}if((typeof data6 == "number") && (isFinite(data6))){if(data6 < 0 || isNaN(data6)){const err12 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/max_attempts/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}}}if(data5.backoff_ms !== undefined){let data7 = data5.backoff_ms;const _errs22 = errors;let valid5 = false;const _errs23 = errors;if(!(((typeof data7 == "number") && (!(data7 % 1) && !isNaN(data7))) && (isFinite(data7)))){const err13 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}if((typeof data7 == "number") && (isFinite(data7))){if(data7 < 0 || isNaN(data7)){const err14 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}}var _valid1 = _errs23 === errors;valid5 = valid5 || _valid1;const _errs25 = errors;if(Array.isArray(data7)){const len0 = data7.length;for(let i0=0; i0<len0; i0++){let data8 = data7[i0];if(!(((typeof data8 == "number") && (!(data8 % 1) && !isNaN(data8))) && (isFinite(data8)))){const err15 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}if((typeof data8 == "number") && (isFinite(data8))){if(data8 < 0 || isNaN(data8)){const err16 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err16];}else {vErrors.push(err16);}errors++;}}}}else {const err17 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err17];}else {vErrors.push(err17);}errors++;}var _valid1 = _errs25 === errors;valid5 = valid5 || _valid1;if(!valid5){const err18 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err18];}else {vErrors.push(err18);}errors++;}else {errors = _errs22;if(vErrors !== null){if(_errs22){vErrors.length = _errs22;}else {vErrors = null;}}}}if(data5.strategy !== undefined){let data9 = data5.strategy;if(typeof data9 !== "string"){const err19 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/strategy/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err19];}else {vErrors.push(err19);}errors++;}if(!((data9 === "fixed") || (data9 === "exp"))){const err20 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/strategy/enum",keyword:"enum",params:{allowedValues: schema32.properties.retry.properties.strategy.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err20];}else {vErrors.push(err20);}errors++;}}}else {const err21 = {instancePath:instancePath+"/policies/retry",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err21];}else {vErrors.push(err21);}errors++;}}if(data3.dlq !== undefined){let data10 = data3.dlq;if(data10 && typeof data10 == "object" && !Array.isArray(data10)){for(const key3 in data10){if(!((key3 === "enabled") || (key3 === "target"))){const err22 = {instancePath:instancePath+"/policies/dlq",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/dlq/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key3},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err22];}else {vErrors.push(err22);}errors++;}}if(data10.enabled !== undefined){if(typeof data10.enabled !== "boolean"){const err23 = {instancePath:instancePath+"/policies/dlq/enabled",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/dlq/properties/enabled/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"};if(vErrors === null){vErrors = [err23];}else {vErrors.push(err23);}errors++;}}if(data10.target !== undefined){if(typeof data10.target !== "string"){const err24 = {instancePath:instancePath+"/policies/dlq/target",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/dlq/properties/target/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err24];}else {vErrors.push(err24);}errors++;}}}else {const err25 = {instancePath:instancePath+"/policies/dlq",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/dlq/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err25];}else {vErrors.push(err25);}errors++;}}if(data3.budget_ms !== undefined){let data13 = data3.budget_ms;if(!(((typeof data13 == "number") && (!(data13 % 1) && !isNaN(data13))) && (isFinite(data13)))){const err26 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/budget_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err26];}else {vErrors.push(err26);}errors++;}if((typeof data13 == "number") && (isFinite(data13))){if(data13 < 0 || isNaN(data13)){const err27 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/budget_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err27];}else {vErrors.push(err27);}errors++;}}}}else {const err28 = {instancePath:instancePath+"/policies",schemaPath:"https://mova.dev/schemas/policies.schema.json/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err28];}else {vErrors.push(err28);}errors++;}}}var _valid0 = _errs2 === errors;valid0 = valid0 || _valid0;if(_valid0){var props0 = true;}const _errs40 = errors;if(data && typeof data == "object" && !Array.isArray(data)){if(data.type === undefined){const err29 = {instancePath,schemaPath:"#/anyOf/1/required",keyword:"required",params:{missingProperty: "type"},message:"must have required property '"+"type"+"'"};if(vErrors === null){vErrors = [err29];}else {vErrors.push(err29);}errors++;}if(data.params === undefined){const err30 = {instancePath,schemaPath:"#/anyOf/1/required",keyword:"required",params:{missingProperty: "params"},message:"must have required property '"+"params"+"'"};if(vErrors === null){vErrors = [err30];}else {vErrors.push(err30);}errors++;}for(const key4 in data){if(!((((key4 === "type") || (key4 === "name")) || (key4 === "params")) || (key4 === "policies"))){const err31 = {instancePath,schemaPath:"#/anyOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key4},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err31];}else {vErrors.push(err31);}errors++;}}if(data.type !== undefined){if("set" !== data.type){const err32 = {instancePath:instancePath+"/type",schemaPath:"#/anyOf/1/properties/type/const",keyword:"const",params:{allowedValue: "set"},message:"must be equal to constant"};if(vErrors === null){vErrors = [err32];}else {vErrors.push(err32);}errors++;}}if(data.name !== undefined){if(typeof data.name !== "string"){const err33 = {instancePath:instancePath+"/name",schemaPath:"#/anyOf/1/properties/name/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err33];}else {vErrors.push(err33);}errors++;}}if(data.params !== undefined){let data16 = data.params;if(data16 && typeof data16 == "object" && !Array.isArray(data16)){if(data16.vars === undefined){const err34 = {instancePath:instancePath+"/params",schemaPath:"#/anyOf/1/properties/params/required",keyword:"required",params:{missingProperty: "vars"},message:"must have required property '"+"vars"+"'"};if(vErrors === null){vErrors = [err34];}else {vErrors.push(err34);}errors++;}for(const key5 in data16){if(!(key5 === "vars")){const err35 = {instancePath:instancePath+"/params",schemaPath:"#/anyOf/1/properties/params/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key5},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err35];}else {vErrors.push(err35);}errors++;}}if(data16.vars !== undefined){let data17 = data16.vars;if(data17 && typeof data17 == "object" && !Array.isArray(data17)){}else {const err36 = {instancePath:instancePath+"/params/vars",schemaPath:"#/anyOf/1/properties/params/properties/vars/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err36];}else {vErrors.push(err36);}errors++;}}}else {const err37 = {instancePath:instancePath+"/params",schemaPath:"#/anyOf/1/properties/params/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err37];}else {vErrors.push(err37);}errors++;}}if(data.policies !== undefined){let data18 = data.policies;if(data18 && typeof data18 == "object" && !Array.isArray(data18)){for(const key6 in data18){if(!((((key6 === "timeout_ms") || (key6 === "retry")) || (key6 === "dlq")) || (key6 === "budget_ms"))){const err38 = {instancePath:instancePath+"/policies",schemaPath:"https://mova.dev/schemas/policies.schema.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key6},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err38];}else {vErrors.push(err38);}errors++;}}if(data18.timeout_ms !== undefined){let data19 = data18.timeout_ms;if(!(((typeof data19 == "number") && (!(data19 % 1) && !isNaN(data19))) && (isFinite(data19)))){const err39 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/timeout_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err39];}else {vErrors.push(err39);}errors++;}if((typeof data19 == "number") && (isFinite(data19))){if(data19 < 0 || isNaN(data19)){const err40 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/timeout_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err40];}else {vErrors.push(err40);}errors++;}}}if(data18.retry !== undefined){let data20 = data18.retry;if(data20 && typeof data20 == "object" && !Array.isArray(data20)){for(const key7 in data20){if(!(((key7 === "max_attempts") || (key7 === "backoff_ms")) || (key7 === "strategy"))){const err41 = {instancePath:instancePath+"/policies/retry",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key7},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err41];}else {vErrors.push(err41);}errors++;}}if(data20.max_attempts !== undefined){let data21 = data20.max_attempts;if(!(((typeof data21 == "number") && (!(data21 % 1) && !isNaN(data21))) && (isFinite(data21)))){const err42 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/max_attempts/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err42];}else {vErrors.push(err42);}errors++;}if((typeof data21 == "number") && (isFinite(data21))){if(data21 < 0 || isNaN(data21)){const err43 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/max_attempts/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err43];}else {vErrors.push(err43);}errors++;}}}if(data20.backoff_ms !== undefined){let data22 = data20.backoff_ms;const _errs63 = errors;let valid14 = false;const _errs64 = errors;if(!(((typeof data22 == "number") && (!(data22 % 1) && !isNaN(data22))) && (isFinite(data22)))){const err44 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err44];}else {vErrors.push(err44);}errors++;}if((typeof data22 == "number") && (isFinite(data22))){if(data22 < 0 || isNaN(data22)){const err45 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err45];}else {vErrors.push(err45);}errors++;}}var _valid2 = _errs64 === errors;valid14 = valid14 || _valid2;const _errs66 = errors;if(Array.isArray(data22)){const len1 = data22.length;for(let i1=0; i1<len1; i1++){let data23 = data22[i1];if(!(((typeof data23 == "number") && (!(data23 % 1) && !isNaN(data23))) && (isFinite(data23)))){const err46 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i1,schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err46];}else {vErrors.push(err46);}errors++;}if((typeof data23 == "number") && (isFinite(data23))){if(data23 < 0 || isNaN(data23)){const err47 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i1,schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err47];}else {vErrors.push(err47);}errors++;}}}}else {const err48 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err48];}else {vErrors.push(err48);}errors++;}var _valid2 = _errs66 === errors;valid14 = valid14 || _valid2;if(!valid14){const err49 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/backoff_ms/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err49];}else {vErrors.push(err49);}errors++;}else {errors = _errs63;if(vErrors !== null){if(_errs63){vErrors.length = _errs63;}else {vErrors = null;}}}}if(data20.strategy !== undefined){let data24 = data20.strategy;if(typeof data24 !== "string"){const err50 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/strategy/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err50];}else {vErrors.push(err50);}errors++;}if(!((data24 === "fixed") || (data24 === "exp"))){const err51 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/properties/strategy/enum",keyword:"enum",params:{allowedValues: schema32.properties.retry.properties.strategy.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err51];}else {vErrors.push(err51);}errors++;}}}else {const err52 = {instancePath:instancePath+"/policies/retry",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/retry/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err52];}else {vErrors.push(err52);}errors++;}}if(data18.dlq !== undefined){let data25 = data18.dlq;if(data25 && typeof data25 == "object" && !Array.isArray(data25)){for(const key8 in data25){if(!((key8 === "enabled") || (key8 === "target"))){const err53 = {instancePath:instancePath+"/policies/dlq",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/dlq/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key8},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err53];}else {vErrors.push(err53);}errors++;}}if(data25.enabled !== undefined){if(typeof data25.enabled !== "boolean"){const err54 = {instancePath:instancePath+"/policies/dlq/enabled",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/dlq/properties/enabled/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"};if(vErrors === null){vErrors = [err54];}else {vErrors.push(err54);}errors++;}}if(data25.target !== undefined){if(typeof data25.target !== "string"){const err55 = {instancePath:instancePath+"/policies/dlq/target",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/dlq/properties/target/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err55];}else {vErrors.push(err55);}errors++;}}}else {const err56 = {instancePath:instancePath+"/policies/dlq",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/dlq/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err56];}else {vErrors.push(err56);}errors++;}}if(data18.budget_ms !== undefined){let data28 = data18.budget_ms;if(!(((typeof data28 == "number") && (!(data28 % 1) && !isNaN(data28))) && (isFinite(data28)))){const err57 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/budget_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err57];}else {vErrors.push(err57);}errors++;}if((typeof data28 == "number") && (isFinite(data28))){if(data28 < 0 || isNaN(data28)){const err58 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"https://mova.dev/schemas/policies.schema.json/properties/budget_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err58];}else {vErrors.push(err58);}errors++;}}}}else {const err59 = {instancePath:instancePath+"/policies",schemaPath:"https://mova.dev/schemas/policies.schema.json/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err59];}else {vErrors.push(err59);}errors++;}}}var _valid0 = _errs40 === errors;valid0 = valid0 || _valid0;if(_valid0){if(props0 !== true){props0 = true;}}if(!valid0){const err60 = {instancePath,schemaPath:"#/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err60];}else {vErrors.push(err60);}errors++;}else {errors = _errs1;if(vErrors !== null){if(_errs1){vErrors.length = _errs1;}else {vErrors = null;}}}validate25.errors = vErrors;evaluated0.props = props0;return errors === 0;}validate25.evaluated = {"dynamicProps":true,"dynamicItems":false};const schema41 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://mova.dev/schemas/actions/sleep.schema.json","title":"Action: sleep","type":"object","required":["type","ms"],"properties":{"type":{"const":"sleep"},"name":{"type":"string"},"ms":{"type":"integer","minimum":0},"policies":{"$ref":"../policies.schema.json"}},"additionalProperties":false};function validate27(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="https://mova.dev/schemas/actions/sleep.schema.json" */;let vErrors = null;let errors = 0;const evaluated0 = validate27.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}if(data && typeof data == "object" && !Array.isArray(data)){if(data.type === undefined){const err0 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "type"},message:"must have required property '"+"type"+"'"};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}if(data.ms === undefined){const err1 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "ms"},message:"must have required property '"+"ms"+"'"};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}for(const key0 in data){if(!((((key0 === "type") || (key0 === "name")) || (key0 === "ms")) || (key0 === "policies"))){const err2 = {instancePath,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key0},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}}if(data.type !== undefined){if("sleep" !== data.type){const err3 = {instancePath:instancePath+"/type",schemaPath:"#/properties/type/const",keyword:"const",params:{allowedValue: "sleep"},message:"must be equal to constant"};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}}if(data.name !== undefined){if(typeof data.name !== "string"){const err4 = {instancePath:instancePath+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}}if(data.ms !== undefined){let data2 = data.ms;if(!(((typeof data2 == "number") && (!(data2 % 1) && !isNaN(data2))) && (isFinite(data2)))){const err5 = {instancePath:instancePath+"/ms",schemaPath:"#/properties/ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}if((typeof data2 == "number") && (isFinite(data2))){if(data2 < 0 || isNaN(data2)){const err6 = {instancePath:instancePath+"/ms",schemaPath:"#/properties/ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}}}if(data.policies !== undefined){let data3 = data.policies;if(data3 && typeof data3 == "object" && !Array.isArray(data3)){for(const key1 in data3){if(!((((key1 === "timeout_ms") || (key1 === "retry")) || (key1 === "dlq")) || (key1 === "budget_ms"))){const err7 = {instancePath:instancePath+"/policies",schemaPath:"../policies.schema.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key1},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}}if(data3.timeout_ms !== undefined){let data4 = data3.timeout_ms;if(!(((typeof data4 == "number") && (!(data4 % 1) && !isNaN(data4))) && (isFinite(data4)))){const err8 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"../policies.schema.json/properties/timeout_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}if((typeof data4 == "number") && (isFinite(data4))){if(data4 < 0 || isNaN(data4)){const err9 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"../policies.schema.json/properties/timeout_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}}}if(data3.retry !== undefined){let data5 = data3.retry;if(data5 && typeof data5 == "object" && !Array.isArray(data5)){for(const key2 in data5){if(!(((key2 === "max_attempts") || (key2 === "backoff_ms")) || (key2 === "strategy"))){const err10 = {instancePath:instancePath+"/policies/retry",schemaPath:"../policies.schema.json/properties/retry/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key2},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}}if(data5.max_attempts !== undefined){let data6 = data5.max_attempts;if(!(((typeof data6 == "number") && (!(data6 % 1) && !isNaN(data6))) && (isFinite(data6)))){const err11 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"../policies.schema.json/properties/retry/properties/max_attempts/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}if((typeof data6 == "number") && (isFinite(data6))){if(data6 < 0 || isNaN(data6)){const err12 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"../policies.schema.json/properties/retry/properties/max_attempts/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}}}if(data5.backoff_ms !== undefined){let data7 = data5.backoff_ms;const _errs19 = errors;let valid4 = false;const _errs20 = errors;if(!(((typeof data7 == "number") && (!(data7 % 1) && !isNaN(data7))) && (isFinite(data7)))){const err13 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}if((typeof data7 == "number") && (isFinite(data7))){if(data7 < 0 || isNaN(data7)){const err14 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}}var _valid0 = _errs20 === errors;valid4 = valid4 || _valid0;const _errs22 = errors;if(Array.isArray(data7)){const len0 = data7.length;for(let i0=0; i0<len0; i0++){let data8 = data7[i0];if(!(((typeof data8 == "number") && (!(data8 % 1) && !isNaN(data8))) && (isFinite(data8)))){const err15 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}if((typeof data8 == "number") && (isFinite(data8))){if(data8 < 0 || isNaN(data8)){const err16 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err16];}else {vErrors.push(err16);}errors++;}}}}else {const err17 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err17];}else {vErrors.push(err17);}errors++;}var _valid0 = _errs22 === errors;valid4 = valid4 || _valid0;if(!valid4){const err18 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err18];}else {vErrors.push(err18);}errors++;}else {errors = _errs19;if(vErrors !== null){if(_errs19){vErrors.length = _errs19;}else {vErrors = null;}}}}if(data5.strategy !== undefined){let data9 = data5.strategy;if(typeof data9 !== "string"){const err19 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"../policies.schema.json/properties/retry/properties/strategy/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err19];}else {vErrors.push(err19);}errors++;}if(!((data9 === "fixed") || (data9 === "exp"))){const err20 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"../policies.schema.json/properties/retry/properties/strategy/enum",keyword:"enum",params:{allowedValues: schema32.properties.retry.properties.strategy.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err20];}else {vErrors.push(err20);}errors++;}}}else {const err21 = {instancePath:instancePath+"/policies/retry",schemaPath:"../policies.schema.json/properties/retry/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err21];}else {vErrors.push(err21);}errors++;}}if(data3.dlq !== undefined){let data10 = data3.dlq;if(data10 && typeof data10 == "object" && !Array.isArray(data10)){for(const key3 in data10){if(!((key3 === "enabled") || (key3 === "target"))){const err22 = {instancePath:instancePath+"/policies/dlq",schemaPath:"../policies.schema.json/properties/dlq/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key3},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err22];}else {vErrors.push(err22);}errors++;}}if(data10.enabled !== undefined){if(typeof data10.enabled !== "boolean"){const err23 = {instancePath:instancePath+"/policies/dlq/enabled",schemaPath:"../policies.schema.json/properties/dlq/properties/enabled/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"};if(vErrors === null){vErrors = [err23];}else {vErrors.push(err23);}errors++;}}if(data10.target !== undefined){if(typeof data10.target !== "string"){const err24 = {instancePath:instancePath+"/policies/dlq/target",schemaPath:"../policies.schema.json/properties/dlq/properties/target/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err24];}else {vErrors.push(err24);}errors++;}}}else {const err25 = {instancePath:instancePath+"/policies/dlq",schemaPath:"../policies.schema.json/properties/dlq/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err25];}else {vErrors.push(err25);}errors++;}}if(data3.budget_ms !== undefined){let data13 = data3.budget_ms;if(!(((typeof data13 == "number") && (!(data13 % 1) && !isNaN(data13))) && (isFinite(data13)))){const err26 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"../policies.schema.json/properties/budget_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err26];}else {vErrors.push(err26);}errors++;}if((typeof data13 == "number") && (isFinite(data13))){if(data13 < 0 || isNaN(data13)){const err27 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"../policies.schema.json/properties/budget_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err27];}else {vErrors.push(err27);}errors++;}}}}else {const err28 = {instancePath:instancePath+"/policies",schemaPath:"../policies.schema.json/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err28];}else {vErrors.push(err28);}errors++;}}}else {const err29 = {instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err29];}else {vErrors.push(err29);}errors++;}validate27.errors = vErrors;return errors === 0;}validate27.evaluated = {"props":true,"dynamicProps":false,"dynamicItems":false};const schema43 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://mova.dev/schemas/actions/transform.schema.json","title":"Action: transform","type":"object","required":["type","save_as"],"properties":{"type":{"const":"transform"},"name":{"type":"string"},"from":{"type":"string","description":"ctx path, e.g. users_resp.json"},"pick":{"type":"string","description":"subpath inside 'from', e.g. 0.name"},"template":{"type":"string","description":"optional string with {{path}} interpolation"},"save_as":{"type":"string"},"policies":{"$ref":"../policies.schema.json"}},"anyOf":[{"properties":{"template":{"type":"string","description":"optional string with {{path}} interpolation"}},"required":["template"]},{"properties":{"from":{"type":"string","description":"ctx path, e.g. users_resp.json"}},"required":["from"]}],"additionalProperties":false};function validate29(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="https://mova.dev/schemas/actions/transform.schema.json" */;let vErrors = null;let errors = 0;const evaluated0 = validate29.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}const _errs1 = errors;let valid0 = false;const _errs2 = errors;if(data && typeof data == "object" && !Array.isArray(data)){if(data.template === undefined){const err0 = {instancePath,schemaPath:"#/anyOf/0/required",keyword:"required",params:{missingProperty: "template"},message:"must have required property '"+"template"+"'"};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}if(data.template !== undefined){if(typeof data.template !== "string"){const err1 = {instancePath:instancePath+"/template",schemaPath:"#/anyOf/0/properties/template/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}}}var _valid0 = _errs2 === errors;valid0 = valid0 || _valid0;if(_valid0){var props0 = {};props0.template = true;}const _errs5 = errors;if(data && typeof data == "object" && !Array.isArray(data)){if(data.from === undefined){const err2 = {instancePath,schemaPath:"#/anyOf/1/required",keyword:"required",params:{missingProperty: "from"},message:"must have required property '"+"from"+"'"};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}if(data.from !== undefined){if(typeof data.from !== "string"){const err3 = {instancePath:instancePath+"/from",schemaPath:"#/anyOf/1/properties/from/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}}}var _valid0 = _errs5 === errors;valid0 = valid0 || _valid0;if(_valid0){if(props0 !== true){props0 = props0 || {};props0.from = true;}}if(!valid0){const err4 = {instancePath,schemaPath:"#/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}else {errors = _errs1;if(vErrors !== null){if(_errs1){vErrors.length = _errs1;}else {vErrors = null;}}}if(data && typeof data == "object" && !Array.isArray(data)){if(data.type === undefined){const err5 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "type"},message:"must have required property '"+"type"+"'"};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}if(data.save_as === undefined){const err6 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "save_as"},message:"must have required property '"+"save_as"+"'"};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}for(const key0 in data){if(!(((((((key0 === "type") || (key0 === "name")) || (key0 === "from")) || (key0 === "pick")) || (key0 === "template")) || (key0 === "save_as")) || (key0 === "policies"))){const err7 = {instancePath,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key0},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}}if(data.type !== undefined){if("transform" !== data.type){const err8 = {instancePath:instancePath+"/type",schemaPath:"#/properties/type/const",keyword:"const",params:{allowedValue: "transform"},message:"must be equal to constant"};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}}if(data.name !== undefined){if(typeof data.name !== "string"){const err9 = {instancePath:instancePath+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}}if(data.from !== undefined){if(typeof data.from !== "string"){const err10 = {instancePath:instancePath+"/from",schemaPath:"#/properties/from/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}}if(data.pick !== undefined){if(typeof data.pick !== "string"){const err11 = {instancePath:instancePath+"/pick",schemaPath:"#/properties/pick/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}}if(data.template !== undefined){if(typeof data.template !== "string"){const err12 = {instancePath:instancePath+"/template",schemaPath:"#/properties/template/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}}if(data.save_as !== undefined){if(typeof data.save_as !== "string"){const err13 = {instancePath:instancePath+"/save_as",schemaPath:"#/properties/save_as/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}}if(data.policies !== undefined){let data8 = data.policies;if(data8 && typeof data8 == "object" && !Array.isArray(data8)){for(const key1 in data8){if(!((((key1 === "timeout_ms") || (key1 === "retry")) || (key1 === "dlq")) || (key1 === "budget_ms"))){const err14 = {instancePath:instancePath+"/policies",schemaPath:"../policies.schema.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key1},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}}if(data8.timeout_ms !== undefined){let data9 = data8.timeout_ms;if(!(((typeof data9 == "number") && (!(data9 % 1) && !isNaN(data9))) && (isFinite(data9)))){const err15 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"../policies.schema.json/properties/timeout_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}if((typeof data9 == "number") && (isFinite(data9))){if(data9 < 0 || isNaN(data9)){const err16 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"../policies.schema.json/properties/timeout_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err16];}else {vErrors.push(err16);}errors++;}}}if(data8.retry !== undefined){let data10 = data8.retry;if(data10 && typeof data10 == "object" && !Array.isArray(data10)){for(const key2 in data10){if(!(((key2 === "max_attempts") || (key2 === "backoff_ms")) || (key2 === "strategy"))){const err17 = {instancePath:instancePath+"/policies/retry",schemaPath:"../policies.schema.json/properties/retry/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key2},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err17];}else {vErrors.push(err17);}errors++;}}if(data10.max_attempts !== undefined){let data11 = data10.max_attempts;if(!(((typeof data11 == "number") && (!(data11 % 1) && !isNaN(data11))) && (isFinite(data11)))){const err18 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"../policies.schema.json/properties/retry/properties/max_attempts/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err18];}else {vErrors.push(err18);}errors++;}if((typeof data11 == "number") && (isFinite(data11))){if(data11 < 0 || isNaN(data11)){const err19 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"../policies.schema.json/properties/retry/properties/max_attempts/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err19];}else {vErrors.push(err19);}errors++;}}}if(data10.backoff_ms !== undefined){let data12 = data10.backoff_ms;const _errs32 = errors;let valid7 = false;const _errs33 = errors;if(!(((typeof data12 == "number") && (!(data12 % 1) && !isNaN(data12))) && (isFinite(data12)))){const err20 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err20];}else {vErrors.push(err20);}errors++;}if((typeof data12 == "number") && (isFinite(data12))){if(data12 < 0 || isNaN(data12)){const err21 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err21];}else {vErrors.push(err21);}errors++;}}var _valid1 = _errs33 === errors;valid7 = valid7 || _valid1;const _errs35 = errors;if(Array.isArray(data12)){const len0 = data12.length;for(let i0=0; i0<len0; i0++){let data13 = data12[i0];if(!(((typeof data13 == "number") && (!(data13 % 1) && !isNaN(data13))) && (isFinite(data13)))){const err22 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err22];}else {vErrors.push(err22);}errors++;}if((typeof data13 == "number") && (isFinite(data13))){if(data13 < 0 || isNaN(data13)){const err23 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err23];}else {vErrors.push(err23);}errors++;}}}}else {const err24 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err24];}else {vErrors.push(err24);}errors++;}var _valid1 = _errs35 === errors;valid7 = valid7 || _valid1;if(!valid7){const err25 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err25];}else {vErrors.push(err25);}errors++;}else {errors = _errs32;if(vErrors !== null){if(_errs32){vErrors.length = _errs32;}else {vErrors = null;}}}}if(data10.strategy !== undefined){let data14 = data10.strategy;if(typeof data14 !== "string"){const err26 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"../policies.schema.json/properties/retry/properties/strategy/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err26];}else {vErrors.push(err26);}errors++;}if(!((data14 === "fixed") || (data14 === "exp"))){const err27 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"../policies.schema.json/properties/retry/properties/strategy/enum",keyword:"enum",params:{allowedValues: schema32.properties.retry.properties.strategy.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err27];}else {vErrors.push(err27);}errors++;}}}else {const err28 = {instancePath:instancePath+"/policies/retry",schemaPath:"../policies.schema.json/properties/retry/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err28];}else {vErrors.push(err28);}errors++;}}if(data8.dlq !== undefined){let data15 = data8.dlq;if(data15 && typeof data15 == "object" && !Array.isArray(data15)){for(const key3 in data15){if(!((key3 === "enabled") || (key3 === "target"))){const err29 = {instancePath:instancePath+"/policies/dlq",schemaPath:"../policies.schema.json/properties/dlq/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key3},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err29];}else {vErrors.push(err29);}errors++;}}if(data15.enabled !== undefined){if(typeof data15.enabled !== "boolean"){const err30 = {instancePath:instancePath+"/policies/dlq/enabled",schemaPath:"../policies.schema.json/properties/dlq/properties/enabled/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"};if(vErrors === null){vErrors = [err30];}else {vErrors.push(err30);}errors++;}}if(data15.target !== undefined){if(typeof data15.target !== "string"){const err31 = {instancePath:instancePath+"/policies/dlq/target",schemaPath:"../policies.schema.json/properties/dlq/properties/target/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err31];}else {vErrors.push(err31);}errors++;}}}else {const err32 = {instancePath:instancePath+"/policies/dlq",schemaPath:"../policies.schema.json/properties/dlq/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err32];}else {vErrors.push(err32);}errors++;}}if(data8.budget_ms !== undefined){let data18 = data8.budget_ms;if(!(((typeof data18 == "number") && (!(data18 % 1) && !isNaN(data18))) && (isFinite(data18)))){const err33 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"../policies.schema.json/properties/budget_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err33];}else {vErrors.push(err33);}errors++;}if((typeof data18 == "number") && (isFinite(data18))){if(data18 < 0 || isNaN(data18)){const err34 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"../policies.schema.json/properties/budget_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err34];}else {vErrors.push(err34);}errors++;}}}}else {const err35 = {instancePath:instancePath+"/policies",schemaPath:"../policies.schema.json/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err35];}else {vErrors.push(err35);}errors++;}}}else {const err36 = {instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err36];}else {vErrors.push(err36);}errors++;}validate29.errors = vErrors;return errors === 0;}validate29.evaluated = {"props":true,"dynamicProps":false,"dynamicItems":false};const schema45 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://mova.dev/schemas/actions/parse_json.schema.json","title":"Action: parse_json","type":"object","required":["type"],"properties":{"type":{"const":"parse_json"},"name":{"type":"string"},"from":{"type":"string","description":"ctx path to string source (e.g. resp.text)"},"text":{"type":["string","object","array"]},"save_as":{"type":"string"},"policies":{"$ref":"../policies.schema.json"}},"oneOf":[{"properties":{"from":{"type":"string","description":"ctx path to string source (e.g. resp.text)"}},"required":["from"]},{"properties":{"text":{"type":["string","object","array"]}},"required":["text"]}],"additionalProperties":false};function validate31(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="https://mova.dev/schemas/actions/parse_json.schema.json" */;let vErrors = null;let errors = 0;const evaluated0 = validate31.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}const _errs1 = errors;let valid0 = false;let passing0 = null;const _errs2 = errors;if(data && typeof data == "object" && !Array.isArray(data)){if(data.from === undefined){const err0 = {instancePath,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty: "from"},message:"must have required property '"+"from"+"'"};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}if(data.from !== undefined){if(typeof data.from !== "string"){const err1 = {instancePath:instancePath+"/from",schemaPath:"#/oneOf/0/properties/from/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}}}var _valid0 = _errs2 === errors;if(_valid0){valid0 = true;passing0 = 0;var props0 = {};props0.from = true;}const _errs5 = errors;if(data && typeof data == "object" && !Array.isArray(data)){if(data.text === undefined){const err2 = {instancePath,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty: "text"},message:"must have required property '"+"text"+"'"};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}if(data.text !== undefined){let data1 = data.text;if((!data1 || typeof data1 != "object") && (typeof data1 !== "string")){const err3 = {instancePath:instancePath+"/text",schemaPath:"#/oneOf/1/properties/text/type",keyword:"type",params:{type: schema45.oneOf[1].properties.text.type},message:"must be string,object,array"};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}}}var _valid0 = _errs5 === errors;if(_valid0 && valid0){valid0 = false;passing0 = [passing0, 1];}else {if(_valid0){valid0 = true;passing0 = 1;if(props0 !== true){props0 = props0 || {};props0.text = true;}}}if(!valid0){const err4 = {instancePath,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas: passing0},message:"must match exactly one schema in oneOf"};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}else {errors = _errs1;if(vErrors !== null){if(_errs1){vErrors.length = _errs1;}else {vErrors = null;}}}if(data && typeof data == "object" && !Array.isArray(data)){if(data.type === undefined){const err5 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "type"},message:"must have required property '"+"type"+"'"};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}for(const key0 in data){if(!((((((key0 === "type") || (key0 === "name")) || (key0 === "from")) || (key0 === "text")) || (key0 === "save_as")) || (key0 === "policies"))){const err6 = {instancePath,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key0},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}}if(data.type !== undefined){if("parse_json" !== data.type){const err7 = {instancePath:instancePath+"/type",schemaPath:"#/properties/type/const",keyword:"const",params:{allowedValue: "parse_json"},message:"must be equal to constant"};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}}if(data.name !== undefined){if(typeof data.name !== "string"){const err8 = {instancePath:instancePath+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}}if(data.from !== undefined){if(typeof data.from !== "string"){const err9 = {instancePath:instancePath+"/from",schemaPath:"#/properties/from/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}}if(data.text !== undefined){let data5 = data.text;if((!data5 || typeof data5 != "object") && (typeof data5 !== "string")){const err10 = {instancePath:instancePath+"/text",schemaPath:"#/properties/text/type",keyword:"type",params:{type: schema45.properties.text.type},message:"must be string,object,array"};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}}if(data.save_as !== undefined){if(typeof data.save_as !== "string"){const err11 = {instancePath:instancePath+"/save_as",schemaPath:"#/properties/save_as/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}}if(data.policies !== undefined){let data7 = data.policies;if(data7 && typeof data7 == "object" && !Array.isArray(data7)){for(const key1 in data7){if(!((((key1 === "timeout_ms") || (key1 === "retry")) || (key1 === "dlq")) || (key1 === "budget_ms"))){const err12 = {instancePath:instancePath+"/policies",schemaPath:"../policies.schema.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key1},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}}if(data7.timeout_ms !== undefined){let data8 = data7.timeout_ms;if(!(((typeof data8 == "number") && (!(data8 % 1) && !isNaN(data8))) && (isFinite(data8)))){const err13 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"../policies.schema.json/properties/timeout_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}if((typeof data8 == "number") && (isFinite(data8))){if(data8 < 0 || isNaN(data8)){const err14 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"../policies.schema.json/properties/timeout_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}}}if(data7.retry !== undefined){let data9 = data7.retry;if(data9 && typeof data9 == "object" && !Array.isArray(data9)){for(const key2 in data9){if(!(((key2 === "max_attempts") || (key2 === "backoff_ms")) || (key2 === "strategy"))){const err15 = {instancePath:instancePath+"/policies/retry",schemaPath:"../policies.schema.json/properties/retry/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key2},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}}if(data9.max_attempts !== undefined){let data10 = data9.max_attempts;if(!(((typeof data10 == "number") && (!(data10 % 1) && !isNaN(data10))) && (isFinite(data10)))){const err16 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"../policies.schema.json/properties/retry/properties/max_attempts/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err16];}else {vErrors.push(err16);}errors++;}if((typeof data10 == "number") && (isFinite(data10))){if(data10 < 0 || isNaN(data10)){const err17 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"../policies.schema.json/properties/retry/properties/max_attempts/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err17];}else {vErrors.push(err17);}errors++;}}}if(data9.backoff_ms !== undefined){let data11 = data9.backoff_ms;const _errs30 = errors;let valid7 = false;const _errs31 = errors;if(!(((typeof data11 == "number") && (!(data11 % 1) && !isNaN(data11))) && (isFinite(data11)))){const err18 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err18];}else {vErrors.push(err18);}errors++;}if((typeof data11 == "number") && (isFinite(data11))){if(data11 < 0 || isNaN(data11)){const err19 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err19];}else {vErrors.push(err19);}errors++;}}var _valid1 = _errs31 === errors;valid7 = valid7 || _valid1;const _errs33 = errors;if(Array.isArray(data11)){const len0 = data11.length;for(let i0=0; i0<len0; i0++){let data12 = data11[i0];if(!(((typeof data12 == "number") && (!(data12 % 1) && !isNaN(data12))) && (isFinite(data12)))){const err20 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err20];}else {vErrors.push(err20);}errors++;}if((typeof data12 == "number") && (isFinite(data12))){if(data12 < 0 || isNaN(data12)){const err21 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err21];}else {vErrors.push(err21);}errors++;}}}}else {const err22 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err22];}else {vErrors.push(err22);}errors++;}var _valid1 = _errs33 === errors;valid7 = valid7 || _valid1;if(!valid7){const err23 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err23];}else {vErrors.push(err23);}errors++;}else {errors = _errs30;if(vErrors !== null){if(_errs30){vErrors.length = _errs30;}else {vErrors = null;}}}}if(data9.strategy !== undefined){let data13 = data9.strategy;if(typeof data13 !== "string"){const err24 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"../policies.schema.json/properties/retry/properties/strategy/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err24];}else {vErrors.push(err24);}errors++;}if(!((data13 === "fixed") || (data13 === "exp"))){const err25 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"../policies.schema.json/properties/retry/properties/strategy/enum",keyword:"enum",params:{allowedValues: schema32.properties.retry.properties.strategy.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err25];}else {vErrors.push(err25);}errors++;}}}else {const err26 = {instancePath:instancePath+"/policies/retry",schemaPath:"../policies.schema.json/properties/retry/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err26];}else {vErrors.push(err26);}errors++;}}if(data7.dlq !== undefined){let data14 = data7.dlq;if(data14 && typeof data14 == "object" && !Array.isArray(data14)){for(const key3 in data14){if(!((key3 === "enabled") || (key3 === "target"))){const err27 = {instancePath:instancePath+"/policies/dlq",schemaPath:"../policies.schema.json/properties/dlq/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key3},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err27];}else {vErrors.push(err27);}errors++;}}if(data14.enabled !== undefined){if(typeof data14.enabled !== "boolean"){const err28 = {instancePath:instancePath+"/policies/dlq/enabled",schemaPath:"../policies.schema.json/properties/dlq/properties/enabled/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"};if(vErrors === null){vErrors = [err28];}else {vErrors.push(err28);}errors++;}}if(data14.target !== undefined){if(typeof data14.target !== "string"){const err29 = {instancePath:instancePath+"/policies/dlq/target",schemaPath:"../policies.schema.json/properties/dlq/properties/target/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err29];}else {vErrors.push(err29);}errors++;}}}else {const err30 = {instancePath:instancePath+"/policies/dlq",schemaPath:"../policies.schema.json/properties/dlq/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err30];}else {vErrors.push(err30);}errors++;}}if(data7.budget_ms !== undefined){let data17 = data7.budget_ms;if(!(((typeof data17 == "number") && (!(data17 % 1) && !isNaN(data17))) && (isFinite(data17)))){const err31 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"../policies.schema.json/properties/budget_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err31];}else {vErrors.push(err31);}errors++;}if((typeof data17 == "number") && (isFinite(data17))){if(data17 < 0 || isNaN(data17)){const err32 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"../policies.schema.json/properties/budget_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err32];}else {vErrors.push(err32);}errors++;}}}}else {const err33 = {instancePath:instancePath+"/policies",schemaPath:"../policies.schema.json/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err33];}else {vErrors.push(err33);}errors++;}}}else {const err34 = {instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err34];}else {vErrors.push(err34);}errors++;}validate31.errors = vErrors;return errors === 0;}validate31.evaluated = {"props":true,"dynamicProps":false,"dynamicItems":false};const schema47 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://mova.dev/schemas/actions/log.schema.json","title":"Action: log","type":"object","required":["type","message"],"properties":{"type":{"const":"log"},"name":{"type":"string"},"level":{"type":"string","enum":["debug","info","warn","error"]},"message":{"oneOf":[{"type":"string"},{"type":"object"},{"type":"array"}]},"save_as":{"type":"string"},"policies":{"$ref":"../policies.schema.json"}},"additionalProperties":false};function validate33(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="https://mova.dev/schemas/actions/log.schema.json" */;let vErrors = null;let errors = 0;const evaluated0 = validate33.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}if(data && typeof data == "object" && !Array.isArray(data)){if(data.type === undefined){const err0 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "type"},message:"must have required property '"+"type"+"'"};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}if(data.message === undefined){const err1 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "message"},message:"must have required property '"+"message"+"'"};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}for(const key0 in data){if(!((((((key0 === "type") || (key0 === "name")) || (key0 === "level")) || (key0 === "message")) || (key0 === "save_as")) || (key0 === "policies"))){const err2 = {instancePath,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key0},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}}if(data.type !== undefined){if("log" !== data.type){const err3 = {instancePath:instancePath+"/type",schemaPath:"#/properties/type/const",keyword:"const",params:{allowedValue: "log"},message:"must be equal to constant"};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}}if(data.name !== undefined){if(typeof data.name !== "string"){const err4 = {instancePath:instancePath+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}}if(data.level !== undefined){let data2 = data.level;if(typeof data2 !== "string"){const err5 = {instancePath:instancePath+"/level",schemaPath:"#/properties/level/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}if(!((((data2 === "debug") || (data2 === "info")) || (data2 === "warn")) || (data2 === "error"))){const err6 = {instancePath:instancePath+"/level",schemaPath:"#/properties/level/enum",keyword:"enum",params:{allowedValues: schema47.properties.level.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}}if(data.message !== undefined){let data3 = data.message;const _errs8 = errors;let valid1 = false;let passing0 = null;const _errs9 = errors;if(typeof data3 !== "string"){const err7 = {instancePath:instancePath+"/message",schemaPath:"#/properties/message/oneOf/0/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}var _valid0 = _errs9 === errors;if(_valid0){valid1 = true;passing0 = 0;}const _errs11 = errors;if(!(data3 && typeof data3 == "object" && !Array.isArray(data3))){const err8 = {instancePath:instancePath+"/message",schemaPath:"#/properties/message/oneOf/1/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}var _valid0 = _errs11 === errors;if(_valid0 && valid1){valid1 = false;passing0 = [passing0, 1];}else {if(_valid0){valid1 = true;passing0 = 1;}const _errs13 = errors;if(!(Array.isArray(data3))){const err9 = {instancePath:instancePath+"/message",schemaPath:"#/properties/message/oneOf/2/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}var _valid0 = _errs13 === errors;if(_valid0 && valid1){valid1 = false;passing0 = [passing0, 2];}else {if(_valid0){valid1 = true;passing0 = 2;}}}if(!valid1){const err10 = {instancePath:instancePath+"/message",schemaPath:"#/properties/message/oneOf",keyword:"oneOf",params:{passingSchemas: passing0},message:"must match exactly one schema in oneOf"};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}else {errors = _errs8;if(vErrors !== null){if(_errs8){vErrors.length = _errs8;}else {vErrors = null;}}}}if(data.save_as !== undefined){if(typeof data.save_as !== "string"){const err11 = {instancePath:instancePath+"/save_as",schemaPath:"#/properties/save_as/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}}if(data.policies !== undefined){let data5 = data.policies;if(data5 && typeof data5 == "object" && !Array.isArray(data5)){for(const key1 in data5){if(!((((key1 === "timeout_ms") || (key1 === "retry")) || (key1 === "dlq")) || (key1 === "budget_ms"))){const err12 = {instancePath:instancePath+"/policies",schemaPath:"../policies.schema.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key1},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}}if(data5.timeout_ms !== undefined){let data6 = data5.timeout_ms;if(!(((typeof data6 == "number") && (!(data6 % 1) && !isNaN(data6))) && (isFinite(data6)))){const err13 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"../policies.schema.json/properties/timeout_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}if((typeof data6 == "number") && (isFinite(data6))){if(data6 < 0 || isNaN(data6)){const err14 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"../policies.schema.json/properties/timeout_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}}}if(data5.retry !== undefined){let data7 = data5.retry;if(data7 && typeof data7 == "object" && !Array.isArray(data7)){for(const key2 in data7){if(!(((key2 === "max_attempts") || (key2 === "backoff_ms")) || (key2 === "strategy"))){const err15 = {instancePath:instancePath+"/policies/retry",schemaPath:"../policies.schema.json/properties/retry/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key2},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}}if(data7.max_attempts !== undefined){let data8 = data7.max_attempts;if(!(((typeof data8 == "number") && (!(data8 % 1) && !isNaN(data8))) && (isFinite(data8)))){const err16 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"../policies.schema.json/properties/retry/properties/max_attempts/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err16];}else {vErrors.push(err16);}errors++;}if((typeof data8 == "number") && (isFinite(data8))){if(data8 < 0 || isNaN(data8)){const err17 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"../policies.schema.json/properties/retry/properties/max_attempts/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err17];}else {vErrors.push(err17);}errors++;}}}if(data7.backoff_ms !== undefined){let data9 = data7.backoff_ms;const _errs29 = errors;let valid5 = false;const _errs30 = errors;if(!(((typeof data9 == "number") && (!(data9 % 1) && !isNaN(data9))) && (isFinite(data9)))){const err18 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err18];}else {vErrors.push(err18);}errors++;}if((typeof data9 == "number") && (isFinite(data9))){if(data9 < 0 || isNaN(data9)){const err19 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err19];}else {vErrors.push(err19);}errors++;}}var _valid1 = _errs30 === errors;valid5 = valid5 || _valid1;const _errs32 = errors;if(Array.isArray(data9)){const len0 = data9.length;for(let i0=0; i0<len0; i0++){let data10 = data9[i0];if(!(((typeof data10 == "number") && (!(data10 % 1) && !isNaN(data10))) && (isFinite(data10)))){const err20 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err20];}else {vErrors.push(err20);}errors++;}if((typeof data10 == "number") && (isFinite(data10))){if(data10 < 0 || isNaN(data10)){const err21 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err21];}else {vErrors.push(err21);}errors++;}}}}else {const err22 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err22];}else {vErrors.push(err22);}errors++;}var _valid1 = _errs32 === errors;valid5 = valid5 || _valid1;if(!valid5){const err23 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err23];}else {vErrors.push(err23);}errors++;}else {errors = _errs29;if(vErrors !== null){if(_errs29){vErrors.length = _errs29;}else {vErrors = null;}}}}if(data7.strategy !== undefined){let data11 = data7.strategy;if(typeof data11 !== "string"){const err24 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"../policies.schema.json/properties/retry/properties/strategy/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err24];}else {vErrors.push(err24);}errors++;}if(!((data11 === "fixed") || (data11 === "exp"))){const err25 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"../policies.schema.json/properties/retry/properties/strategy/enum",keyword:"enum",params:{allowedValues: schema32.properties.retry.properties.strategy.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err25];}else {vErrors.push(err25);}errors++;}}}else {const err26 = {instancePath:instancePath+"/policies/retry",schemaPath:"../policies.schema.json/properties/retry/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err26];}else {vErrors.push(err26);}errors++;}}if(data5.dlq !== undefined){let data12 = data5.dlq;if(data12 && typeof data12 == "object" && !Array.isArray(data12)){for(const key3 in data12){if(!((key3 === "enabled") || (key3 === "target"))){const err27 = {instancePath:instancePath+"/policies/dlq",schemaPath:"../policies.schema.json/properties/dlq/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key3},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err27];}else {vErrors.push(err27);}errors++;}}if(data12.enabled !== undefined){if(typeof data12.enabled !== "boolean"){const err28 = {instancePath:instancePath+"/policies/dlq/enabled",schemaPath:"../policies.schema.json/properties/dlq/properties/enabled/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"};if(vErrors === null){vErrors = [err28];}else {vErrors.push(err28);}errors++;}}if(data12.target !== undefined){if(typeof data12.target !== "string"){const err29 = {instancePath:instancePath+"/policies/dlq/target",schemaPath:"../policies.schema.json/properties/dlq/properties/target/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err29];}else {vErrors.push(err29);}errors++;}}}else {const err30 = {instancePath:instancePath+"/policies/dlq",schemaPath:"../policies.schema.json/properties/dlq/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err30];}else {vErrors.push(err30);}errors++;}}if(data5.budget_ms !== undefined){let data15 = data5.budget_ms;if(!(((typeof data15 == "number") && (!(data15 % 1) && !isNaN(data15))) && (isFinite(data15)))){const err31 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"../policies.schema.json/properties/budget_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err31];}else {vErrors.push(err31);}errors++;}if((typeof data15 == "number") && (isFinite(data15))){if(data15 < 0 || isNaN(data15)){const err32 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"../policies.schema.json/properties/budget_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err32];}else {vErrors.push(err32);}errors++;}}}}else {const err33 = {instancePath:instancePath+"/policies",schemaPath:"../policies.schema.json/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err33];}else {vErrors.push(err33);}errors++;}}}else {const err34 = {instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err34];}else {vErrors.push(err34);}errors++;}validate33.errors = vErrors;return errors === 0;}validate33.evaluated = {"props":true,"dynamicProps":false,"dynamicItems":false};const schema49 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://mova.dev/schemas/actions/assert.schema.json","title":"Action: assert","type":"object","required":["type","expr"],"properties":{"type":{"const":"assert"},"name":{"type":"string"},"expr":{"type":"string"},"message":{"type":"string"},"save_as":{"type":"string"},"policies":{"$ref":"../policies.schema.json"}},"additionalProperties":false};function validate35(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="https://mova.dev/schemas/actions/assert.schema.json" */;let vErrors = null;let errors = 0;const evaluated0 = validate35.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}if(data && typeof data == "object" && !Array.isArray(data)){if(data.type === undefined){const err0 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "type"},message:"must have required property '"+"type"+"'"};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}if(data.expr === undefined){const err1 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "expr"},message:"must have required property '"+"expr"+"'"};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}for(const key0 in data){if(!((((((key0 === "type") || (key0 === "name")) || (key0 === "expr")) || (key0 === "message")) || (key0 === "save_as")) || (key0 === "policies"))){const err2 = {instancePath,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key0},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}}if(data.type !== undefined){if("assert" !== data.type){const err3 = {instancePath:instancePath+"/type",schemaPath:"#/properties/type/const",keyword:"const",params:{allowedValue: "assert"},message:"must be equal to constant"};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}}if(data.name !== undefined){if(typeof data.name !== "string"){const err4 = {instancePath:instancePath+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}}if(data.expr !== undefined){if(typeof data.expr !== "string"){const err5 = {instancePath:instancePath+"/expr",schemaPath:"#/properties/expr/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}}if(data.message !== undefined){if(typeof data.message !== "string"){const err6 = {instancePath:instancePath+"/message",schemaPath:"#/properties/message/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}}if(data.save_as !== undefined){if(typeof data.save_as !== "string"){const err7 = {instancePath:instancePath+"/save_as",schemaPath:"#/properties/save_as/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}}if(data.policies !== undefined){let data5 = data.policies;if(data5 && typeof data5 == "object" && !Array.isArray(data5)){for(const key1 in data5){if(!((((key1 === "timeout_ms") || (key1 === "retry")) || (key1 === "dlq")) || (key1 === "budget_ms"))){const err8 = {instancePath:instancePath+"/policies",schemaPath:"../policies.schema.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key1},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}}if(data5.timeout_ms !== undefined){let data6 = data5.timeout_ms;if(!(((typeof data6 == "number") && (!(data6 % 1) && !isNaN(data6))) && (isFinite(data6)))){const err9 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"../policies.schema.json/properties/timeout_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}if((typeof data6 == "number") && (isFinite(data6))){if(data6 < 0 || isNaN(data6)){const err10 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"../policies.schema.json/properties/timeout_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}}}if(data5.retry !== undefined){let data7 = data5.retry;if(data7 && typeof data7 == "object" && !Array.isArray(data7)){for(const key2 in data7){if(!(((key2 === "max_attempts") || (key2 === "backoff_ms")) || (key2 === "strategy"))){const err11 = {instancePath:instancePath+"/policies/retry",schemaPath:"../policies.schema.json/properties/retry/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key2},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}}if(data7.max_attempts !== undefined){let data8 = data7.max_attempts;if(!(((typeof data8 == "number") && (!(data8 % 1) && !isNaN(data8))) && (isFinite(data8)))){const err12 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"../policies.schema.json/properties/retry/properties/max_attempts/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}if((typeof data8 == "number") && (isFinite(data8))){if(data8 < 0 || isNaN(data8)){const err13 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"../policies.schema.json/properties/retry/properties/max_attempts/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}}}if(data7.backoff_ms !== undefined){let data9 = data7.backoff_ms;const _errs23 = errors;let valid4 = false;const _errs24 = errors;if(!(((typeof data9 == "number") && (!(data9 % 1) && !isNaN(data9))) && (isFinite(data9)))){const err14 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}if((typeof data9 == "number") && (isFinite(data9))){if(data9 < 0 || isNaN(data9)){const err15 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}}var _valid0 = _errs24 === errors;valid4 = valid4 || _valid0;const _errs26 = errors;if(Array.isArray(data9)){const len0 = data9.length;for(let i0=0; i0<len0; i0++){let data10 = data9[i0];if(!(((typeof data10 == "number") && (!(data10 % 1) && !isNaN(data10))) && (isFinite(data10)))){const err16 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err16];}else {vErrors.push(err16);}errors++;}if((typeof data10 == "number") && (isFinite(data10))){if(data10 < 0 || isNaN(data10)){const err17 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err17];}else {vErrors.push(err17);}errors++;}}}}else {const err18 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err18];}else {vErrors.push(err18);}errors++;}var _valid0 = _errs26 === errors;valid4 = valid4 || _valid0;if(!valid4){const err19 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err19];}else {vErrors.push(err19);}errors++;}else {errors = _errs23;if(vErrors !== null){if(_errs23){vErrors.length = _errs23;}else {vErrors = null;}}}}if(data7.strategy !== undefined){let data11 = data7.strategy;if(typeof data11 !== "string"){const err20 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"../policies.schema.json/properties/retry/properties/strategy/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err20];}else {vErrors.push(err20);}errors++;}if(!((data11 === "fixed") || (data11 === "exp"))){const err21 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"../policies.schema.json/properties/retry/properties/strategy/enum",keyword:"enum",params:{allowedValues: schema32.properties.retry.properties.strategy.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err21];}else {vErrors.push(err21);}errors++;}}}else {const err22 = {instancePath:instancePath+"/policies/retry",schemaPath:"../policies.schema.json/properties/retry/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err22];}else {vErrors.push(err22);}errors++;}}if(data5.dlq !== undefined){let data12 = data5.dlq;if(data12 && typeof data12 == "object" && !Array.isArray(data12)){for(const key3 in data12){if(!((key3 === "enabled") || (key3 === "target"))){const err23 = {instancePath:instancePath+"/policies/dlq",schemaPath:"../policies.schema.json/properties/dlq/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key3},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err23];}else {vErrors.push(err23);}errors++;}}if(data12.enabled !== undefined){if(typeof data12.enabled !== "boolean"){const err24 = {instancePath:instancePath+"/policies/dlq/enabled",schemaPath:"../policies.schema.json/properties/dlq/properties/enabled/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"};if(vErrors === null){vErrors = [err24];}else {vErrors.push(err24);}errors++;}}if(data12.target !== undefined){if(typeof data12.target !== "string"){const err25 = {instancePath:instancePath+"/policies/dlq/target",schemaPath:"../policies.schema.json/properties/dlq/properties/target/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err25];}else {vErrors.push(err25);}errors++;}}}else {const err26 = {instancePath:instancePath+"/policies/dlq",schemaPath:"../policies.schema.json/properties/dlq/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err26];}else {vErrors.push(err26);}errors++;}}if(data5.budget_ms !== undefined){let data15 = data5.budget_ms;if(!(((typeof data15 == "number") && (!(data15 % 1) && !isNaN(data15))) && (isFinite(data15)))){const err27 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"../policies.schema.json/properties/budget_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err27];}else {vErrors.push(err27);}errors++;}if((typeof data15 == "number") && (isFinite(data15))){if(data15 < 0 || isNaN(data15)){const err28 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"../policies.schema.json/properties/budget_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err28];}else {vErrors.push(err28);}errors++;}}}}else {const err29 = {instancePath:instancePath+"/policies",schemaPath:"../policies.schema.json/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err29];}else {vErrors.push(err29);}errors++;}}}else {const err30 = {instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err30];}else {vErrors.push(err30);}errors++;}validate35.errors = vErrors;return errors === 0;}validate35.evaluated = {"props":true,"dynamicProps":false,"dynamicItems":false};const schema51 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://mova.dev/schemas/actions/call.schema.json","title":"Action: call (sub-plan)","type":"object","required":["type"],"properties":{"type":{"const":"call"},"name":{"type":"string"},"plan_ref":{"type":"string","minLength":1},"inline_plan":{"type":"object"},"input":{"type":"object"},"idempotency_key":{"type":"string"},"save_as":{"type":"string"},"policies":{"$ref":"../policies.schema.json"}},"oneOf":[{"properties":{"plan_ref":{"type":"string","minLength":1}},"required":["plan_ref"]},{"properties":{"inline_plan":{"type":"object"}},"required":["inline_plan"]}],"additionalProperties":false};function validate37(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="https://mova.dev/schemas/actions/call.schema.json" */;let vErrors = null;let errors = 0;const evaluated0 = validate37.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}const _errs1 = errors;let valid0 = false;let passing0 = null;const _errs2 = errors;if(data && typeof data == "object" && !Array.isArray(data)){if(data.plan_ref === undefined){const err0 = {instancePath,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty: "plan_ref"},message:"must have required property '"+"plan_ref"+"'"};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}if(data.plan_ref !== undefined){let data0 = data.plan_ref;if(typeof data0 === "string"){if(func3(data0) < 1){const err1 = {instancePath:instancePath+"/plan_ref",schemaPath:"#/oneOf/0/properties/plan_ref/minLength",keyword:"minLength",params:{limit: 1},message:"must NOT have fewer than 1 characters"};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}}else {const err2 = {instancePath:instancePath+"/plan_ref",schemaPath:"#/oneOf/0/properties/plan_ref/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}}}var _valid0 = _errs2 === errors;if(_valid0){valid0 = true;passing0 = 0;var props0 = {};props0.plan_ref = true;}const _errs5 = errors;if(data && typeof data == "object" && !Array.isArray(data)){if(data.inline_plan === undefined){const err3 = {instancePath,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty: "inline_plan"},message:"must have required property '"+"inline_plan"+"'"};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}if(data.inline_plan !== undefined){let data1 = data.inline_plan;if(!(data1 && typeof data1 == "object" && !Array.isArray(data1))){const err4 = {instancePath:instancePath+"/inline_plan",schemaPath:"#/oneOf/1/properties/inline_plan/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}}}var _valid0 = _errs5 === errors;if(_valid0 && valid0){valid0 = false;passing0 = [passing0, 1];}else {if(_valid0){valid0 = true;passing0 = 1;if(props0 !== true){props0 = props0 || {};props0.inline_plan = true;}}}if(!valid0){const err5 = {instancePath,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas: passing0},message:"must match exactly one schema in oneOf"};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}else {errors = _errs1;if(vErrors !== null){if(_errs1){vErrors.length = _errs1;}else {vErrors = null;}}}if(data && typeof data == "object" && !Array.isArray(data)){if(data.type === undefined){const err6 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "type"},message:"must have required property '"+"type"+"'"};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}for(const key0 in data){if(!((((((((key0 === "type") || (key0 === "name")) || (key0 === "plan_ref")) || (key0 === "inline_plan")) || (key0 === "input")) || (key0 === "idempotency_key")) || (key0 === "save_as")) || (key0 === "policies"))){const err7 = {instancePath,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key0},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}}if(data.type !== undefined){if("call" !== data.type){const err8 = {instancePath:instancePath+"/type",schemaPath:"#/properties/type/const",keyword:"const",params:{allowedValue: "call"},message:"must be equal to constant"};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}}if(data.name !== undefined){if(typeof data.name !== "string"){const err9 = {instancePath:instancePath+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}}if(data.plan_ref !== undefined){let data4 = data.plan_ref;if(typeof data4 === "string"){if(func3(data4) < 1){const err10 = {instancePath:instancePath+"/plan_ref",schemaPath:"#/properties/plan_ref/minLength",keyword:"minLength",params:{limit: 1},message:"must NOT have fewer than 1 characters"};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}}else {const err11 = {instancePath:instancePath+"/plan_ref",schemaPath:"#/properties/plan_ref/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}}if(data.inline_plan !== undefined){let data5 = data.inline_plan;if(!(data5 && typeof data5 == "object" && !Array.isArray(data5))){const err12 = {instancePath:instancePath+"/inline_plan",schemaPath:"#/properties/inline_plan/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}}if(data.input !== undefined){let data6 = data.input;if(!(data6 && typeof data6 == "object" && !Array.isArray(data6))){const err13 = {instancePath:instancePath+"/input",schemaPath:"#/properties/input/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}}if(data.idempotency_key !== undefined){if(typeof data.idempotency_key !== "string"){const err14 = {instancePath:instancePath+"/idempotency_key",schemaPath:"#/properties/idempotency_key/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}}if(data.save_as !== undefined){if(typeof data.save_as !== "string"){const err15 = {instancePath:instancePath+"/save_as",schemaPath:"#/properties/save_as/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}}if(data.policies !== undefined){let data9 = data.policies;if(data9 && typeof data9 == "object" && !Array.isArray(data9)){for(const key1 in data9){if(!((((key1 === "timeout_ms") || (key1 === "retry")) || (key1 === "dlq")) || (key1 === "budget_ms"))){const err16 = {instancePath:instancePath+"/policies",schemaPath:"../policies.schema.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key1},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err16];}else {vErrors.push(err16);}errors++;}}if(data9.timeout_ms !== undefined){let data10 = data9.timeout_ms;if(!(((typeof data10 == "number") && (!(data10 % 1) && !isNaN(data10))) && (isFinite(data10)))){const err17 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"../policies.schema.json/properties/timeout_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err17];}else {vErrors.push(err17);}errors++;}if((typeof data10 == "number") && (isFinite(data10))){if(data10 < 0 || isNaN(data10)){const err18 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"../policies.schema.json/properties/timeout_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err18];}else {vErrors.push(err18);}errors++;}}}if(data9.retry !== undefined){let data11 = data9.retry;if(data11 && typeof data11 == "object" && !Array.isArray(data11)){for(const key2 in data11){if(!(((key2 === "max_attempts") || (key2 === "backoff_ms")) || (key2 === "strategy"))){const err19 = {instancePath:instancePath+"/policies/retry",schemaPath:"../policies.schema.json/properties/retry/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key2},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err19];}else {vErrors.push(err19);}errors++;}}if(data11.max_attempts !== undefined){let data12 = data11.max_attempts;if(!(((typeof data12 == "number") && (!(data12 % 1) && !isNaN(data12))) && (isFinite(data12)))){const err20 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"../policies.schema.json/properties/retry/properties/max_attempts/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err20];}else {vErrors.push(err20);}errors++;}if((typeof data12 == "number") && (isFinite(data12))){if(data12 < 0 || isNaN(data12)){const err21 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"../policies.schema.json/properties/retry/properties/max_attempts/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err21];}else {vErrors.push(err21);}errors++;}}}if(data11.backoff_ms !== undefined){let data13 = data11.backoff_ms;const _errs34 = errors;let valid7 = false;const _errs35 = errors;if(!(((typeof data13 == "number") && (!(data13 % 1) && !isNaN(data13))) && (isFinite(data13)))){const err22 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err22];}else {vErrors.push(err22);}errors++;}if((typeof data13 == "number") && (isFinite(data13))){if(data13 < 0 || isNaN(data13)){const err23 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err23];}else {vErrors.push(err23);}errors++;}}var _valid1 = _errs35 === errors;valid7 = valid7 || _valid1;const _errs37 = errors;if(Array.isArray(data13)){const len0 = data13.length;for(let i0=0; i0<len0; i0++){let data14 = data13[i0];if(!(((typeof data14 == "number") && (!(data14 % 1) && !isNaN(data14))) && (isFinite(data14)))){const err24 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err24];}else {vErrors.push(err24);}errors++;}if((typeof data14 == "number") && (isFinite(data14))){if(data14 < 0 || isNaN(data14)){const err25 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err25];}else {vErrors.push(err25);}errors++;}}}}else {const err26 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err26];}else {vErrors.push(err26);}errors++;}var _valid1 = _errs37 === errors;valid7 = valid7 || _valid1;if(!valid7){const err27 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err27];}else {vErrors.push(err27);}errors++;}else {errors = _errs34;if(vErrors !== null){if(_errs34){vErrors.length = _errs34;}else {vErrors = null;}}}}if(data11.strategy !== undefined){let data15 = data11.strategy;if(typeof data15 !== "string"){const err28 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"../policies.schema.json/properties/retry/properties/strategy/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err28];}else {vErrors.push(err28);}errors++;}if(!((data15 === "fixed") || (data15 === "exp"))){const err29 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"../policies.schema.json/properties/retry/properties/strategy/enum",keyword:"enum",params:{allowedValues: schema32.properties.retry.properties.strategy.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err29];}else {vErrors.push(err29);}errors++;}}}else {const err30 = {instancePath:instancePath+"/policies/retry",schemaPath:"../policies.schema.json/properties/retry/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err30];}else {vErrors.push(err30);}errors++;}}if(data9.dlq !== undefined){let data16 = data9.dlq;if(data16 && typeof data16 == "object" && !Array.isArray(data16)){for(const key3 in data16){if(!((key3 === "enabled") || (key3 === "target"))){const err31 = {instancePath:instancePath+"/policies/dlq",schemaPath:"../policies.schema.json/properties/dlq/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key3},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err31];}else {vErrors.push(err31);}errors++;}}if(data16.enabled !== undefined){if(typeof data16.enabled !== "boolean"){const err32 = {instancePath:instancePath+"/policies/dlq/enabled",schemaPath:"../policies.schema.json/properties/dlq/properties/enabled/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"};if(vErrors === null){vErrors = [err32];}else {vErrors.push(err32);}errors++;}}if(data16.target !== undefined){if(typeof data16.target !== "string"){const err33 = {instancePath:instancePath+"/policies/dlq/target",schemaPath:"../policies.schema.json/properties/dlq/properties/target/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err33];}else {vErrors.push(err33);}errors++;}}}else {const err34 = {instancePath:instancePath+"/policies/dlq",schemaPath:"../policies.schema.json/properties/dlq/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err34];}else {vErrors.push(err34);}errors++;}}if(data9.budget_ms !== undefined){let data19 = data9.budget_ms;if(!(((typeof data19 == "number") && (!(data19 % 1) && !isNaN(data19))) && (isFinite(data19)))){const err35 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"../policies.schema.json/properties/budget_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err35];}else {vErrors.push(err35);}errors++;}if((typeof data19 == "number") && (isFinite(data19))){if(data19 < 0 || isNaN(data19)){const err36 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"../policies.schema.json/properties/budget_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err36];}else {vErrors.push(err36);}errors++;}}}}else {const err37 = {instancePath:instancePath+"/policies",schemaPath:"../policies.schema.json/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err37];}else {vErrors.push(err37);}errors++;}}}else {const err38 = {instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err38];}else {vErrors.push(err38);}errors++;}validate37.errors = vErrors;return errors === 0;}validate37.evaluated = {"props":true,"dynamicProps":false,"dynamicItems":false};const schema53 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://mova.dev/schemas/actions/emit_event.schema.json","title":"Action: emit_event","type":"object","required":["type","channel","payload"],"properties":{"type":{"const":"emit_event"},"name":{"type":"string"},"channel":{"type":"string","minLength":1},"payload":{"type":"object"},"idempotency_key":{"type":"string"},"save_as":{"type":"string"},"policies":{"$ref":"../policies.schema.json"}},"additionalProperties":false};function validate39(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="https://mova.dev/schemas/actions/emit_event.schema.json" */;let vErrors = null;let errors = 0;const evaluated0 = validate39.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}if(data && typeof data == "object" && !Array.isArray(data)){if(data.type === undefined){const err0 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "type"},message:"must have required property '"+"type"+"'"};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}if(data.channel === undefined){const err1 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "channel"},message:"must have required property '"+"channel"+"'"};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}if(data.payload === undefined){const err2 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "payload"},message:"must have required property '"+"payload"+"'"};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}for(const key0 in data){if(!(((((((key0 === "type") || (key0 === "name")) || (key0 === "channel")) || (key0 === "payload")) || (key0 === "idempotency_key")) || (key0 === "save_as")) || (key0 === "policies"))){const err3 = {instancePath,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key0},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}}if(data.type !== undefined){if("emit_event" !== data.type){const err4 = {instancePath:instancePath+"/type",schemaPath:"#/properties/type/const",keyword:"const",params:{allowedValue: "emit_event"},message:"must be equal to constant"};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}}if(data.name !== undefined){if(typeof data.name !== "string"){const err5 = {instancePath:instancePath+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}}if(data.channel !== undefined){let data2 = data.channel;if(typeof data2 === "string"){if(func3(data2) < 1){const err6 = {instancePath:instancePath+"/channel",schemaPath:"#/properties/channel/minLength",keyword:"minLength",params:{limit: 1},message:"must NOT have fewer than 1 characters"};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}}else {const err7 = {instancePath:instancePath+"/channel",schemaPath:"#/properties/channel/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}}if(data.payload !== undefined){let data3 = data.payload;if(!(data3 && typeof data3 == "object" && !Array.isArray(data3))){const err8 = {instancePath:instancePath+"/payload",schemaPath:"#/properties/payload/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}}if(data.idempotency_key !== undefined){if(typeof data.idempotency_key !== "string"){const err9 = {instancePath:instancePath+"/idempotency_key",schemaPath:"#/properties/idempotency_key/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}}if(data.save_as !== undefined){if(typeof data.save_as !== "string"){const err10 = {instancePath:instancePath+"/save_as",schemaPath:"#/properties/save_as/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}}if(data.policies !== undefined){let data6 = data.policies;if(data6 && typeof data6 == "object" && !Array.isArray(data6)){for(const key1 in data6){if(!((((key1 === "timeout_ms") || (key1 === "retry")) || (key1 === "dlq")) || (key1 === "budget_ms"))){const err11 = {instancePath:instancePath+"/policies",schemaPath:"../policies.schema.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key1},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}}if(data6.timeout_ms !== undefined){let data7 = data6.timeout_ms;if(!(((typeof data7 == "number") && (!(data7 % 1) && !isNaN(data7))) && (isFinite(data7)))){const err12 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"../policies.schema.json/properties/timeout_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}if((typeof data7 == "number") && (isFinite(data7))){if(data7 < 0 || isNaN(data7)){const err13 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"../policies.schema.json/properties/timeout_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}}}if(data6.retry !== undefined){let data8 = data6.retry;if(data8 && typeof data8 == "object" && !Array.isArray(data8)){for(const key2 in data8){if(!(((key2 === "max_attempts") || (key2 === "backoff_ms")) || (key2 === "strategy"))){const err14 = {instancePath:instancePath+"/policies/retry",schemaPath:"../policies.schema.json/properties/retry/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key2},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}}if(data8.max_attempts !== undefined){let data9 = data8.max_attempts;if(!(((typeof data9 == "number") && (!(data9 % 1) && !isNaN(data9))) && (isFinite(data9)))){const err15 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"../policies.schema.json/properties/retry/properties/max_attempts/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}if((typeof data9 == "number") && (isFinite(data9))){if(data9 < 0 || isNaN(data9)){const err16 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"../policies.schema.json/properties/retry/properties/max_attempts/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err16];}else {vErrors.push(err16);}errors++;}}}if(data8.backoff_ms !== undefined){let data10 = data8.backoff_ms;const _errs25 = errors;let valid4 = false;const _errs26 = errors;if(!(((typeof data10 == "number") && (!(data10 % 1) && !isNaN(data10))) && (isFinite(data10)))){const err17 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err17];}else {vErrors.push(err17);}errors++;}if((typeof data10 == "number") && (isFinite(data10))){if(data10 < 0 || isNaN(data10)){const err18 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err18];}else {vErrors.push(err18);}errors++;}}var _valid0 = _errs26 === errors;valid4 = valid4 || _valid0;const _errs28 = errors;if(Array.isArray(data10)){const len0 = data10.length;for(let i0=0; i0<len0; i0++){let data11 = data10[i0];if(!(((typeof data11 == "number") && (!(data11 % 1) && !isNaN(data11))) && (isFinite(data11)))){const err19 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err19];}else {vErrors.push(err19);}errors++;}if((typeof data11 == "number") && (isFinite(data11))){if(data11 < 0 || isNaN(data11)){const err20 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err20];}else {vErrors.push(err20);}errors++;}}}}else {const err21 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err21];}else {vErrors.push(err21);}errors++;}var _valid0 = _errs28 === errors;valid4 = valid4 || _valid0;if(!valid4){const err22 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err22];}else {vErrors.push(err22);}errors++;}else {errors = _errs25;if(vErrors !== null){if(_errs25){vErrors.length = _errs25;}else {vErrors = null;}}}}if(data8.strategy !== undefined){let data12 = data8.strategy;if(typeof data12 !== "string"){const err23 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"../policies.schema.json/properties/retry/properties/strategy/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err23];}else {vErrors.push(err23);}errors++;}if(!((data12 === "fixed") || (data12 === "exp"))){const err24 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"../policies.schema.json/properties/retry/properties/strategy/enum",keyword:"enum",params:{allowedValues: schema32.properties.retry.properties.strategy.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err24];}else {vErrors.push(err24);}errors++;}}}else {const err25 = {instancePath:instancePath+"/policies/retry",schemaPath:"../policies.schema.json/properties/retry/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err25];}else {vErrors.push(err25);}errors++;}}if(data6.dlq !== undefined){let data13 = data6.dlq;if(data13 && typeof data13 == "object" && !Array.isArray(data13)){for(const key3 in data13){if(!((key3 === "enabled") || (key3 === "target"))){const err26 = {instancePath:instancePath+"/policies/dlq",schemaPath:"../policies.schema.json/properties/dlq/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key3},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err26];}else {vErrors.push(err26);}errors++;}}if(data13.enabled !== undefined){if(typeof data13.enabled !== "boolean"){const err27 = {instancePath:instancePath+"/policies/dlq/enabled",schemaPath:"../policies.schema.json/properties/dlq/properties/enabled/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"};if(vErrors === null){vErrors = [err27];}else {vErrors.push(err27);}errors++;}}if(data13.target !== undefined){if(typeof data13.target !== "string"){const err28 = {instancePath:instancePath+"/policies/dlq/target",schemaPath:"../policies.schema.json/properties/dlq/properties/target/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err28];}else {vErrors.push(err28);}errors++;}}}else {const err29 = {instancePath:instancePath+"/policies/dlq",schemaPath:"../policies.schema.json/properties/dlq/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err29];}else {vErrors.push(err29);}errors++;}}if(data6.budget_ms !== undefined){let data16 = data6.budget_ms;if(!(((typeof data16 == "number") && (!(data16 % 1) && !isNaN(data16))) && (isFinite(data16)))){const err30 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"../policies.schema.json/properties/budget_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err30];}else {vErrors.push(err30);}errors++;}if((typeof data16 == "number") && (isFinite(data16))){if(data16 < 0 || isNaN(data16)){const err31 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"../policies.schema.json/properties/budget_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err31];}else {vErrors.push(err31);}errors++;}}}}else {const err32 = {instancePath:instancePath+"/policies",schemaPath:"../policies.schema.json/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err32];}else {vErrors.push(err32);}errors++;}}}else {const err33 = {instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err33];}else {vErrors.push(err33);}errors++;}validate39.errors = vErrors;return errors === 0;}validate39.evaluated = {"props":true,"dynamicProps":false,"dynamicItems":false};const schema55 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://mova.dev/schemas/actions/tool_call.schema.json","title":"Action: tool_call","type":"object","required":["type","name"],"properties":{"type":{"const":"tool_call"},"name":{"type":"string"},"args":{"type":"object"},"timeout_ms":{"type":"integer","minimum":0},"save_as":{"type":"string"},"policies":{"$ref":"../policies.schema.json"}},"additionalProperties":false};function validate41(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="https://mova.dev/schemas/actions/tool_call.schema.json" */;let vErrors = null;let errors = 0;const evaluated0 = validate41.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}if(data && typeof data == "object" && !Array.isArray(data)){if(data.type === undefined){const err0 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "type"},message:"must have required property '"+"type"+"'"};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}if(data.name === undefined){const err1 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "name"},message:"must have required property '"+"name"+"'"};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}for(const key0 in data){if(!((((((key0 === "type") || (key0 === "name")) || (key0 === "args")) || (key0 === "timeout_ms")) || (key0 === "save_as")) || (key0 === "policies"))){const err2 = {instancePath,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key0},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}}if(data.type !== undefined){if("tool_call" !== data.type){const err3 = {instancePath:instancePath+"/type",schemaPath:"#/properties/type/const",keyword:"const",params:{allowedValue: "tool_call"},message:"must be equal to constant"};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}}if(data.name !== undefined){if(typeof data.name !== "string"){const err4 = {instancePath:instancePath+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}}if(data.args !== undefined){let data2 = data.args;if(!(data2 && typeof data2 == "object" && !Array.isArray(data2))){const err5 = {instancePath:instancePath+"/args",schemaPath:"#/properties/args/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}}if(data.timeout_ms !== undefined){let data3 = data.timeout_ms;if(!(((typeof data3 == "number") && (!(data3 % 1) && !isNaN(data3))) && (isFinite(data3)))){const err6 = {instancePath:instancePath+"/timeout_ms",schemaPath:"#/properties/timeout_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}if((typeof data3 == "number") && (isFinite(data3))){if(data3 < 0 || isNaN(data3)){const err7 = {instancePath:instancePath+"/timeout_ms",schemaPath:"#/properties/timeout_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}}}if(data.save_as !== undefined){if(typeof data.save_as !== "string"){const err8 = {instancePath:instancePath+"/save_as",schemaPath:"#/properties/save_as/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}}if(data.policies !== undefined){let data5 = data.policies;if(data5 && typeof data5 == "object" && !Array.isArray(data5)){for(const key1 in data5){if(!((((key1 === "timeout_ms") || (key1 === "retry")) || (key1 === "dlq")) || (key1 === "budget_ms"))){const err9 = {instancePath:instancePath+"/policies",schemaPath:"../policies.schema.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key1},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}}if(data5.timeout_ms !== undefined){let data6 = data5.timeout_ms;if(!(((typeof data6 == "number") && (!(data6 % 1) && !isNaN(data6))) && (isFinite(data6)))){const err10 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"../policies.schema.json/properties/timeout_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}if((typeof data6 == "number") && (isFinite(data6))){if(data6 < 0 || isNaN(data6)){const err11 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"../policies.schema.json/properties/timeout_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}}}if(data5.retry !== undefined){let data7 = data5.retry;if(data7 && typeof data7 == "object" && !Array.isArray(data7)){for(const key2 in data7){if(!(((key2 === "max_attempts") || (key2 === "backoff_ms")) || (key2 === "strategy"))){const err12 = {instancePath:instancePath+"/policies/retry",schemaPath:"../policies.schema.json/properties/retry/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key2},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}}if(data7.max_attempts !== undefined){let data8 = data7.max_attempts;if(!(((typeof data8 == "number") && (!(data8 % 1) && !isNaN(data8))) && (isFinite(data8)))){const err13 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"../policies.schema.json/properties/retry/properties/max_attempts/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}if((typeof data8 == "number") && (isFinite(data8))){if(data8 < 0 || isNaN(data8)){const err14 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"../policies.schema.json/properties/retry/properties/max_attempts/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}}}if(data7.backoff_ms !== undefined){let data9 = data7.backoff_ms;const _errs23 = errors;let valid4 = false;const _errs24 = errors;if(!(((typeof data9 == "number") && (!(data9 % 1) && !isNaN(data9))) && (isFinite(data9)))){const err15 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}if((typeof data9 == "number") && (isFinite(data9))){if(data9 < 0 || isNaN(data9)){const err16 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err16];}else {vErrors.push(err16);}errors++;}}var _valid0 = _errs24 === errors;valid4 = valid4 || _valid0;const _errs26 = errors;if(Array.isArray(data9)){const len0 = data9.length;for(let i0=0; i0<len0; i0++){let data10 = data9[i0];if(!(((typeof data10 == "number") && (!(data10 % 1) && !isNaN(data10))) && (isFinite(data10)))){const err17 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err17];}else {vErrors.push(err17);}errors++;}if((typeof data10 == "number") && (isFinite(data10))){if(data10 < 0 || isNaN(data10)){const err18 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err18];}else {vErrors.push(err18);}errors++;}}}}else {const err19 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err19];}else {vErrors.push(err19);}errors++;}var _valid0 = _errs26 === errors;valid4 = valid4 || _valid0;if(!valid4){const err20 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err20];}else {vErrors.push(err20);}errors++;}else {errors = _errs23;if(vErrors !== null){if(_errs23){vErrors.length = _errs23;}else {vErrors = null;}}}}if(data7.strategy !== undefined){let data11 = data7.strategy;if(typeof data11 !== "string"){const err21 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"../policies.schema.json/properties/retry/properties/strategy/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err21];}else {vErrors.push(err21);}errors++;}if(!((data11 === "fixed") || (data11 === "exp"))){const err22 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"../policies.schema.json/properties/retry/properties/strategy/enum",keyword:"enum",params:{allowedValues: schema32.properties.retry.properties.strategy.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err22];}else {vErrors.push(err22);}errors++;}}}else {const err23 = {instancePath:instancePath+"/policies/retry",schemaPath:"../policies.schema.json/properties/retry/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err23];}else {vErrors.push(err23);}errors++;}}if(data5.dlq !== undefined){let data12 = data5.dlq;if(data12 && typeof data12 == "object" && !Array.isArray(data12)){for(const key3 in data12){if(!((key3 === "enabled") || (key3 === "target"))){const err24 = {instancePath:instancePath+"/policies/dlq",schemaPath:"../policies.schema.json/properties/dlq/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key3},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err24];}else {vErrors.push(err24);}errors++;}}if(data12.enabled !== undefined){if(typeof data12.enabled !== "boolean"){const err25 = {instancePath:instancePath+"/policies/dlq/enabled",schemaPath:"../policies.schema.json/properties/dlq/properties/enabled/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"};if(vErrors === null){vErrors = [err25];}else {vErrors.push(err25);}errors++;}}if(data12.target !== undefined){if(typeof data12.target !== "string"){const err26 = {instancePath:instancePath+"/policies/dlq/target",schemaPath:"../policies.schema.json/properties/dlq/properties/target/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err26];}else {vErrors.push(err26);}errors++;}}}else {const err27 = {instancePath:instancePath+"/policies/dlq",schemaPath:"../policies.schema.json/properties/dlq/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err27];}else {vErrors.push(err27);}errors++;}}if(data5.budget_ms !== undefined){let data15 = data5.budget_ms;if(!(((typeof data15 == "number") && (!(data15 % 1) && !isNaN(data15))) && (isFinite(data15)))){const err28 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"../policies.schema.json/properties/budget_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err28];}else {vErrors.push(err28);}errors++;}if((typeof data15 == "number") && (isFinite(data15))){if(data15 < 0 || isNaN(data15)){const err29 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"../policies.schema.json/properties/budget_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err29];}else {vErrors.push(err29);}errors++;}}}}else {const err30 = {instancePath:instancePath+"/policies",schemaPath:"../policies.schema.json/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err30];}else {vErrors.push(err30);}errors++;}}}else {const err31 = {instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err31];}else {vErrors.push(err31);}errors++;}validate41.errors = vErrors;return errors === 0;}validate41.evaluated = {"props":true,"dynamicProps":false,"dynamicItems":false};const schema57 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://mova.dev/schemas/actions/json_patch.schema.json","title":"Action: json_patch (RFC 7386 merge-patch)","type":"object","required":["type","target","patch"],"properties":{"type":{"const":"json_patch"},"name":{"type":"string"},"target":{"type":"string","minLength":1},"patch":{"type":["object","null"]},"save_as":{"type":"string"},"policies":{"$ref":"../policies.schema.json"}},"additionalProperties":false};function validate43(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="https://mova.dev/schemas/actions/json_patch.schema.json" */;let vErrors = null;let errors = 0;const evaluated0 = validate43.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}if(data && typeof data == "object" && !Array.isArray(data)){if(data.type === undefined){const err0 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "type"},message:"must have required property '"+"type"+"'"};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}if(data.target === undefined){const err1 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "target"},message:"must have required property '"+"target"+"'"};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}if(data.patch === undefined){const err2 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "patch"},message:"must have required property '"+"patch"+"'"};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}for(const key0 in data){if(!((((((key0 === "type") || (key0 === "name")) || (key0 === "target")) || (key0 === "patch")) || (key0 === "save_as")) || (key0 === "policies"))){const err3 = {instancePath,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key0},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}}if(data.type !== undefined){if("json_patch" !== data.type){const err4 = {instancePath:instancePath+"/type",schemaPath:"#/properties/type/const",keyword:"const",params:{allowedValue: "json_patch"},message:"must be equal to constant"};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}}if(data.name !== undefined){if(typeof data.name !== "string"){const err5 = {instancePath:instancePath+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}}if(data.target !== undefined){let data2 = data.target;if(typeof data2 === "string"){if(func3(data2) < 1){const err6 = {instancePath:instancePath+"/target",schemaPath:"#/properties/target/minLength",keyword:"minLength",params:{limit: 1},message:"must NOT have fewer than 1 characters"};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}}else {const err7 = {instancePath:instancePath+"/target",schemaPath:"#/properties/target/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}}if(data.patch !== undefined){let data3 = data.patch;if((!(data3 && typeof data3 == "object" && !Array.isArray(data3))) && (data3 !== null)){const err8 = {instancePath:instancePath+"/patch",schemaPath:"#/properties/patch/type",keyword:"type",params:{type: schema57.properties.patch.type},message:"must be object,null"};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}}if(data.save_as !== undefined){if(typeof data.save_as !== "string"){const err9 = {instancePath:instancePath+"/save_as",schemaPath:"#/properties/save_as/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}}if(data.policies !== undefined){let data5 = data.policies;if(data5 && typeof data5 == "object" && !Array.isArray(data5)){for(const key1 in data5){if(!((((key1 === "timeout_ms") || (key1 === "retry")) || (key1 === "dlq")) || (key1 === "budget_ms"))){const err10 = {instancePath:instancePath+"/policies",schemaPath:"../policies.schema.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key1},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}}if(data5.timeout_ms !== undefined){let data6 = data5.timeout_ms;if(!(((typeof data6 == "number") && (!(data6 % 1) && !isNaN(data6))) && (isFinite(data6)))){const err11 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"../policies.schema.json/properties/timeout_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}if((typeof data6 == "number") && (isFinite(data6))){if(data6 < 0 || isNaN(data6)){const err12 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"../policies.schema.json/properties/timeout_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}}}if(data5.retry !== undefined){let data7 = data5.retry;if(data7 && typeof data7 == "object" && !Array.isArray(data7)){for(const key2 in data7){if(!(((key2 === "max_attempts") || (key2 === "backoff_ms")) || (key2 === "strategy"))){const err13 = {instancePath:instancePath+"/policies/retry",schemaPath:"../policies.schema.json/properties/retry/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key2},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}}if(data7.max_attempts !== undefined){let data8 = data7.max_attempts;if(!(((typeof data8 == "number") && (!(data8 % 1) && !isNaN(data8))) && (isFinite(data8)))){const err14 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"../policies.schema.json/properties/retry/properties/max_attempts/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}if((typeof data8 == "number") && (isFinite(data8))){if(data8 < 0 || isNaN(data8)){const err15 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"../policies.schema.json/properties/retry/properties/max_attempts/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}}}if(data7.backoff_ms !== undefined){let data9 = data7.backoff_ms;const _errs23 = errors;let valid4 = false;const _errs24 = errors;if(!(((typeof data9 == "number") && (!(data9 % 1) && !isNaN(data9))) && (isFinite(data9)))){const err16 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err16];}else {vErrors.push(err16);}errors++;}if((typeof data9 == "number") && (isFinite(data9))){if(data9 < 0 || isNaN(data9)){const err17 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err17];}else {vErrors.push(err17);}errors++;}}var _valid0 = _errs24 === errors;valid4 = valid4 || _valid0;const _errs26 = errors;if(Array.isArray(data9)){const len0 = data9.length;for(let i0=0; i0<len0; i0++){let data10 = data9[i0];if(!(((typeof data10 == "number") && (!(data10 % 1) && !isNaN(data10))) && (isFinite(data10)))){const err18 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err18];}else {vErrors.push(err18);}errors++;}if((typeof data10 == "number") && (isFinite(data10))){if(data10 < 0 || isNaN(data10)){const err19 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err19];}else {vErrors.push(err19);}errors++;}}}}else {const err20 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err20];}else {vErrors.push(err20);}errors++;}var _valid0 = _errs26 === errors;valid4 = valid4 || _valid0;if(!valid4){const err21 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err21];}else {vErrors.push(err21);}errors++;}else {errors = _errs23;if(vErrors !== null){if(_errs23){vErrors.length = _errs23;}else {vErrors = null;}}}}if(data7.strategy !== undefined){let data11 = data7.strategy;if(typeof data11 !== "string"){const err22 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"../policies.schema.json/properties/retry/properties/strategy/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err22];}else {vErrors.push(err22);}errors++;}if(!((data11 === "fixed") || (data11 === "exp"))){const err23 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"../policies.schema.json/properties/retry/properties/strategy/enum",keyword:"enum",params:{allowedValues: schema32.properties.retry.properties.strategy.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err23];}else {vErrors.push(err23);}errors++;}}}else {const err24 = {instancePath:instancePath+"/policies/retry",schemaPath:"../policies.schema.json/properties/retry/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err24];}else {vErrors.push(err24);}errors++;}}if(data5.dlq !== undefined){let data12 = data5.dlq;if(data12 && typeof data12 == "object" && !Array.isArray(data12)){for(const key3 in data12){if(!((key3 === "enabled") || (key3 === "target"))){const err25 = {instancePath:instancePath+"/policies/dlq",schemaPath:"../policies.schema.json/properties/dlq/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key3},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err25];}else {vErrors.push(err25);}errors++;}}if(data12.enabled !== undefined){if(typeof data12.enabled !== "boolean"){const err26 = {instancePath:instancePath+"/policies/dlq/enabled",schemaPath:"../policies.schema.json/properties/dlq/properties/enabled/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"};if(vErrors === null){vErrors = [err26];}else {vErrors.push(err26);}errors++;}}if(data12.target !== undefined){if(typeof data12.target !== "string"){const err27 = {instancePath:instancePath+"/policies/dlq/target",schemaPath:"../policies.schema.json/properties/dlq/properties/target/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err27];}else {vErrors.push(err27);}errors++;}}}else {const err28 = {instancePath:instancePath+"/policies/dlq",schemaPath:"../policies.schema.json/properties/dlq/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err28];}else {vErrors.push(err28);}errors++;}}if(data5.budget_ms !== undefined){let data15 = data5.budget_ms;if(!(((typeof data15 == "number") && (!(data15 % 1) && !isNaN(data15))) && (isFinite(data15)))){const err29 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"../policies.schema.json/properties/budget_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err29];}else {vErrors.push(err29);}errors++;}if((typeof data15 == "number") && (isFinite(data15))){if(data15 < 0 || isNaN(data15)){const err30 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"../policies.schema.json/properties/budget_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err30];}else {vErrors.push(err30);}errors++;}}}}else {const err31 = {instancePath:instancePath+"/policies",schemaPath:"../policies.schema.json/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err31];}else {vErrors.push(err31);}errors++;}}}else {const err32 = {instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err32];}else {vErrors.push(err32);}errors++;}validate43.errors = vErrors;return errors === 0;}validate43.evaluated = {"props":true,"dynamicProps":false,"dynamicItems":false};const schema59 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://mova.dev/schemas/actions/file_read.schema.json","title":"Action: file_read","type":"object","required":["type","path"],"properties":{"type":{"const":"file_read"},"name":{"type":"string"},"path":{"type":"string","minLength":1},"encoding":{"type":"string","enum":["utf8","base64"]},"save_as":{"type":"string"},"policies":{"$ref":"../policies.schema.json"}},"additionalProperties":false};function validate45(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="https://mova.dev/schemas/actions/file_read.schema.json" */;let vErrors = null;let errors = 0;const evaluated0 = validate45.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}if(data && typeof data == "object" && !Array.isArray(data)){if(data.type === undefined){const err0 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "type"},message:"must have required property '"+"type"+"'"};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}if(data.path === undefined){const err1 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "path"},message:"must have required property '"+"path"+"'"};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}for(const key0 in data){if(!((((((key0 === "type") || (key0 === "name")) || (key0 === "path")) || (key0 === "encoding")) || (key0 === "save_as")) || (key0 === "policies"))){const err2 = {instancePath,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key0},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}}if(data.type !== undefined){if("file_read" !== data.type){const err3 = {instancePath:instancePath+"/type",schemaPath:"#/properties/type/const",keyword:"const",params:{allowedValue: "file_read"},message:"must be equal to constant"};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}}if(data.name !== undefined){if(typeof data.name !== "string"){const err4 = {instancePath:instancePath+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}}if(data.path !== undefined){let data2 = data.path;if(typeof data2 === "string"){if(func3(data2) < 1){const err5 = {instancePath:instancePath+"/path",schemaPath:"#/properties/path/minLength",keyword:"minLength",params:{limit: 1},message:"must NOT have fewer than 1 characters"};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}}else {const err6 = {instancePath:instancePath+"/path",schemaPath:"#/properties/path/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}}if(data.encoding !== undefined){let data3 = data.encoding;if(typeof data3 !== "string"){const err7 = {instancePath:instancePath+"/encoding",schemaPath:"#/properties/encoding/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}if(!((data3 === "utf8") || (data3 === "base64"))){const err8 = {instancePath:instancePath+"/encoding",schemaPath:"#/properties/encoding/enum",keyword:"enum",params:{allowedValues: schema59.properties.encoding.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}}if(data.save_as !== undefined){if(typeof data.save_as !== "string"){const err9 = {instancePath:instancePath+"/save_as",schemaPath:"#/properties/save_as/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}}if(data.policies !== undefined){let data5 = data.policies;if(data5 && typeof data5 == "object" && !Array.isArray(data5)){for(const key1 in data5){if(!((((key1 === "timeout_ms") || (key1 === "retry")) || (key1 === "dlq")) || (key1 === "budget_ms"))){const err10 = {instancePath:instancePath+"/policies",schemaPath:"../policies.schema.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key1},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}}if(data5.timeout_ms !== undefined){let data6 = data5.timeout_ms;if(!(((typeof data6 == "number") && (!(data6 % 1) && !isNaN(data6))) && (isFinite(data6)))){const err11 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"../policies.schema.json/properties/timeout_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}if((typeof data6 == "number") && (isFinite(data6))){if(data6 < 0 || isNaN(data6)){const err12 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"../policies.schema.json/properties/timeout_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}}}if(data5.retry !== undefined){let data7 = data5.retry;if(data7 && typeof data7 == "object" && !Array.isArray(data7)){for(const key2 in data7){if(!(((key2 === "max_attempts") || (key2 === "backoff_ms")) || (key2 === "strategy"))){const err13 = {instancePath:instancePath+"/policies/retry",schemaPath:"../policies.schema.json/properties/retry/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key2},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}}if(data7.max_attempts !== undefined){let data8 = data7.max_attempts;if(!(((typeof data8 == "number") && (!(data8 % 1) && !isNaN(data8))) && (isFinite(data8)))){const err14 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"../policies.schema.json/properties/retry/properties/max_attempts/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}if((typeof data8 == "number") && (isFinite(data8))){if(data8 < 0 || isNaN(data8)){const err15 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"../policies.schema.json/properties/retry/properties/max_attempts/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}}}if(data7.backoff_ms !== undefined){let data9 = data7.backoff_ms;const _errs23 = errors;let valid4 = false;const _errs24 = errors;if(!(((typeof data9 == "number") && (!(data9 % 1) && !isNaN(data9))) && (isFinite(data9)))){const err16 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err16];}else {vErrors.push(err16);}errors++;}if((typeof data9 == "number") && (isFinite(data9))){if(data9 < 0 || isNaN(data9)){const err17 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err17];}else {vErrors.push(err17);}errors++;}}var _valid0 = _errs24 === errors;valid4 = valid4 || _valid0;const _errs26 = errors;if(Array.isArray(data9)){const len0 = data9.length;for(let i0=0; i0<len0; i0++){let data10 = data9[i0];if(!(((typeof data10 == "number") && (!(data10 % 1) && !isNaN(data10))) && (isFinite(data10)))){const err18 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err18];}else {vErrors.push(err18);}errors++;}if((typeof data10 == "number") && (isFinite(data10))){if(data10 < 0 || isNaN(data10)){const err19 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err19];}else {vErrors.push(err19);}errors++;}}}}else {const err20 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err20];}else {vErrors.push(err20);}errors++;}var _valid0 = _errs26 === errors;valid4 = valid4 || _valid0;if(!valid4){const err21 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err21];}else {vErrors.push(err21);}errors++;}else {errors = _errs23;if(vErrors !== null){if(_errs23){vErrors.length = _errs23;}else {vErrors = null;}}}}if(data7.strategy !== undefined){let data11 = data7.strategy;if(typeof data11 !== "string"){const err22 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"../policies.schema.json/properties/retry/properties/strategy/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err22];}else {vErrors.push(err22);}errors++;}if(!((data11 === "fixed") || (data11 === "exp"))){const err23 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"../policies.schema.json/properties/retry/properties/strategy/enum",keyword:"enum",params:{allowedValues: schema32.properties.retry.properties.strategy.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err23];}else {vErrors.push(err23);}errors++;}}}else {const err24 = {instancePath:instancePath+"/policies/retry",schemaPath:"../policies.schema.json/properties/retry/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err24];}else {vErrors.push(err24);}errors++;}}if(data5.dlq !== undefined){let data12 = data5.dlq;if(data12 && typeof data12 == "object" && !Array.isArray(data12)){for(const key3 in data12){if(!((key3 === "enabled") || (key3 === "target"))){const err25 = {instancePath:instancePath+"/policies/dlq",schemaPath:"../policies.schema.json/properties/dlq/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key3},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err25];}else {vErrors.push(err25);}errors++;}}if(data12.enabled !== undefined){if(typeof data12.enabled !== "boolean"){const err26 = {instancePath:instancePath+"/policies/dlq/enabled",schemaPath:"../policies.schema.json/properties/dlq/properties/enabled/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"};if(vErrors === null){vErrors = [err26];}else {vErrors.push(err26);}errors++;}}if(data12.target !== undefined){if(typeof data12.target !== "string"){const err27 = {instancePath:instancePath+"/policies/dlq/target",schemaPath:"../policies.schema.json/properties/dlq/properties/target/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err27];}else {vErrors.push(err27);}errors++;}}}else {const err28 = {instancePath:instancePath+"/policies/dlq",schemaPath:"../policies.schema.json/properties/dlq/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err28];}else {vErrors.push(err28);}errors++;}}if(data5.budget_ms !== undefined){let data15 = data5.budget_ms;if(!(((typeof data15 == "number") && (!(data15 % 1) && !isNaN(data15))) && (isFinite(data15)))){const err29 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"../policies.schema.json/properties/budget_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err29];}else {vErrors.push(err29);}errors++;}if((typeof data15 == "number") && (isFinite(data15))){if(data15 < 0 || isNaN(data15)){const err30 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"../policies.schema.json/properties/budget_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err30];}else {vErrors.push(err30);}errors++;}}}}else {const err31 = {instancePath:instancePath+"/policies",schemaPath:"../policies.schema.json/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err31];}else {vErrors.push(err31);}errors++;}}}else {const err32 = {instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err32];}else {vErrors.push(err32);}errors++;}validate45.errors = vErrors;return errors === 0;}validate45.evaluated = {"props":true,"dynamicProps":false,"dynamicItems":false};const schema61 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://mova.dev/schemas/actions/file_write.schema.json","title":"Action: file_write","type":"object","required":["type","path","data"],"properties":{"type":{"const":"file_write"},"name":{"type":"string"},"path":{"type":"string","minLength":1},"data":{},"encoding":{"type":"string","enum":["utf8","base64"]},"mode":{"type":"string","enum":["overwrite","append"]},"idempotency_key":{"type":"string"},"save_as":{"type":"string"},"policies":{"$ref":"../policies.schema.json"}},"additionalProperties":false};function validate47(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="https://mova.dev/schemas/actions/file_write.schema.json" */;let vErrors = null;let errors = 0;const evaluated0 = validate47.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}if(data && typeof data == "object" && !Array.isArray(data)){if(data.type === undefined){const err0 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "type"},message:"must have required property '"+"type"+"'"};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}if(data.path === undefined){const err1 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "path"},message:"must have required property '"+"path"+"'"};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}if(data.data === undefined){const err2 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "data"},message:"must have required property '"+"data"+"'"};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}for(const key0 in data){if(!(func1.call(schema61.properties, key0))){const err3 = {instancePath,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key0},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}}if(data.type !== undefined){if("file_write" !== data.type){const err4 = {instancePath:instancePath+"/type",schemaPath:"#/properties/type/const",keyword:"const",params:{allowedValue: "file_write"},message:"must be equal to constant"};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}}if(data.name !== undefined){if(typeof data.name !== "string"){const err5 = {instancePath:instancePath+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}}if(data.path !== undefined){let data2 = data.path;if(typeof data2 === "string"){if(func3(data2) < 1){const err6 = {instancePath:instancePath+"/path",schemaPath:"#/properties/path/minLength",keyword:"minLength",params:{limit: 1},message:"must NOT have fewer than 1 characters"};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}}else {const err7 = {instancePath:instancePath+"/path",schemaPath:"#/properties/path/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}}if(data.encoding !== undefined){let data3 = data.encoding;if(typeof data3 !== "string"){const err8 = {instancePath:instancePath+"/encoding",schemaPath:"#/properties/encoding/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}if(!((data3 === "utf8") || (data3 === "base64"))){const err9 = {instancePath:instancePath+"/encoding",schemaPath:"#/properties/encoding/enum",keyword:"enum",params:{allowedValues: schema61.properties.encoding.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}}if(data.mode !== undefined){let data4 = data.mode;if(typeof data4 !== "string"){const err10 = {instancePath:instancePath+"/mode",schemaPath:"#/properties/mode/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}if(!((data4 === "overwrite") || (data4 === "append"))){const err11 = {instancePath:instancePath+"/mode",schemaPath:"#/properties/mode/enum",keyword:"enum",params:{allowedValues: schema61.properties.mode.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}}if(data.idempotency_key !== undefined){if(typeof data.idempotency_key !== "string"){const err12 = {instancePath:instancePath+"/idempotency_key",schemaPath:"#/properties/idempotency_key/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}}if(data.save_as !== undefined){if(typeof data.save_as !== "string"){const err13 = {instancePath:instancePath+"/save_as",schemaPath:"#/properties/save_as/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}}if(data.policies !== undefined){let data7 = data.policies;if(data7 && typeof data7 == "object" && !Array.isArray(data7)){for(const key1 in data7){if(!((((key1 === "timeout_ms") || (key1 === "retry")) || (key1 === "dlq")) || (key1 === "budget_ms"))){const err14 = {instancePath:instancePath+"/policies",schemaPath:"../policies.schema.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key1},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}}if(data7.timeout_ms !== undefined){let data8 = data7.timeout_ms;if(!(((typeof data8 == "number") && (!(data8 % 1) && !isNaN(data8))) && (isFinite(data8)))){const err15 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"../policies.schema.json/properties/timeout_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}if((typeof data8 == "number") && (isFinite(data8))){if(data8 < 0 || isNaN(data8)){const err16 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"../policies.schema.json/properties/timeout_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err16];}else {vErrors.push(err16);}errors++;}}}if(data7.retry !== undefined){let data9 = data7.retry;if(data9 && typeof data9 == "object" && !Array.isArray(data9)){for(const key2 in data9){if(!(((key2 === "max_attempts") || (key2 === "backoff_ms")) || (key2 === "strategy"))){const err17 = {instancePath:instancePath+"/policies/retry",schemaPath:"../policies.schema.json/properties/retry/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key2},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err17];}else {vErrors.push(err17);}errors++;}}if(data9.max_attempts !== undefined){let data10 = data9.max_attempts;if(!(((typeof data10 == "number") && (!(data10 % 1) && !isNaN(data10))) && (isFinite(data10)))){const err18 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"../policies.schema.json/properties/retry/properties/max_attempts/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err18];}else {vErrors.push(err18);}errors++;}if((typeof data10 == "number") && (isFinite(data10))){if(data10 < 0 || isNaN(data10)){const err19 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"../policies.schema.json/properties/retry/properties/max_attempts/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err19];}else {vErrors.push(err19);}errors++;}}}if(data9.backoff_ms !== undefined){let data11 = data9.backoff_ms;const _errs27 = errors;let valid4 = false;const _errs28 = errors;if(!(((typeof data11 == "number") && (!(data11 % 1) && !isNaN(data11))) && (isFinite(data11)))){const err20 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err20];}else {vErrors.push(err20);}errors++;}if((typeof data11 == "number") && (isFinite(data11))){if(data11 < 0 || isNaN(data11)){const err21 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err21];}else {vErrors.push(err21);}errors++;}}var _valid0 = _errs28 === errors;valid4 = valid4 || _valid0;const _errs30 = errors;if(Array.isArray(data11)){const len0 = data11.length;for(let i0=0; i0<len0; i0++){let data12 = data11[i0];if(!(((typeof data12 == "number") && (!(data12 % 1) && !isNaN(data12))) && (isFinite(data12)))){const err22 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err22];}else {vErrors.push(err22);}errors++;}if((typeof data12 == "number") && (isFinite(data12))){if(data12 < 0 || isNaN(data12)){const err23 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err23];}else {vErrors.push(err23);}errors++;}}}}else {const err24 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err24];}else {vErrors.push(err24);}errors++;}var _valid0 = _errs30 === errors;valid4 = valid4 || _valid0;if(!valid4){const err25 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err25];}else {vErrors.push(err25);}errors++;}else {errors = _errs27;if(vErrors !== null){if(_errs27){vErrors.length = _errs27;}else {vErrors = null;}}}}if(data9.strategy !== undefined){let data13 = data9.strategy;if(typeof data13 !== "string"){const err26 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"../policies.schema.json/properties/retry/properties/strategy/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err26];}else {vErrors.push(err26);}errors++;}if(!((data13 === "fixed") || (data13 === "exp"))){const err27 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"../policies.schema.json/properties/retry/properties/strategy/enum",keyword:"enum",params:{allowedValues: schema32.properties.retry.properties.strategy.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err27];}else {vErrors.push(err27);}errors++;}}}else {const err28 = {instancePath:instancePath+"/policies/retry",schemaPath:"../policies.schema.json/properties/retry/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err28];}else {vErrors.push(err28);}errors++;}}if(data7.dlq !== undefined){let data14 = data7.dlq;if(data14 && typeof data14 == "object" && !Array.isArray(data14)){for(const key3 in data14){if(!((key3 === "enabled") || (key3 === "target"))){const err29 = {instancePath:instancePath+"/policies/dlq",schemaPath:"../policies.schema.json/properties/dlq/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key3},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err29];}else {vErrors.push(err29);}errors++;}}if(data14.enabled !== undefined){if(typeof data14.enabled !== "boolean"){const err30 = {instancePath:instancePath+"/policies/dlq/enabled",schemaPath:"../policies.schema.json/properties/dlq/properties/enabled/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"};if(vErrors === null){vErrors = [err30];}else {vErrors.push(err30);}errors++;}}if(data14.target !== undefined){if(typeof data14.target !== "string"){const err31 = {instancePath:instancePath+"/policies/dlq/target",schemaPath:"../policies.schema.json/properties/dlq/properties/target/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err31];}else {vErrors.push(err31);}errors++;}}}else {const err32 = {instancePath:instancePath+"/policies/dlq",schemaPath:"../policies.schema.json/properties/dlq/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err32];}else {vErrors.push(err32);}errors++;}}if(data7.budget_ms !== undefined){let data17 = data7.budget_ms;if(!(((typeof data17 == "number") && (!(data17 % 1) && !isNaN(data17))) && (isFinite(data17)))){const err33 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"../policies.schema.json/properties/budget_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err33];}else {vErrors.push(err33);}errors++;}if((typeof data17 == "number") && (isFinite(data17))){if(data17 < 0 || isNaN(data17)){const err34 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"../policies.schema.json/properties/budget_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err34];}else {vErrors.push(err34);}errors++;}}}}else {const err35 = {instancePath:instancePath+"/policies",schemaPath:"../policies.schema.json/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err35];}else {vErrors.push(err35);}errors++;}}}else {const err36 = {instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err36];}else {vErrors.push(err36);}errors++;}validate47.errors = vErrors;return errors === 0;}validate47.evaluated = {"props":true,"dynamicProps":false,"dynamicItems":false};const schema63 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://mova.dev/schemas/actions/regex_extract.schema.json","title":"Action: regex_extract","type":"object","required":["type","from","pattern"],"properties":{"type":{"const":"regex_extract"},"name":{"type":"string"},"from":{"type":"string","minLength":1},"pattern":{"type":"string"},"flags":{"type":"string"},"group":{"type":"integer","minimum":0},"save_as":{"type":"string"},"policies":{"$ref":"../policies.schema.json"}},"additionalProperties":false};function validate49(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="https://mova.dev/schemas/actions/regex_extract.schema.json" */;let vErrors = null;let errors = 0;const evaluated0 = validate49.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}if(data && typeof data == "object" && !Array.isArray(data)){if(data.type === undefined){const err0 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "type"},message:"must have required property '"+"type"+"'"};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}if(data.from === undefined){const err1 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "from"},message:"must have required property '"+"from"+"'"};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}if(data.pattern === undefined){const err2 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "pattern"},message:"must have required property '"+"pattern"+"'"};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}for(const key0 in data){if(!((((((((key0 === "type") || (key0 === "name")) || (key0 === "from")) || (key0 === "pattern")) || (key0 === "flags")) || (key0 === "group")) || (key0 === "save_as")) || (key0 === "policies"))){const err3 = {instancePath,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key0},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}}if(data.type !== undefined){if("regex_extract" !== data.type){const err4 = {instancePath:instancePath+"/type",schemaPath:"#/properties/type/const",keyword:"const",params:{allowedValue: "regex_extract"},message:"must be equal to constant"};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}}if(data.name !== undefined){if(typeof data.name !== "string"){const err5 = {instancePath:instancePath+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}}if(data.from !== undefined){let data2 = data.from;if(typeof data2 === "string"){if(func3(data2) < 1){const err6 = {instancePath:instancePath+"/from",schemaPath:"#/properties/from/minLength",keyword:"minLength",params:{limit: 1},message:"must NOT have fewer than 1 characters"};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}}else {const err7 = {instancePath:instancePath+"/from",schemaPath:"#/properties/from/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}}if(data.pattern !== undefined){if(typeof data.pattern !== "string"){const err8 = {instancePath:instancePath+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}}if(data.flags !== undefined){if(typeof data.flags !== "string"){const err9 = {instancePath:instancePath+"/flags",schemaPath:"#/properties/flags/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}}if(data.group !== undefined){let data5 = data.group;if(!(((typeof data5 == "number") && (!(data5 % 1) && !isNaN(data5))) && (isFinite(data5)))){const err10 = {instancePath:instancePath+"/group",schemaPath:"#/properties/group/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}if((typeof data5 == "number") && (isFinite(data5))){if(data5 < 0 || isNaN(data5)){const err11 = {instancePath:instancePath+"/group",schemaPath:"#/properties/group/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}}}if(data.save_as !== undefined){if(typeof data.save_as !== "string"){const err12 = {instancePath:instancePath+"/save_as",schemaPath:"#/properties/save_as/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}}if(data.policies !== undefined){let data7 = data.policies;if(data7 && typeof data7 == "object" && !Array.isArray(data7)){for(const key1 in data7){if(!((((key1 === "timeout_ms") || (key1 === "retry")) || (key1 === "dlq")) || (key1 === "budget_ms"))){const err13 = {instancePath:instancePath+"/policies",schemaPath:"../policies.schema.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key1},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}}if(data7.timeout_ms !== undefined){let data8 = data7.timeout_ms;if(!(((typeof data8 == "number") && (!(data8 % 1) && !isNaN(data8))) && (isFinite(data8)))){const err14 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"../policies.schema.json/properties/timeout_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}if((typeof data8 == "number") && (isFinite(data8))){if(data8 < 0 || isNaN(data8)){const err15 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"../policies.schema.json/properties/timeout_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}}}if(data7.retry !== undefined){let data9 = data7.retry;if(data9 && typeof data9 == "object" && !Array.isArray(data9)){for(const key2 in data9){if(!(((key2 === "max_attempts") || (key2 === "backoff_ms")) || (key2 === "strategy"))){const err16 = {instancePath:instancePath+"/policies/retry",schemaPath:"../policies.schema.json/properties/retry/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key2},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err16];}else {vErrors.push(err16);}errors++;}}if(data9.max_attempts !== undefined){let data10 = data9.max_attempts;if(!(((typeof data10 == "number") && (!(data10 % 1) && !isNaN(data10))) && (isFinite(data10)))){const err17 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"../policies.schema.json/properties/retry/properties/max_attempts/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err17];}else {vErrors.push(err17);}errors++;}if((typeof data10 == "number") && (isFinite(data10))){if(data10 < 0 || isNaN(data10)){const err18 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"../policies.schema.json/properties/retry/properties/max_attempts/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err18];}else {vErrors.push(err18);}errors++;}}}if(data9.backoff_ms !== undefined){let data11 = data9.backoff_ms;const _errs27 = errors;let valid4 = false;const _errs28 = errors;if(!(((typeof data11 == "number") && (!(data11 % 1) && !isNaN(data11))) && (isFinite(data11)))){const err19 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err19];}else {vErrors.push(err19);}errors++;}if((typeof data11 == "number") && (isFinite(data11))){if(data11 < 0 || isNaN(data11)){const err20 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err20];}else {vErrors.push(err20);}errors++;}}var _valid0 = _errs28 === errors;valid4 = valid4 || _valid0;const _errs30 = errors;if(Array.isArray(data11)){const len0 = data11.length;for(let i0=0; i0<len0; i0++){let data12 = data11[i0];if(!(((typeof data12 == "number") && (!(data12 % 1) && !isNaN(data12))) && (isFinite(data12)))){const err21 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err21];}else {vErrors.push(err21);}errors++;}if((typeof data12 == "number") && (isFinite(data12))){if(data12 < 0 || isNaN(data12)){const err22 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err22];}else {vErrors.push(err22);}errors++;}}}}else {const err23 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err23];}else {vErrors.push(err23);}errors++;}var _valid0 = _errs30 === errors;valid4 = valid4 || _valid0;if(!valid4){const err24 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err24];}else {vErrors.push(err24);}errors++;}else {errors = _errs27;if(vErrors !== null){if(_errs27){vErrors.length = _errs27;}else {vErrors = null;}}}}if(data9.strategy !== undefined){let data13 = data9.strategy;if(typeof data13 !== "string"){const err25 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"../policies.schema.json/properties/retry/properties/strategy/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err25];}else {vErrors.push(err25);}errors++;}if(!((data13 === "fixed") || (data13 === "exp"))){const err26 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"../policies.schema.json/properties/retry/properties/strategy/enum",keyword:"enum",params:{allowedValues: schema32.properties.retry.properties.strategy.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err26];}else {vErrors.push(err26);}errors++;}}}else {const err27 = {instancePath:instancePath+"/policies/retry",schemaPath:"../policies.schema.json/properties/retry/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err27];}else {vErrors.push(err27);}errors++;}}if(data7.dlq !== undefined){let data14 = data7.dlq;if(data14 && typeof data14 == "object" && !Array.isArray(data14)){for(const key3 in data14){if(!((key3 === "enabled") || (key3 === "target"))){const err28 = {instancePath:instancePath+"/policies/dlq",schemaPath:"../policies.schema.json/properties/dlq/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key3},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err28];}else {vErrors.push(err28);}errors++;}}if(data14.enabled !== undefined){if(typeof data14.enabled !== "boolean"){const err29 = {instancePath:instancePath+"/policies/dlq/enabled",schemaPath:"../policies.schema.json/properties/dlq/properties/enabled/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"};if(vErrors === null){vErrors = [err29];}else {vErrors.push(err29);}errors++;}}if(data14.target !== undefined){if(typeof data14.target !== "string"){const err30 = {instancePath:instancePath+"/policies/dlq/target",schemaPath:"../policies.schema.json/properties/dlq/properties/target/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err30];}else {vErrors.push(err30);}errors++;}}}else {const err31 = {instancePath:instancePath+"/policies/dlq",schemaPath:"../policies.schema.json/properties/dlq/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err31];}else {vErrors.push(err31);}errors++;}}if(data7.budget_ms !== undefined){let data17 = data7.budget_ms;if(!(((typeof data17 == "number") && (!(data17 % 1) && !isNaN(data17))) && (isFinite(data17)))){const err32 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"../policies.schema.json/properties/budget_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err32];}else {vErrors.push(err32);}errors++;}if((typeof data17 == "number") && (isFinite(data17))){if(data17 < 0 || isNaN(data17)){const err33 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"../policies.schema.json/properties/budget_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err33];}else {vErrors.push(err33);}errors++;}}}}else {const err34 = {instancePath:instancePath+"/policies",schemaPath:"../policies.schema.json/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err34];}else {vErrors.push(err34);}errors++;}}}else {const err35 = {instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err35];}else {vErrors.push(err35);}errors++;}validate49.errors = vErrors;return errors === 0;}validate49.evaluated = {"props":true,"dynamicProps":false,"dynamicItems":false};const schema65 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://mova.dev/schemas/actions/base64.schema.json","title":"Action: base64","type":"object","required":["type","mode"],"properties":{"type":{"const":"base64"},"name":{"type":"string"},"mode":{"type":"string","enum":["encode","decode"]},"from":{"type":"string"},"text":{"type":"string"},"save_as":{"type":"string"},"policies":{"$ref":"../policies.schema.json"}},"additionalProperties":false};function validate51(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="https://mova.dev/schemas/actions/base64.schema.json" */;let vErrors = null;let errors = 0;const evaluated0 = validate51.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}if(data && typeof data == "object" && !Array.isArray(data)){if(data.type === undefined){const err0 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "type"},message:"must have required property '"+"type"+"'"};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}if(data.mode === undefined){const err1 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "mode"},message:"must have required property '"+"mode"+"'"};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}for(const key0 in data){if(!(((((((key0 === "type") || (key0 === "name")) || (key0 === "mode")) || (key0 === "from")) || (key0 === "text")) || (key0 === "save_as")) || (key0 === "policies"))){const err2 = {instancePath,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key0},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}}if(data.type !== undefined){if("base64" !== data.type){const err3 = {instancePath:instancePath+"/type",schemaPath:"#/properties/type/const",keyword:"const",params:{allowedValue: "base64"},message:"must be equal to constant"};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}}if(data.name !== undefined){if(typeof data.name !== "string"){const err4 = {instancePath:instancePath+"/name",schemaPath:"#/properties/name/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}}if(data.mode !== undefined){let data2 = data.mode;if(typeof data2 !== "string"){const err5 = {instancePath:instancePath+"/mode",schemaPath:"#/properties/mode/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}if(!((data2 === "encode") || (data2 === "decode"))){const err6 = {instancePath:instancePath+"/mode",schemaPath:"#/properties/mode/enum",keyword:"enum",params:{allowedValues: schema65.properties.mode.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}}if(data.from !== undefined){if(typeof data.from !== "string"){const err7 = {instancePath:instancePath+"/from",schemaPath:"#/properties/from/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}}if(data.text !== undefined){if(typeof data.text !== "string"){const err8 = {instancePath:instancePath+"/text",schemaPath:"#/properties/text/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}}if(data.save_as !== undefined){if(typeof data.save_as !== "string"){const err9 = {instancePath:instancePath+"/save_as",schemaPath:"#/properties/save_as/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}}if(data.policies !== undefined){let data6 = data.policies;if(data6 && typeof data6 == "object" && !Array.isArray(data6)){for(const key1 in data6){if(!((((key1 === "timeout_ms") || (key1 === "retry")) || (key1 === "dlq")) || (key1 === "budget_ms"))){const err10 = {instancePath:instancePath+"/policies",schemaPath:"../policies.schema.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key1},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}}if(data6.timeout_ms !== undefined){let data7 = data6.timeout_ms;if(!(((typeof data7 == "number") && (!(data7 % 1) && !isNaN(data7))) && (isFinite(data7)))){const err11 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"../policies.schema.json/properties/timeout_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}if((typeof data7 == "number") && (isFinite(data7))){if(data7 < 0 || isNaN(data7)){const err12 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"../policies.schema.json/properties/timeout_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}}}if(data6.retry !== undefined){let data8 = data6.retry;if(data8 && typeof data8 == "object" && !Array.isArray(data8)){for(const key2 in data8){if(!(((key2 === "max_attempts") || (key2 === "backoff_ms")) || (key2 === "strategy"))){const err13 = {instancePath:instancePath+"/policies/retry",schemaPath:"../policies.schema.json/properties/retry/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key2},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}}if(data8.max_attempts !== undefined){let data9 = data8.max_attempts;if(!(((typeof data9 == "number") && (!(data9 % 1) && !isNaN(data9))) && (isFinite(data9)))){const err14 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"../policies.schema.json/properties/retry/properties/max_attempts/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}if((typeof data9 == "number") && (isFinite(data9))){if(data9 < 0 || isNaN(data9)){const err15 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"../policies.schema.json/properties/retry/properties/max_attempts/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}}}if(data8.backoff_ms !== undefined){let data10 = data8.backoff_ms;const _errs25 = errors;let valid4 = false;const _errs26 = errors;if(!(((typeof data10 == "number") && (!(data10 % 1) && !isNaN(data10))) && (isFinite(data10)))){const err16 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err16];}else {vErrors.push(err16);}errors++;}if((typeof data10 == "number") && (isFinite(data10))){if(data10 < 0 || isNaN(data10)){const err17 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err17];}else {vErrors.push(err17);}errors++;}}var _valid0 = _errs26 === errors;valid4 = valid4 || _valid0;const _errs28 = errors;if(Array.isArray(data10)){const len0 = data10.length;for(let i0=0; i0<len0; i0++){let data11 = data10[i0];if(!(((typeof data11 == "number") && (!(data11 % 1) && !isNaN(data11))) && (isFinite(data11)))){const err18 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err18];}else {vErrors.push(err18);}errors++;}if((typeof data11 == "number") && (isFinite(data11))){if(data11 < 0 || isNaN(data11)){const err19 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err19];}else {vErrors.push(err19);}errors++;}}}}else {const err20 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err20];}else {vErrors.push(err20);}errors++;}var _valid0 = _errs28 === errors;valid4 = valid4 || _valid0;if(!valid4){const err21 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"../policies.schema.json/properties/retry/properties/backoff_ms/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err21];}else {vErrors.push(err21);}errors++;}else {errors = _errs25;if(vErrors !== null){if(_errs25){vErrors.length = _errs25;}else {vErrors = null;}}}}if(data8.strategy !== undefined){let data12 = data8.strategy;if(typeof data12 !== "string"){const err22 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"../policies.schema.json/properties/retry/properties/strategy/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err22];}else {vErrors.push(err22);}errors++;}if(!((data12 === "fixed") || (data12 === "exp"))){const err23 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"../policies.schema.json/properties/retry/properties/strategy/enum",keyword:"enum",params:{allowedValues: schema32.properties.retry.properties.strategy.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err23];}else {vErrors.push(err23);}errors++;}}}else {const err24 = {instancePath:instancePath+"/policies/retry",schemaPath:"../policies.schema.json/properties/retry/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err24];}else {vErrors.push(err24);}errors++;}}if(data6.dlq !== undefined){let data13 = data6.dlq;if(data13 && typeof data13 == "object" && !Array.isArray(data13)){for(const key3 in data13){if(!((key3 === "enabled") || (key3 === "target"))){const err25 = {instancePath:instancePath+"/policies/dlq",schemaPath:"../policies.schema.json/properties/dlq/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key3},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err25];}else {vErrors.push(err25);}errors++;}}if(data13.enabled !== undefined){if(typeof data13.enabled !== "boolean"){const err26 = {instancePath:instancePath+"/policies/dlq/enabled",schemaPath:"../policies.schema.json/properties/dlq/properties/enabled/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"};if(vErrors === null){vErrors = [err26];}else {vErrors.push(err26);}errors++;}}if(data13.target !== undefined){if(typeof data13.target !== "string"){const err27 = {instancePath:instancePath+"/policies/dlq/target",schemaPath:"../policies.schema.json/properties/dlq/properties/target/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err27];}else {vErrors.push(err27);}errors++;}}}else {const err28 = {instancePath:instancePath+"/policies/dlq",schemaPath:"../policies.schema.json/properties/dlq/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err28];}else {vErrors.push(err28);}errors++;}}if(data6.budget_ms !== undefined){let data16 = data6.budget_ms;if(!(((typeof data16 == "number") && (!(data16 % 1) && !isNaN(data16))) && (isFinite(data16)))){const err29 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"../policies.schema.json/properties/budget_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err29];}else {vErrors.push(err29);}errors++;}if((typeof data16 == "number") && (isFinite(data16))){if(data16 < 0 || isNaN(data16)){const err30 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"../policies.schema.json/properties/budget_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err30];}else {vErrors.push(err30);}errors++;}}}}else {const err31 = {instancePath:instancePath+"/policies",schemaPath:"../policies.schema.json/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err31];}else {vErrors.push(err31);}errors++;}}}else {const err32 = {instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err32];}else {vErrors.push(err32);}errors++;}validate51.errors = vErrors;return errors === 0;}validate51.evaluated = {"props":true,"dynamicProps":false,"dynamicItems":false};const schema67 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://mova.dev/schemas/actions/vnl.schema.json","title":"Action: vnl (compile sentence/AST into canonical actions)","type":"object","required":["type","params"],"properties":{"type":{"const":"vnl"},"params":{"oneOf":[{"type":"object","required":["sentence"],"properties":{"sentence":{"type":"string","minLength":1},"lang":{"type":"string","description":"BCP-47 tag, e.g. uk, en"},"expand":{"enum":["inline","call"],"default":"inline"},"save_as":{"type":"string"}},"unevaluatedProperties":false},{"type":"object","required":["ast"],"properties":{"ast":{"$ref":"../vnl.schema.json"},"expand":{"enum":["inline","call"],"default":"inline"},"save_as":{"type":"string"}},"unevaluatedProperties":false}]}},"unevaluatedProperties":false};const schema68 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://mova.dev/schemas/vnl.schema.json","title":"VNL AST (minimal)","type":"object","required":["steps"],"properties":{"directives":{"type":"array","items":{"type":"object","required":["key","value"],"properties":{"key":{"type":"string","enum":["timeout_ms","retry.max_attempts","retry.backoff_ms","dlq.enabled","dlq.target","budget_ms"]},"value":{}},"additionalProperties":false}},"steps":{"type":"array","minItems":1,"items":{"type":"object","required":["type"],"properties":{"type":{"type":"string"},"kv":{"type":"object","additionalProperties":true}},"additionalProperties":false}}},"additionalProperties":false};function validate53(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="https://mova.dev/schemas/actions/vnl.schema.json" */;let vErrors = null;let errors = 0;const evaluated0 = validate53.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}if(data && typeof data == "object" && !Array.isArray(data)){if(data.type === undefined){const err0 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "type"},message:"must have required property '"+"type"+"'"};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}if(data.params === undefined){const err1 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "params"},message:"must have required property '"+"params"+"'"};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}if(data.type !== undefined){if("vnl" !== data.type){const err2 = {instancePath:instancePath+"/type",schemaPath:"#/properties/type/const",keyword:"const",params:{allowedValue: "vnl"},message:"must be equal to constant"};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}}if(data.params !== undefined){let data1 = data.params;const _errs3 = errors;let valid1 = false;let passing0 = null;const _errs4 = errors;if(data1 && typeof data1 == "object" && !Array.isArray(data1)){if(data1.sentence === undefined){const err3 = {instancePath:instancePath+"/params",schemaPath:"#/properties/params/oneOf/0/required",keyword:"required",params:{missingProperty: "sentence"},message:"must have required property '"+"sentence"+"'"};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}if(data1.sentence !== undefined){let data2 = data1.sentence;if(typeof data2 === "string"){if(func3(data2) < 1){const err4 = {instancePath:instancePath+"/params/sentence",schemaPath:"#/properties/params/oneOf/0/properties/sentence/minLength",keyword:"minLength",params:{limit: 1},message:"must NOT have fewer than 1 characters"};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}}else {const err5 = {instancePath:instancePath+"/params/sentence",schemaPath:"#/properties/params/oneOf/0/properties/sentence/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}}if(data1.lang !== undefined){if(typeof data1.lang !== "string"){const err6 = {instancePath:instancePath+"/params/lang",schemaPath:"#/properties/params/oneOf/0/properties/lang/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}}if(data1.expand !== undefined){let data4 = data1.expand;if(!((data4 === "inline") || (data4 === "call"))){const err7 = {instancePath:instancePath+"/params/expand",schemaPath:"#/properties/params/oneOf/0/properties/expand/enum",keyword:"enum",params:{allowedValues: schema67.properties.params.oneOf[0].properties.expand.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}}if(data1.save_as !== undefined){if(typeof data1.save_as !== "string"){const err8 = {instancePath:instancePath+"/params/save_as",schemaPath:"#/properties/params/oneOf/0/properties/save_as/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}}for(const key0 in data1){if((((key0 !== "sentence") && (key0 !== "lang")) && (key0 !== "expand")) && (key0 !== "save_as")){const err9 = {instancePath:instancePath+"/params",schemaPath:"#/properties/params/oneOf/0/unevaluatedProperties",keyword:"unevaluatedProperties",params:{unevaluatedProperty: key0},message:"must NOT have unevaluated properties"};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}}}else {const err10 = {instancePath:instancePath+"/params",schemaPath:"#/properties/params/oneOf/0/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}var _valid0 = _errs4 === errors;if(_valid0){valid1 = true;passing0 = 0;var props0 = true;}const _errs14 = errors;if(data1 && typeof data1 == "object" && !Array.isArray(data1)){if(data1.ast === undefined){const err11 = {instancePath:instancePath+"/params",schemaPath:"#/properties/params/oneOf/1/required",keyword:"required",params:{missingProperty: "ast"},message:"must have required property '"+"ast"+"'"};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}if(data1.ast !== undefined){let data6 = data1.ast;if(data6 && typeof data6 == "object" && !Array.isArray(data6)){if(data6.steps === undefined){const err12 = {instancePath:instancePath+"/params/ast",schemaPath:"../vnl.schema.json/required",keyword:"required",params:{missingProperty: "steps"},message:"must have required property '"+"steps"+"'"};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}for(const key1 in data6){if(!((key1 === "directives") || (key1 === "steps"))){const err13 = {instancePath:instancePath+"/params/ast",schemaPath:"../vnl.schema.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key1},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}}if(data6.directives !== undefined){let data7 = data6.directives;if(Array.isArray(data7)){const len0 = data7.length;for(let i0=0; i0<len0; i0++){let data8 = data7[i0];if(data8 && typeof data8 == "object" && !Array.isArray(data8)){if(data8.key === undefined){const err14 = {instancePath:instancePath+"/params/ast/directives/" + i0,schemaPath:"../vnl.schema.json/properties/directives/items/required",keyword:"required",params:{missingProperty: "key"},message:"must have required property '"+"key"+"'"};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}if(data8.value === undefined){const err15 = {instancePath:instancePath+"/params/ast/directives/" + i0,schemaPath:"../vnl.schema.json/properties/directives/items/required",keyword:"required",params:{missingProperty: "value"},message:"must have required property '"+"value"+"'"};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}for(const key2 in data8){if(!((key2 === "key") || (key2 === "value"))){const err16 = {instancePath:instancePath+"/params/ast/directives/" + i0,schemaPath:"../vnl.schema.json/properties/directives/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key2},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err16];}else {vErrors.push(err16);}errors++;}}if(data8.key !== undefined){let data9 = data8.key;if(typeof data9 !== "string"){const err17 = {instancePath:instancePath+"/params/ast/directives/" + i0+"/key",schemaPath:"../vnl.schema.json/properties/directives/items/properties/key/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err17];}else {vErrors.push(err17);}errors++;}if(!((((((data9 === "timeout_ms") || (data9 === "retry.max_attempts")) || (data9 === "retry.backoff_ms")) || (data9 === "dlq.enabled")) || (data9 === "dlq.target")) || (data9 === "budget_ms"))){const err18 = {instancePath:instancePath+"/params/ast/directives/" + i0+"/key",schemaPath:"../vnl.schema.json/properties/directives/items/properties/key/enum",keyword:"enum",params:{allowedValues: schema68.properties.directives.items.properties.key.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err18];}else {vErrors.push(err18);}errors++;}}}else {const err19 = {instancePath:instancePath+"/params/ast/directives/" + i0,schemaPath:"../vnl.schema.json/properties/directives/items/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err19];}else {vErrors.push(err19);}errors++;}}}else {const err20 = {instancePath:instancePath+"/params/ast/directives",schemaPath:"../vnl.schema.json/properties/directives/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err20];}else {vErrors.push(err20);}errors++;}}if(data6.steps !== undefined){let data10 = data6.steps;if(Array.isArray(data10)){if(data10.length < 1){const err21 = {instancePath:instancePath+"/params/ast/steps",schemaPath:"../vnl.schema.json/properties/steps/minItems",keyword:"minItems",params:{limit: 1},message:"must NOT have fewer than 1 items"};if(vErrors === null){vErrors = [err21];}else {vErrors.push(err21);}errors++;}const len1 = data10.length;for(let i1=0; i1<len1; i1++){let data11 = data10[i1];if(data11 && typeof data11 == "object" && !Array.isArray(data11)){if(data11.type === undefined){const err22 = {instancePath:instancePath+"/params/ast/steps/" + i1,schemaPath:"../vnl.schema.json/properties/steps/items/required",keyword:"required",params:{missingProperty: "type"},message:"must have required property '"+"type"+"'"};if(vErrors === null){vErrors = [err22];}else {vErrors.push(err22);}errors++;}for(const key3 in data11){if(!((key3 === "type") || (key3 === "kv"))){const err23 = {instancePath:instancePath+"/params/ast/steps/" + i1,schemaPath:"../vnl.schema.json/properties/steps/items/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key3},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err23];}else {vErrors.push(err23);}errors++;}}if(data11.type !== undefined){if(typeof data11.type !== "string"){const err24 = {instancePath:instancePath+"/params/ast/steps/" + i1+"/type",schemaPath:"../vnl.schema.json/properties/steps/items/properties/type/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err24];}else {vErrors.push(err24);}errors++;}}if(data11.kv !== undefined){let data13 = data11.kv;if(data13 && typeof data13 == "object" && !Array.isArray(data13)){}else {const err25 = {instancePath:instancePath+"/params/ast/steps/" + i1+"/kv",schemaPath:"../vnl.schema.json/properties/steps/items/properties/kv/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err25];}else {vErrors.push(err25);}errors++;}}}else {const err26 = {instancePath:instancePath+"/params/ast/steps/" + i1,schemaPath:"../vnl.schema.json/properties/steps/items/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err26];}else {vErrors.push(err26);}errors++;}}}else {const err27 = {instancePath:instancePath+"/params/ast/steps",schemaPath:"../vnl.schema.json/properties/steps/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err27];}else {vErrors.push(err27);}errors++;}}}else {const err28 = {instancePath:instancePath+"/params/ast",schemaPath:"../vnl.schema.json/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err28];}else {vErrors.push(err28);}errors++;}}if(data1.expand !== undefined){let data14 = data1.expand;if(!((data14 === "inline") || (data14 === "call"))){const err29 = {instancePath:instancePath+"/params/expand",schemaPath:"#/properties/params/oneOf/1/properties/expand/enum",keyword:"enum",params:{allowedValues: schema67.properties.params.oneOf[1].properties.expand.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err29];}else {vErrors.push(err29);}errors++;}}if(data1.save_as !== undefined){if(typeof data1.save_as !== "string"){const err30 = {instancePath:instancePath+"/params/save_as",schemaPath:"#/properties/params/oneOf/1/properties/save_as/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err30];}else {vErrors.push(err30);}errors++;}}for(const key4 in data1){if(((key4 !== "ast") && (key4 !== "expand")) && (key4 !== "save_as")){const err31 = {instancePath:instancePath+"/params",schemaPath:"#/properties/params/oneOf/1/unevaluatedProperties",keyword:"unevaluatedProperties",params:{unevaluatedProperty: key4},message:"must NOT have unevaluated properties"};if(vErrors === null){vErrors = [err31];}else {vErrors.push(err31);}errors++;}}}else {const err32 = {instancePath:instancePath+"/params",schemaPath:"#/properties/params/oneOf/1/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err32];}else {vErrors.push(err32);}errors++;}var _valid0 = _errs14 === errors;if(_valid0 && valid1){valid1 = false;passing0 = [passing0, 1];}else {if(_valid0){valid1 = true;passing0 = 1;if(props0 !== true){props0 = true;}}}if(!valid1){const err33 = {instancePath:instancePath+"/params",schemaPath:"#/properties/params/oneOf",keyword:"oneOf",params:{passingSchemas: passing0},message:"must match exactly one schema in oneOf"};if(vErrors === null){vErrors = [err33];}else {vErrors.push(err33);}errors++;}else {errors = _errs3;if(vErrors !== null){if(_errs3){vErrors.length = _errs3;}else {vErrors = null;}}}}for(const key5 in data){if((key5 !== "type") && (key5 !== "params")){const err34 = {instancePath,schemaPath:"#/unevaluatedProperties",keyword:"unevaluatedProperties",params:{unevaluatedProperty: key5},message:"must NOT have unevaluated properties"};if(vErrors === null){vErrors = [err34];}else {vErrors.push(err34);}errors++;}}}else {const err35 = {instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err35];}else {vErrors.push(err35);}errors++;}validate53.errors = vErrors;return errors === 0;}validate53.evaluated = {"props":true,"dynamicProps":false,"dynamicItems":false};const schema69 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://mova.dev/schemas/actions/if.schema.json","title":"Action: if","type":"object","required":["type","params"],"properties":{"type":{"const":"if"},"params":{"type":"object","required":["when","then"],"properties":{"when":{"type":"object","required":["path"],"properties":{"path":{"type":"string","minLength":1},"eq":{},"ne":{},"gt":{},"gte":{},"lt":{},"lte":{},"contains":{},"exists":{"type":"boolean"}},"anyOf":[{"properties":{"eq":{}},"required":["eq"]},{"properties":{"ne":{}},"required":["ne"]},{"properties":{"gt":{}},"required":["gt"]},{"properties":{"gte":{}},"required":["gte"]},{"properties":{"lt":{}},"required":["lt"]},{"properties":{"lte":{}},"required":["lte"]},{"properties":{"contains":{}},"required":["contains"]},{"properties":{"exists":{"type":"boolean"}},"required":["exists"]}],"unevaluatedProperties":false},"then":{"type":"array","minItems":1,"items":{"$ref":"../envelope.3.3.schema.json#/properties/actions/items"}},"else":{"type":"array","minItems":1,"items":{"$ref":"../envelope.3.3.schema.json#/properties/actions/items"}}},"unevaluatedProperties":false}},"unevaluatedProperties":false};const schema70 = {"oneOf":[{"$ref":"https://mova.dev/schemas/actions/print/1.0.1/schema.json"},{"$ref":"https://mova.dev/schemas/actions/http_fetch/1.2.0/schema.json"},{"$ref":"https://mova.dev/schemas/actions/set/1.0.1/schema.json"},{"$ref":"actions/sleep.schema.json"},{"$ref":"actions/transform.schema.json"},{"$ref":"actions/parse_json.schema.json"},{"$ref":"actions/log.schema.json"},{"$ref":"actions/assert.schema.json"},{"$ref":"actions/call.schema.json"},{"$ref":"actions/emit_event.schema.json"},{"$ref":"actions/tool_call.schema.json"},{"$ref":"actions/json_patch.schema.json"},{"$ref":"actions/file_read.schema.json"},{"$ref":"actions/file_write.schema.json"},{"$ref":"actions/regex_extract.schema.json"},{"$ref":"actions/base64.schema.json"},{"$ref":"actions/vnl.schema.json"},{"$ref":"actions/if.schema.json"},{"$ref":"actions/repeat.schema.json"},{"$ref":"actions/parallel.schema.json"}]};const schema71 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://mova.dev/schemas/actions/repeat.schema.json","title":"Action: repeat","type":"object","required":["type","params"],"properties":{"type":{"const":"repeat"},"params":{"type":"object","required":["times","body"],"properties":{"times":{"type":"integer","minimum":1},"body":{"type":"array","minItems":1,"items":{"$ref":"../envelope.3.3.schema.json#/properties/actions/items"}}},"unevaluatedProperties":false}},"unevaluatedProperties":false};const wrapper1 = {validate: validate56};function validate74(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="https://mova.dev/schemas/actions/repeat.schema.json" */;let vErrors = null;let errors = 0;const evaluated0 = validate74.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}if(data && typeof data == "object" && !Array.isArray(data)){if(data.type === undefined){const err0 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "type"},message:"must have required property '"+"type"+"'"};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}if(data.params === undefined){const err1 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "params"},message:"must have required property '"+"params"+"'"};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}if(data.type !== undefined){if("repeat" !== data.type){const err2 = {instancePath:instancePath+"/type",schemaPath:"#/properties/type/const",keyword:"const",params:{allowedValue: "repeat"},message:"must be equal to constant"};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}}if(data.params !== undefined){let data1 = data.params;if(data1 && typeof data1 == "object" && !Array.isArray(data1)){if(data1.times === undefined){const err3 = {instancePath:instancePath+"/params",schemaPath:"#/properties/params/required",keyword:"required",params:{missingProperty: "times"},message:"must have required property '"+"times"+"'"};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}if(data1.body === undefined){const err4 = {instancePath:instancePath+"/params",schemaPath:"#/properties/params/required",keyword:"required",params:{missingProperty: "body"},message:"must have required property '"+"body"+"'"};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}if(data1.times !== undefined){let data2 = data1.times;if(!(((typeof data2 == "number") && (!(data2 % 1) && !isNaN(data2))) && (isFinite(data2)))){const err5 = {instancePath:instancePath+"/params/times",schemaPath:"#/properties/params/properties/times/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}if((typeof data2 == "number") && (isFinite(data2))){if(data2 < 1 || isNaN(data2)){const err6 = {instancePath:instancePath+"/params/times",schemaPath:"#/properties/params/properties/times/minimum",keyword:"minimum",params:{comparison: ">=", limit: 1},message:"must be >= 1"};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}}}if(data1.body !== undefined){let data3 = data1.body;if(Array.isArray(data3)){if(data3.length < 1){const err7 = {instancePath:instancePath+"/params/body",schemaPath:"#/properties/params/properties/body/minItems",keyword:"minItems",params:{limit: 1},message:"must NOT have fewer than 1 items"};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}const len0 = data3.length;for(let i0=0; i0<len0; i0++){if(!(wrapper1.validate(data3[i0], {instancePath:instancePath+"/params/body/" + i0,parentData:data3,parentDataProperty:i0,rootData,dynamicAnchors}))){vErrors = vErrors === null ? wrapper1.validate.errors : vErrors.concat(wrapper1.validate.errors);errors = vErrors.length;}}}else {const err8 = {instancePath:instancePath+"/params/body",schemaPath:"#/properties/params/properties/body/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}}for(const key0 in data1){if((key0 !== "times") && (key0 !== "body")){const err9 = {instancePath:instancePath+"/params",schemaPath:"#/properties/params/unevaluatedProperties",keyword:"unevaluatedProperties",params:{unevaluatedProperty: key0},message:"must NOT have unevaluated properties"};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}}}else {const err10 = {instancePath:instancePath+"/params",schemaPath:"#/properties/params/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}}for(const key1 in data){if((key1 !== "type") && (key1 !== "params")){const err11 = {instancePath,schemaPath:"#/unevaluatedProperties",keyword:"unevaluatedProperties",params:{unevaluatedProperty: key1},message:"must NOT have unevaluated properties"};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}}}else {const err12 = {instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}validate74.errors = vErrors;return errors === 0;}validate74.evaluated = {"props":true,"dynamicProps":false,"dynamicItems":false};const schema72 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://mova.dev/schemas/actions/parallel.schema.json","title":"Action: parallel","type":"object","required":["type","params"],"properties":{"type":{"const":"parallel"},"params":{"type":"object","anyOf":[{"properties":{"branches":{"type":"array","minItems":2,"items":{"type":"array","minItems":1,"items":{"$ref":"../envelope.3.3.schema.json#/properties/actions/items"}}}},"required":["branches"],"additionalProperties":false},{"properties":{"tasks":{"type":"array","minItems":2,"items":{"type":"array","minItems":1,"items":{"$ref":"../envelope.3.3.schema.json#/properties/actions/items"}}}},"required":["tasks"],"additionalProperties":false}]}},"unevaluatedProperties":false};function validate76(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="https://mova.dev/schemas/actions/parallel.schema.json" */;let vErrors = null;let errors = 0;const evaluated0 = validate76.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}if(data && typeof data == "object" && !Array.isArray(data)){if(data.type === undefined){const err0 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "type"},message:"must have required property '"+"type"+"'"};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}if(data.params === undefined){const err1 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "params"},message:"must have required property '"+"params"+"'"};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}if(data.type !== undefined){if("parallel" !== data.type){const err2 = {instancePath:instancePath+"/type",schemaPath:"#/properties/type/const",keyword:"const",params:{allowedValue: "parallel"},message:"must be equal to constant"};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}}if(data.params !== undefined){let data1 = data.params;if(!(data1 && typeof data1 == "object" && !Array.isArray(data1))){const err3 = {instancePath:instancePath+"/params",schemaPath:"#/properties/params/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}const _errs4 = errors;let valid1 = false;const _errs5 = errors;if(data1 && typeof data1 == "object" && !Array.isArray(data1)){if(data1.branches === undefined){const err4 = {instancePath:instancePath+"/params",schemaPath:"#/properties/params/anyOf/0/required",keyword:"required",params:{missingProperty: "branches"},message:"must have required property '"+"branches"+"'"};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}for(const key0 in data1){if(!(key0 === "branches")){const err5 = {instancePath:instancePath+"/params",schemaPath:"#/properties/params/anyOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key0},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}}if(data1.branches !== undefined){let data2 = data1.branches;if(Array.isArray(data2)){if(data2.length < 2){const err6 = {instancePath:instancePath+"/params/branches",schemaPath:"#/properties/params/anyOf/0/properties/branches/minItems",keyword:"minItems",params:{limit: 2},message:"must NOT have fewer than 2 items"};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}const len0 = data2.length;for(let i0=0; i0<len0; i0++){let data3 = data2[i0];if(Array.isArray(data3)){if(data3.length < 1){const err7 = {instancePath:instancePath+"/params/branches/" + i0,schemaPath:"#/properties/params/anyOf/0/properties/branches/items/minItems",keyword:"minItems",params:{limit: 1},message:"must NOT have fewer than 1 items"};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}const len1 = data3.length;for(let i1=0; i1<len1; i1++){if(!(wrapper1.validate(data3[i1], {instancePath:instancePath+"/params/branches/" + i0+"/" + i1,parentData:data3,parentDataProperty:i1,rootData,dynamicAnchors}))){vErrors = vErrors === null ? wrapper1.validate.errors : vErrors.concat(wrapper1.validate.errors);errors = vErrors.length;}}}else {const err8 = {instancePath:instancePath+"/params/branches/" + i0,schemaPath:"#/properties/params/anyOf/0/properties/branches/items/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}}}else {const err9 = {instancePath:instancePath+"/params/branches",schemaPath:"#/properties/params/anyOf/0/properties/branches/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}}}var _valid0 = _errs5 === errors;valid1 = valid1 || _valid0;if(_valid0){var props1 = true;}const _errs12 = errors;if(data1 && typeof data1 == "object" && !Array.isArray(data1)){if(data1.tasks === undefined){const err10 = {instancePath:instancePath+"/params",schemaPath:"#/properties/params/anyOf/1/required",keyword:"required",params:{missingProperty: "tasks"},message:"must have required property '"+"tasks"+"'"};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}for(const key1 in data1){if(!(key1 === "tasks")){const err11 = {instancePath:instancePath+"/params",schemaPath:"#/properties/params/anyOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key1},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}}if(data1.tasks !== undefined){let data5 = data1.tasks;if(Array.isArray(data5)){if(data5.length < 2){const err12 = {instancePath:instancePath+"/params/tasks",schemaPath:"#/properties/params/anyOf/1/properties/tasks/minItems",keyword:"minItems",params:{limit: 2},message:"must NOT have fewer than 2 items"};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}const len2 = data5.length;for(let i2=0; i2<len2; i2++){let data6 = data5[i2];if(Array.isArray(data6)){if(data6.length < 1){const err13 = {instancePath:instancePath+"/params/tasks/" + i2,schemaPath:"#/properties/params/anyOf/1/properties/tasks/items/minItems",keyword:"minItems",params:{limit: 1},message:"must NOT have fewer than 1 items"};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}const len3 = data6.length;for(let i3=0; i3<len3; i3++){if(!(wrapper1.validate(data6[i3], {instancePath:instancePath+"/params/tasks/" + i2+"/" + i3,parentData:data6,parentDataProperty:i3,rootData,dynamicAnchors}))){vErrors = vErrors === null ? wrapper1.validate.errors : vErrors.concat(wrapper1.validate.errors);errors = vErrors.length;}}}else {const err14 = {instancePath:instancePath+"/params/tasks/" + i2,schemaPath:"#/properties/params/anyOf/1/properties/tasks/items/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}}}else {const err15 = {instancePath:instancePath+"/params/tasks",schemaPath:"#/properties/params/anyOf/1/properties/tasks/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}}}var _valid0 = _errs12 === errors;valid1 = valid1 || _valid0;if(_valid0){if(props1 !== true){props1 = true;}}if(!valid1){const err16 = {instancePath:instancePath+"/params",schemaPath:"#/properties/params/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err16];}else {vErrors.push(err16);}errors++;}else {errors = _errs4;if(vErrors !== null){if(_errs4){vErrors.length = _errs4;}else {vErrors = null;}}}}for(const key2 in data){if((key2 !== "type") && (key2 !== "params")){const err17 = {instancePath,schemaPath:"#/unevaluatedProperties",keyword:"unevaluatedProperties",params:{unevaluatedProperty: key2},message:"must NOT have unevaluated properties"};if(vErrors === null){vErrors = [err17];}else {vErrors.push(err17);}errors++;}}}else {const err18 = {instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err18];}else {vErrors.push(err18);}errors++;}validate76.errors = vErrors;return errors === 0;}validate76.evaluated = {"props":true,"dynamicProps":false,"dynamicItems":false};const wrapper0 = {validate: validate55};function validate56(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){let vErrors = null;let errors = 0;const evaluated0 = validate56.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}const _errs0 = errors;let valid0 = false;let passing0 = null;const _errs1 = errors;if(!(validate21(data, {instancePath,parentData,parentDataProperty,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate21.errors : vErrors.concat(validate21.errors);errors = vErrors.length;}else {var props0 = validate21.evaluated.props;}var _valid0 = _errs1 === errors;if(_valid0){valid0 = true;passing0 = 0;}const _errs2 = errors;if(!(validate23(data, {instancePath,parentData,parentDataProperty,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate23.errors : vErrors.concat(validate23.errors);errors = vErrors.length;}var _valid0 = _errs2 === errors;if(_valid0 && valid0){valid0 = false;passing0 = [passing0, 1];}else {if(_valid0){valid0 = true;passing0 = 1;if(props0 !== true){props0 = true;}}const _errs3 = errors;if(!(validate25(data, {instancePath,parentData,parentDataProperty,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate25.errors : vErrors.concat(validate25.errors);errors = vErrors.length;}else {var props1 = validate25.evaluated.props;}var _valid0 = _errs3 === errors;if(_valid0 && valid0){valid0 = false;passing0 = [passing0, 2];}else {if(_valid0){valid0 = true;passing0 = 2;if(props0 !== true && props1 !== undefined){if(props1 === true){props0 = true;}else {props0 = props0 || {};Object.assign(props0, props1);}}}const _errs4 = errors;if(!(validate27(data, {instancePath,parentData,parentDataProperty,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate27.errors : vErrors.concat(validate27.errors);errors = vErrors.length;}var _valid0 = _errs4 === errors;if(_valid0 && valid0){valid0 = false;passing0 = [passing0, 3];}else {if(_valid0){valid0 = true;passing0 = 3;if(props0 !== true){props0 = true;}}const _errs5 = errors;if(!(validate29(data, {instancePath,parentData,parentDataProperty,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate29.errors : vErrors.concat(validate29.errors);errors = vErrors.length;}var _valid0 = _errs5 === errors;if(_valid0 && valid0){valid0 = false;passing0 = [passing0, 4];}else {if(_valid0){valid0 = true;passing0 = 4;if(props0 !== true){props0 = true;}}const _errs6 = errors;if(!(validate31(data, {instancePath,parentData,parentDataProperty,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate31.errors : vErrors.concat(validate31.errors);errors = vErrors.length;}var _valid0 = _errs6 === errors;if(_valid0 && valid0){valid0 = false;passing0 = [passing0, 5];}else {if(_valid0){valid0 = true;passing0 = 5;if(props0 !== true){props0 = true;}}const _errs7 = errors;if(!(validate33(data, {instancePath,parentData,parentDataProperty,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate33.errors : vErrors.concat(validate33.errors);errors = vErrors.length;}var _valid0 = _errs7 === errors;if(_valid0 && valid0){valid0 = false;passing0 = [passing0, 6];}else {if(_valid0){valid0 = true;passing0 = 6;if(props0 !== true){props0 = true;}}const _errs8 = errors;if(!(validate35(data, {instancePath,parentData,parentDataProperty,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate35.errors : vErrors.concat(validate35.errors);errors = vErrors.length;}var _valid0 = _errs8 === errors;if(_valid0 && valid0){valid0 = false;passing0 = [passing0, 7];}else {if(_valid0){valid0 = true;passing0 = 7;if(props0 !== true){props0 = true;}}const _errs9 = errors;if(!(validate37(data, {instancePath,parentData,parentDataProperty,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate37.errors : vErrors.concat(validate37.errors);errors = vErrors.length;}var _valid0 = _errs9 === errors;if(_valid0 && valid0){valid0 = false;passing0 = [passing0, 8];}else {if(_valid0){valid0 = true;passing0 = 8;if(props0 !== true){props0 = true;}}const _errs10 = errors;if(!(validate39(data, {instancePath,parentData,parentDataProperty,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate39.errors : vErrors.concat(validate39.errors);errors = vErrors.length;}var _valid0 = _errs10 === errors;if(_valid0 && valid0){valid0 = false;passing0 = [passing0, 9];}else {if(_valid0){valid0 = true;passing0 = 9;if(props0 !== true){props0 = true;}}const _errs11 = errors;if(!(validate41(data, {instancePath,parentData,parentDataProperty,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate41.errors : vErrors.concat(validate41.errors);errors = vErrors.length;}var _valid0 = _errs11 === errors;if(_valid0 && valid0){valid0 = false;passing0 = [passing0, 10];}else {if(_valid0){valid0 = true;passing0 = 10;if(props0 !== true){props0 = true;}}const _errs12 = errors;if(!(validate43(data, {instancePath,parentData,parentDataProperty,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate43.errors : vErrors.concat(validate43.errors);errors = vErrors.length;}var _valid0 = _errs12 === errors;if(_valid0 && valid0){valid0 = false;passing0 = [passing0, 11];}else {if(_valid0){valid0 = true;passing0 = 11;if(props0 !== true){props0 = true;}}const _errs13 = errors;if(!(validate45(data, {instancePath,parentData,parentDataProperty,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate45.errors : vErrors.concat(validate45.errors);errors = vErrors.length;}var _valid0 = _errs13 === errors;if(_valid0 && valid0){valid0 = false;passing0 = [passing0, 12];}else {if(_valid0){valid0 = true;passing0 = 12;if(props0 !== true){props0 = true;}}const _errs14 = errors;if(!(validate47(data, {instancePath,parentData,parentDataProperty,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate47.errors : vErrors.concat(validate47.errors);errors = vErrors.length;}var _valid0 = _errs14 === errors;if(_valid0 && valid0){valid0 = false;passing0 = [passing0, 13];}else {if(_valid0){valid0 = true;passing0 = 13;if(props0 !== true){props0 = true;}}const _errs15 = errors;if(!(validate49(data, {instancePath,parentData,parentDataProperty,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate49.errors : vErrors.concat(validate49.errors);errors = vErrors.length;}var _valid0 = _errs15 === errors;if(_valid0 && valid0){valid0 = false;passing0 = [passing0, 14];}else {if(_valid0){valid0 = true;passing0 = 14;if(props0 !== true){props0 = true;}}const _errs16 = errors;if(!(validate51(data, {instancePath,parentData,parentDataProperty,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate51.errors : vErrors.concat(validate51.errors);errors = vErrors.length;}var _valid0 = _errs16 === errors;if(_valid0 && valid0){valid0 = false;passing0 = [passing0, 15];}else {if(_valid0){valid0 = true;passing0 = 15;if(props0 !== true){props0 = true;}}const _errs17 = errors;if(!(validate53(data, {instancePath,parentData,parentDataProperty,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate53.errors : vErrors.concat(validate53.errors);errors = vErrors.length;}var _valid0 = _errs17 === errors;if(_valid0 && valid0){valid0 = false;passing0 = [passing0, 16];}else {if(_valid0){valid0 = true;passing0 = 16;if(props0 !== true){props0 = true;}}const _errs18 = errors;if(!(wrapper0.validate(data, {instancePath,parentData,parentDataProperty,rootData,dynamicAnchors}))){vErrors = vErrors === null ? wrapper0.validate.errors : vErrors.concat(wrapper0.validate.errors);errors = vErrors.length;}else {var props2 = wrapper0.validate.evaluated.props;var items0 = wrapper0.validate.evaluated.items;}var _valid0 = _errs18 === errors;if(_valid0 && valid0){valid0 = false;passing0 = [passing0, 17];}else {if(_valid0){valid0 = true;passing0 = 17;if(props0 !== true && props2 !== undefined){if(props2 === true){props0 = true;}else {props0 = props0 || {};Object.assign(props0, props2);}}}const _errs19 = errors;if(!(validate74(data, {instancePath,parentData,parentDataProperty,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate74.errors : vErrors.concat(validate74.errors);errors = vErrors.length;}var _valid0 = _errs19 === errors;if(_valid0 && valid0){valid0 = false;passing0 = [passing0, 18];}else {if(_valid0){valid0 = true;passing0 = 18;if(props0 !== true){props0 = true;}}const _errs20 = errors;if(!(validate76(data, {instancePath,parentData,parentDataProperty,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate76.errors : vErrors.concat(validate76.errors);errors = vErrors.length;}var _valid0 = _errs20 === errors;if(_valid0 && valid0){valid0 = false;passing0 = [passing0, 19];}else {if(_valid0){valid0 = true;passing0 = 19;if(props0 !== true){props0 = true;}}}}}}}}}}}}}}}}}}}}}if(!valid0){const err0 = {instancePath,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas: passing0},message:"must match exactly one schema in oneOf"};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}else {errors = _errs0;if(vErrors !== null){if(_errs0){vErrors.length = _errs0;}else {vErrors = null;}}}validate56.errors = vErrors;evaluated0.props = props0;evaluated0.items = items0;return errors === 0;}validate56.evaluated = {"dynamicProps":true,"dynamicItems":true};function validate55(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="https://mova.dev/schemas/actions/if.schema.json" */;let vErrors = null;let errors = 0;const evaluated0 = validate55.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}if(data && typeof data == "object" && !Array.isArray(data)){if(data.type === undefined){const err0 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "type"},message:"must have required property '"+"type"+"'"};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}if(data.params === undefined){const err1 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "params"},message:"must have required property '"+"params"+"'"};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}if(data.type !== undefined){if("if" !== data.type){const err2 = {instancePath:instancePath+"/type",schemaPath:"#/properties/type/const",keyword:"const",params:{allowedValue: "if"},message:"must be equal to constant"};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}}if(data.params !== undefined){let data1 = data.params;if(data1 && typeof data1 == "object" && !Array.isArray(data1)){if(data1.when === undefined){const err3 = {instancePath:instancePath+"/params",schemaPath:"#/properties/params/required",keyword:"required",params:{missingProperty: "when"},message:"must have required property '"+"when"+"'"};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}if(data1.then === undefined){const err4 = {instancePath:instancePath+"/params",schemaPath:"#/properties/params/required",keyword:"required",params:{missingProperty: "then"},message:"must have required property '"+"then"+"'"};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}if(data1.when !== undefined){let data2 = data1.when;const _errs6 = errors;let valid2 = false;const _errs7 = errors;if(data2 && typeof data2 == "object" && !Array.isArray(data2)){if(data2.eq === undefined){const err5 = {instancePath:instancePath+"/params/when",schemaPath:"#/properties/params/properties/when/anyOf/0/required",keyword:"required",params:{missingProperty: "eq"},message:"must have required property '"+"eq"+"'"};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}}var _valid0 = _errs7 === errors;valid2 = valid2 || _valid0;if(_valid0){var props0 = {};props0.eq = true;}const _errs8 = errors;if(data2 && typeof data2 == "object" && !Array.isArray(data2)){if(data2.ne === undefined){const err6 = {instancePath:instancePath+"/params/when",schemaPath:"#/properties/params/properties/when/anyOf/1/required",keyword:"required",params:{missingProperty: "ne"},message:"must have required property '"+"ne"+"'"};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}}var _valid0 = _errs8 === errors;valid2 = valid2 || _valid0;if(_valid0){if(props0 !== true){props0 = props0 || {};props0.ne = true;}}const _errs9 = errors;if(data2 && typeof data2 == "object" && !Array.isArray(data2)){if(data2.gt === undefined){const err7 = {instancePath:instancePath+"/params/when",schemaPath:"#/properties/params/properties/when/anyOf/2/required",keyword:"required",params:{missingProperty: "gt"},message:"must have required property '"+"gt"+"'"};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}}var _valid0 = _errs9 === errors;valid2 = valid2 || _valid0;if(_valid0){if(props0 !== true){props0 = props0 || {};props0.gt = true;}}const _errs10 = errors;if(data2 && typeof data2 == "object" && !Array.isArray(data2)){if(data2.gte === undefined){const err8 = {instancePath:instancePath+"/params/when",schemaPath:"#/properties/params/properties/when/anyOf/3/required",keyword:"required",params:{missingProperty: "gte"},message:"must have required property '"+"gte"+"'"};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}}var _valid0 = _errs10 === errors;valid2 = valid2 || _valid0;if(_valid0){if(props0 !== true){props0 = props0 || {};props0.gte = true;}}const _errs11 = errors;if(data2 && typeof data2 == "object" && !Array.isArray(data2)){if(data2.lt === undefined){const err9 = {instancePath:instancePath+"/params/when",schemaPath:"#/properties/params/properties/when/anyOf/4/required",keyword:"required",params:{missingProperty: "lt"},message:"must have required property '"+"lt"+"'"};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}}var _valid0 = _errs11 === errors;valid2 = valid2 || _valid0;if(_valid0){if(props0 !== true){props0 = props0 || {};props0.lt = true;}}const _errs12 = errors;if(data2 && typeof data2 == "object" && !Array.isArray(data2)){if(data2.lte === undefined){const err10 = {instancePath:instancePath+"/params/when",schemaPath:"#/properties/params/properties/when/anyOf/5/required",keyword:"required",params:{missingProperty: "lte"},message:"must have required property '"+"lte"+"'"};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}}var _valid0 = _errs12 === errors;valid2 = valid2 || _valid0;if(_valid0){if(props0 !== true){props0 = props0 || {};props0.lte = true;}}const _errs13 = errors;if(data2 && typeof data2 == "object" && !Array.isArray(data2)){if(data2.contains === undefined){const err11 = {instancePath:instancePath+"/params/when",schemaPath:"#/properties/params/properties/when/anyOf/6/required",keyword:"required",params:{missingProperty: "contains"},message:"must have required property '"+"contains"+"'"};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}}var _valid0 = _errs13 === errors;valid2 = valid2 || _valid0;if(_valid0){if(props0 !== true){props0 = props0 || {};props0.contains = true;}}const _errs14 = errors;if(data2 && typeof data2 == "object" && !Array.isArray(data2)){if(data2.exists === undefined){const err12 = {instancePath:instancePath+"/params/when",schemaPath:"#/properties/params/properties/when/anyOf/7/required",keyword:"required",params:{missingProperty: "exists"},message:"must have required property '"+"exists"+"'"};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}if(data2.exists !== undefined){if(typeof data2.exists !== "boolean"){const err13 = {instancePath:instancePath+"/params/when/exists",schemaPath:"#/properties/params/properties/when/anyOf/7/properties/exists/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}}}var _valid0 = _errs14 === errors;valid2 = valid2 || _valid0;if(_valid0){if(props0 !== true){props0 = props0 || {};props0.exists = true;}}if(!valid2){const err14 = {instancePath:instancePath+"/params/when",schemaPath:"#/properties/params/properties/when/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}else {errors = _errs6;if(vErrors !== null){if(_errs6){vErrors.length = _errs6;}else {vErrors = null;}}}if(data2 && typeof data2 == "object" && !Array.isArray(data2)){if(data2.path === undefined){const err15 = {instancePath:instancePath+"/params/when",schemaPath:"#/properties/params/properties/when/required",keyword:"required",params:{missingProperty: "path"},message:"must have required property '"+"path"+"'"};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}if(props0 !== true){props0 = props0 || {};props0.path = true;props0.eq = true;props0.ne = true;props0.gt = true;props0.gte = true;props0.lt = true;props0.lte = true;props0.contains = true;props0.exists = true;}if(data2.path !== undefined){let data4 = data2.path;if(typeof data4 === "string"){if(func3(data4) < 1){const err16 = {instancePath:instancePath+"/params/when/path",schemaPath:"#/properties/params/properties/when/properties/path/minLength",keyword:"minLength",params:{limit: 1},message:"must NOT have fewer than 1 characters"};if(vErrors === null){vErrors = [err16];}else {vErrors.push(err16);}errors++;}}else {const err17 = {instancePath:instancePath+"/params/when/path",schemaPath:"#/properties/params/properties/when/properties/path/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err17];}else {vErrors.push(err17);}errors++;}}if(data2.exists !== undefined){if(typeof data2.exists !== "boolean"){const err18 = {instancePath:instancePath+"/params/when/exists",schemaPath:"#/properties/params/properties/when/properties/exists/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"};if(vErrors === null){vErrors = [err18];}else {vErrors.push(err18);}errors++;}}if(props0 !== true){for(const key0 in data2){if(!props0 || !props0[key0]){const err19 = {instancePath:instancePath+"/params/when",schemaPath:"#/properties/params/properties/when/unevaluatedProperties",keyword:"unevaluatedProperties",params:{unevaluatedProperty: key0},message:"must NOT have unevaluated properties"};if(vErrors === null){vErrors = [err19];}else {vErrors.push(err19);}errors++;}}}}else {const err20 = {instancePath:instancePath+"/params/when",schemaPath:"#/properties/params/properties/when/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err20];}else {vErrors.push(err20);}errors++;}}if(data1.then !== undefined){let data6 = data1.then;if(Array.isArray(data6)){if(data6.length < 1){const err21 = {instancePath:instancePath+"/params/then",schemaPath:"#/properties/params/properties/then/minItems",keyword:"minItems",params:{limit: 1},message:"must NOT have fewer than 1 items"};if(vErrors === null){vErrors = [err21];}else {vErrors.push(err21);}errors++;}const len0 = data6.length;for(let i0=0; i0<len0; i0++){if(!(validate56(data6[i0], {instancePath:instancePath+"/params/then/" + i0,parentData:data6,parentDataProperty:i0,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate56.errors : vErrors.concat(validate56.errors);errors = vErrors.length;}}}else {const err22 = {instancePath:instancePath+"/params/then",schemaPath:"#/properties/params/properties/then/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err22];}else {vErrors.push(err22);}errors++;}}if(data1.else !== undefined){let data8 = data1.else;if(Array.isArray(data8)){if(data8.length < 1){const err23 = {instancePath:instancePath+"/params/else",schemaPath:"#/properties/params/properties/else/minItems",keyword:"minItems",params:{limit: 1},message:"must NOT have fewer than 1 items"};if(vErrors === null){vErrors = [err23];}else {vErrors.push(err23);}errors++;}const len1 = data8.length;for(let i1=0; i1<len1; i1++){if(!(validate56(data8[i1], {instancePath:instancePath+"/params/else/" + i1,parentData:data8,parentDataProperty:i1,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate56.errors : vErrors.concat(validate56.errors);errors = vErrors.length;}}}else {const err24 = {instancePath:instancePath+"/params/else",schemaPath:"#/properties/params/properties/else/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err24];}else {vErrors.push(err24);}errors++;}}for(const key1 in data1){if(((key1 !== "when") && (key1 !== "then")) && (key1 !== "else")){const err25 = {instancePath:instancePath+"/params",schemaPath:"#/properties/params/unevaluatedProperties",keyword:"unevaluatedProperties",params:{unevaluatedProperty: key1},message:"must NOT have unevaluated properties"};if(vErrors === null){vErrors = [err25];}else {vErrors.push(err25);}errors++;}}}else {const err26 = {instancePath:instancePath+"/params",schemaPath:"#/properties/params/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err26];}else {vErrors.push(err26);}errors++;}}for(const key2 in data){if((key2 !== "type") && (key2 !== "params")){const err27 = {instancePath,schemaPath:"#/unevaluatedProperties",keyword:"unevaluatedProperties",params:{unevaluatedProperty: key2},message:"must NOT have unevaluated properties"};if(vErrors === null){vErrors = [err27];}else {vErrors.push(err27);}errors++;}}}else {const err28 = {instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err28];}else {vErrors.push(err28);}errors++;}validate55.errors = vErrors;return errors === 0;}validate55.evaluated = {"props":true,"dynamicProps":false,"dynamicItems":false};function validate20(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="https://mova.dev/schemas/envelope.3.3.schema.json" */;let vErrors = null;let errors = 0;const evaluated0 = validate20.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}if(data && typeof data == "object" && !Array.isArray(data)){if(data.mova_version === undefined){const err0 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "mova_version"},message:"must have required property '"+"mova_version"+"'"};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}if(data.actions === undefined){const err1 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "actions"},message:"must have required property '"+"actions"+"'"};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}for(const key0 in data){if(!(func1.call(schema31.properties, key0))){const err2 = {instancePath,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key0},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}}if(data.mova_version !== undefined){let data0 = data.mova_version;if(typeof data0 === "string"){if(!pattern4.test(data0)){const err3 = {instancePath:instancePath+"/mova_version",schemaPath:"#/properties/mova_version/pattern",keyword:"pattern",params:{pattern: "^3\\.3(\\.\\d+)?$"},message:"must match pattern \""+"^3\\.3(\\.\\d+)?$"+"\""};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}}else {const err4 = {instancePath:instancePath+"/mova_version",schemaPath:"#/properties/mova_version/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}}if(data.id !== undefined){if(typeof data.id !== "string"){const err5 = {instancePath:instancePath+"/id",schemaPath:"#/properties/id/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}}if(data.description !== undefined){if(typeof data.description !== "string"){const err6 = {instancePath:instancePath+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}}if(data.context !== undefined){let data3 = data.context;if(!(data3 && typeof data3 == "object" && !Array.isArray(data3))){const err7 = {instancePath:instancePath+"/context",schemaPath:"#/properties/context/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}}if(data.vars !== undefined){let data4 = data.vars;if(data4 && typeof data4 == "object" && !Array.isArray(data4)){}else {const err8 = {instancePath:instancePath+"/vars",schemaPath:"#/properties/vars/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}}if(data.policies !== undefined){let data5 = data.policies;if(data5 && typeof data5 == "object" && !Array.isArray(data5)){for(const key1 in data5){if(!((((key1 === "timeout_ms") || (key1 === "retry")) || (key1 === "dlq")) || (key1 === "budget_ms"))){const err9 = {instancePath:instancePath+"/policies",schemaPath:"policies.schema.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key1},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}}if(data5.timeout_ms !== undefined){let data6 = data5.timeout_ms;if(!(((typeof data6 == "number") && (!(data6 % 1) && !isNaN(data6))) && (isFinite(data6)))){const err10 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"policies.schema.json/properties/timeout_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}if((typeof data6 == "number") && (isFinite(data6))){if(data6 < 0 || isNaN(data6)){const err11 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"policies.schema.json/properties/timeout_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}}}if(data5.retry !== undefined){let data7 = data5.retry;if(data7 && typeof data7 == "object" && !Array.isArray(data7)){for(const key2 in data7){if(!(((key2 === "max_attempts") || (key2 === "backoff_ms")) || (key2 === "strategy"))){const err12 = {instancePath:instancePath+"/policies/retry",schemaPath:"policies.schema.json/properties/retry/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key2},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}}if(data7.max_attempts !== undefined){let data8 = data7.max_attempts;if(!(((typeof data8 == "number") && (!(data8 % 1) && !isNaN(data8))) && (isFinite(data8)))){const err13 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"policies.schema.json/properties/retry/properties/max_attempts/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}if((typeof data8 == "number") && (isFinite(data8))){if(data8 < 0 || isNaN(data8)){const err14 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"policies.schema.json/properties/retry/properties/max_attempts/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}}}if(data7.backoff_ms !== undefined){let data9 = data7.backoff_ms;const _errs25 = errors;let valid4 = false;const _errs26 = errors;if(!(((typeof data9 == "number") && (!(data9 % 1) && !isNaN(data9))) && (isFinite(data9)))){const err15 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}if((typeof data9 == "number") && (isFinite(data9))){if(data9 < 0 || isNaN(data9)){const err16 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err16];}else {vErrors.push(err16);}errors++;}}var _valid0 = _errs26 === errors;valid4 = valid4 || _valid0;const _errs28 = errors;if(Array.isArray(data9)){const len0 = data9.length;for(let i0=0; i0<len0; i0++){let data10 = data9[i0];if(!(((typeof data10 == "number") && (!(data10 % 1) && !isNaN(data10))) && (isFinite(data10)))){const err17 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err17];}else {vErrors.push(err17);}errors++;}if((typeof data10 == "number") && (isFinite(data10))){if(data10 < 0 || isNaN(data10)){const err18 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err18];}else {vErrors.push(err18);}errors++;}}}}else {const err19 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err19];}else {vErrors.push(err19);}errors++;}var _valid0 = _errs28 === errors;valid4 = valid4 || _valid0;if(!valid4){const err20 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"policies.schema.json/properties/retry/properties/backoff_ms/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err20];}else {vErrors.push(err20);}errors++;}else {errors = _errs25;if(vErrors !== null){if(_errs25){vErrors.length = _errs25;}else {vErrors = null;}}}}if(data7.strategy !== undefined){let data11 = data7.strategy;if(typeof data11 !== "string"){const err21 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"policies.schema.json/properties/retry/properties/strategy/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err21];}else {vErrors.push(err21);}errors++;}if(!((data11 === "fixed") || (data11 === "exp"))){const err22 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"policies.schema.json/properties/retry/properties/strategy/enum",keyword:"enum",params:{allowedValues: schema32.properties.retry.properties.strategy.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err22];}else {vErrors.push(err22);}errors++;}}}else {const err23 = {instancePath:instancePath+"/policies/retry",schemaPath:"policies.schema.json/properties/retry/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err23];}else {vErrors.push(err23);}errors++;}}if(data5.dlq !== undefined){let data12 = data5.dlq;if(data12 && typeof data12 == "object" && !Array.isArray(data12)){for(const key3 in data12){if(!((key3 === "enabled") || (key3 === "target"))){const err24 = {instancePath:instancePath+"/policies/dlq",schemaPath:"policies.schema.json/properties/dlq/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key3},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err24];}else {vErrors.push(err24);}errors++;}}if(data12.enabled !== undefined){if(typeof data12.enabled !== "boolean"){const err25 = {instancePath:instancePath+"/policies/dlq/enabled",schemaPath:"policies.schema.json/properties/dlq/properties/enabled/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"};if(vErrors === null){vErrors = [err25];}else {vErrors.push(err25);}errors++;}}if(data12.target !== undefined){if(typeof data12.target !== "string"){const err26 = {instancePath:instancePath+"/policies/dlq/target",schemaPath:"policies.schema.json/properties/dlq/properties/target/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err26];}else {vErrors.push(err26);}errors++;}}}else {const err27 = {instancePath:instancePath+"/policies/dlq",schemaPath:"policies.schema.json/properties/dlq/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err27];}else {vErrors.push(err27);}errors++;}}if(data5.budget_ms !== undefined){let data15 = data5.budget_ms;if(!(((typeof data15 == "number") && (!(data15 % 1) && !isNaN(data15))) && (isFinite(data15)))){const err28 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"policies.schema.json/properties/budget_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err28];}else {vErrors.push(err28);}errors++;}if((typeof data15 == "number") && (isFinite(data15))){if(data15 < 0 || isNaN(data15)){const err29 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"policies.schema.json/properties/budget_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err29];}else {vErrors.push(err29);}errors++;}}}}else {const err30 = {instancePath:instancePath+"/policies",schemaPath:"policies.schema.json/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err30];}else {vErrors.push(err30);}errors++;}}if(data.meta !== undefined){let data16 = data.meta;if(data16 && typeof data16 == "object" && !Array.isArray(data16)){if(data16.timeout_ms !== undefined){let data17 = data16.timeout_ms;if(!(((typeof data17 == "number") && (!(data17 % 1) && !isNaN(data17))) && (isFinite(data17)))){const err31 = {instancePath:instancePath+"/meta/timeout_ms",schemaPath:"#/properties/meta/properties/timeout_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err31];}else {vErrors.push(err31);}errors++;}if((typeof data17 == "number") && (isFinite(data17))){if(data17 < 0 || isNaN(data17)){const err32 = {instancePath:instancePath+"/meta/timeout_ms",schemaPath:"#/properties/meta/properties/timeout_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err32];}else {vErrors.push(err32);}errors++;}}}if(data16.retry !== undefined){let data18 = data16.retry;if(data18 && typeof data18 == "object" && !Array.isArray(data18)){if(data18.max_attempts !== undefined){let data19 = data18.max_attempts;if(!(((typeof data19 == "number") && (!(data19 % 1) && !isNaN(data19))) && (isFinite(data19)))){const err33 = {instancePath:instancePath+"/meta/retry/max_attempts",schemaPath:"#/properties/meta/properties/retry/properties/max_attempts/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err33];}else {vErrors.push(err33);}errors++;}if((typeof data19 == "number") && (isFinite(data19))){if(data19 < 0 || isNaN(data19)){const err34 = {instancePath:instancePath+"/meta/retry/max_attempts",schemaPath:"#/properties/meta/properties/retry/properties/max_attempts/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err34];}else {vErrors.push(err34);}errors++;}}}if(data18.backoff_ms !== undefined){let data20 = data18.backoff_ms;if(!(((typeof data20 == "number") && (!(data20 % 1) && !isNaN(data20))) && (isFinite(data20)))){const err35 = {instancePath:instancePath+"/meta/retry/backoff_ms",schemaPath:"#/properties/meta/properties/retry/properties/backoff_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err35];}else {vErrors.push(err35);}errors++;}if((typeof data20 == "number") && (isFinite(data20))){if(data20 < 0 || isNaN(data20)){const err36 = {instancePath:instancePath+"/meta/retry/backoff_ms",schemaPath:"#/properties/meta/properties/retry/properties/backoff_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err36];}else {vErrors.push(err36);}errors++;}}}if(data18.strategy !== undefined){let data21 = data18.strategy;if(typeof data21 !== "string"){const err37 = {instancePath:instancePath+"/meta/retry/strategy",schemaPath:"#/properties/meta/properties/retry/properties/strategy/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err37];}else {vErrors.push(err37);}errors++;}if(!((data21 === "fixed") || (data21 === "exp"))){const err38 = {instancePath:instancePath+"/meta/retry/strategy",schemaPath:"#/properties/meta/properties/retry/properties/strategy/enum",keyword:"enum",params:{allowedValues: schema31.properties.meta.properties.retry.properties.strategy.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err38];}else {vErrors.push(err38);}errors++;}}}else {const err39 = {instancePath:instancePath+"/meta/retry",schemaPath:"#/properties/meta/properties/retry/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err39];}else {vErrors.push(err39);}errors++;}}if(data16.dlq !== undefined){let data22 = data16.dlq;if(!(data22 && typeof data22 == "object" && !Array.isArray(data22))){const err40 = {instancePath:instancePath+"/meta/dlq",schemaPath:"#/properties/meta/properties/dlq/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err40];}else {vErrors.push(err40);}errors++;}}}else {const err41 = {instancePath:instancePath+"/meta",schemaPath:"#/properties/meta/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err41];}else {vErrors.push(err41);}errors++;}}if(data.payload !== undefined){let data23 = data.payload;const _errs60 = errors;let valid10 = false;let passing0 = null;const _errs61 = errors;if(data23 !== null){const err42 = {instancePath:instancePath+"/payload",schemaPath:"#/properties/payload/oneOf/0/type",keyword:"type",params:{type: "null"},message:"must be null"};if(vErrors === null){vErrors = [err42];}else {vErrors.push(err42);}errors++;}var _valid1 = _errs61 === errors;if(_valid1){valid10 = true;passing0 = 0;}const _errs63 = errors;if(typeof data23 !== "string"){const err43 = {instancePath:instancePath+"/payload",schemaPath:"#/properties/payload/oneOf/1/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err43];}else {vErrors.push(err43);}errors++;}var _valid1 = _errs63 === errors;if(_valid1 && valid10){valid10 = false;passing0 = [passing0, 1];}else {if(_valid1){valid10 = true;passing0 = 1;}const _errs65 = errors;if(!((typeof data23 == "number") && (isFinite(data23)))){const err44 = {instancePath:instancePath+"/payload",schemaPath:"#/properties/payload/oneOf/2/type",keyword:"type",params:{type: "number"},message:"must be number"};if(vErrors === null){vErrors = [err44];}else {vErrors.push(err44);}errors++;}var _valid1 = _errs65 === errors;if(_valid1 && valid10){valid10 = false;passing0 = [passing0, 2];}else {if(_valid1){valid10 = true;passing0 = 2;}const _errs67 = errors;if(typeof data23 !== "boolean"){const err45 = {instancePath:instancePath+"/payload",schemaPath:"#/properties/payload/oneOf/3/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"};if(vErrors === null){vErrors = [err45];}else {vErrors.push(err45);}errors++;}var _valid1 = _errs67 === errors;if(_valid1 && valid10){valid10 = false;passing0 = [passing0, 3];}else {if(_valid1){valid10 = true;passing0 = 3;}const _errs69 = errors;if(!(Array.isArray(data23))){const err46 = {instancePath:instancePath+"/payload",schemaPath:"#/properties/payload/oneOf/4/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err46];}else {vErrors.push(err46);}errors++;}var _valid1 = _errs69 === errors;if(_valid1 && valid10){valid10 = false;passing0 = [passing0, 4];}else {if(_valid1){valid10 = true;passing0 = 4;}const _errs71 = errors;if(!(data23 && typeof data23 == "object" && !Array.isArray(data23))){const err47 = {instancePath:instancePath+"/payload",schemaPath:"#/properties/payload/oneOf/5/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err47];}else {vErrors.push(err47);}errors++;}var _valid1 = _errs71 === errors;if(_valid1 && valid10){valid10 = false;passing0 = [passing0, 5];}else {if(_valid1){valid10 = true;passing0 = 5;}}}}}}if(!valid10){const err48 = {instancePath:instancePath+"/payload",schemaPath:"#/properties/payload/oneOf",keyword:"oneOf",params:{passingSchemas: passing0},message:"must match exactly one schema in oneOf"};if(vErrors === null){vErrors = [err48];}else {vErrors.push(err48);}errors++;}else {errors = _errs60;if(vErrors !== null){if(_errs60){vErrors.length = _errs60;}else {vErrors = null;}}}}if(data.actions !== undefined){let data24 = data.actions;if(Array.isArray(data24)){const len1 = data24.length;for(let i1=0; i1<len1; i1++){let data25 = data24[i1];const _errs76 = errors;let valid13 = false;let passing1 = null;const _errs77 = errors;if(!(validate21(data25, {instancePath:instancePath+"/actions/" + i1,parentData:data24,parentDataProperty:i1,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate21.errors : vErrors.concat(validate21.errors);errors = vErrors.length;}else {var props0 = validate21.evaluated.props;}var _valid2 = _errs77 === errors;if(_valid2){valid13 = true;passing1 = 0;}const _errs78 = errors;if(!(validate23(data25, {instancePath:instancePath+"/actions/" + i1,parentData:data24,parentDataProperty:i1,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate23.errors : vErrors.concat(validate23.errors);errors = vErrors.length;}var _valid2 = _errs78 === errors;if(_valid2 && valid13){valid13 = false;passing1 = [passing1, 1];}else {if(_valid2){valid13 = true;passing1 = 1;if(props0 !== true){props0 = true;}}const _errs79 = errors;if(!(validate25(data25, {instancePath:instancePath+"/actions/" + i1,parentData:data24,parentDataProperty:i1,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate25.errors : vErrors.concat(validate25.errors);errors = vErrors.length;}else {var props1 = validate25.evaluated.props;}var _valid2 = _errs79 === errors;if(_valid2 && valid13){valid13 = false;passing1 = [passing1, 2];}else {if(_valid2){valid13 = true;passing1 = 2;if(props0 !== true && props1 !== undefined){if(props1 === true){props0 = true;}else {props0 = props0 || {};Object.assign(props0, props1);}}}const _errs80 = errors;if(!(validate27(data25, {instancePath:instancePath+"/actions/" + i1,parentData:data24,parentDataProperty:i1,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate27.errors : vErrors.concat(validate27.errors);errors = vErrors.length;}var _valid2 = _errs80 === errors;if(_valid2 && valid13){valid13 = false;passing1 = [passing1, 3];}else {if(_valid2){valid13 = true;passing1 = 3;if(props0 !== true){props0 = true;}}const _errs81 = errors;if(!(validate29(data25, {instancePath:instancePath+"/actions/" + i1,parentData:data24,parentDataProperty:i1,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate29.errors : vErrors.concat(validate29.errors);errors = vErrors.length;}var _valid2 = _errs81 === errors;if(_valid2 && valid13){valid13 = false;passing1 = [passing1, 4];}else {if(_valid2){valid13 = true;passing1 = 4;if(props0 !== true){props0 = true;}}const _errs82 = errors;if(!(validate31(data25, {instancePath:instancePath+"/actions/" + i1,parentData:data24,parentDataProperty:i1,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate31.errors : vErrors.concat(validate31.errors);errors = vErrors.length;}var _valid2 = _errs82 === errors;if(_valid2 && valid13){valid13 = false;passing1 = [passing1, 5];}else {if(_valid2){valid13 = true;passing1 = 5;if(props0 !== true){props0 = true;}}const _errs83 = errors;if(!(validate33(data25, {instancePath:instancePath+"/actions/" + i1,parentData:data24,parentDataProperty:i1,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate33.errors : vErrors.concat(validate33.errors);errors = vErrors.length;}var _valid2 = _errs83 === errors;if(_valid2 && valid13){valid13 = false;passing1 = [passing1, 6];}else {if(_valid2){valid13 = true;passing1 = 6;if(props0 !== true){props0 = true;}}const _errs84 = errors;if(!(validate35(data25, {instancePath:instancePath+"/actions/" + i1,parentData:data24,parentDataProperty:i1,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate35.errors : vErrors.concat(validate35.errors);errors = vErrors.length;}var _valid2 = _errs84 === errors;if(_valid2 && valid13){valid13 = false;passing1 = [passing1, 7];}else {if(_valid2){valid13 = true;passing1 = 7;if(props0 !== true){props0 = true;}}const _errs85 = errors;if(!(validate37(data25, {instancePath:instancePath+"/actions/" + i1,parentData:data24,parentDataProperty:i1,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate37.errors : vErrors.concat(validate37.errors);errors = vErrors.length;}var _valid2 = _errs85 === errors;if(_valid2 && valid13){valid13 = false;passing1 = [passing1, 8];}else {if(_valid2){valid13 = true;passing1 = 8;if(props0 !== true){props0 = true;}}const _errs86 = errors;if(!(validate39(data25, {instancePath:instancePath+"/actions/" + i1,parentData:data24,parentDataProperty:i1,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate39.errors : vErrors.concat(validate39.errors);errors = vErrors.length;}var _valid2 = _errs86 === errors;if(_valid2 && valid13){valid13 = false;passing1 = [passing1, 9];}else {if(_valid2){valid13 = true;passing1 = 9;if(props0 !== true){props0 = true;}}const _errs87 = errors;if(!(validate41(data25, {instancePath:instancePath+"/actions/" + i1,parentData:data24,parentDataProperty:i1,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate41.errors : vErrors.concat(validate41.errors);errors = vErrors.length;}var _valid2 = _errs87 === errors;if(_valid2 && valid13){valid13 = false;passing1 = [passing1, 10];}else {if(_valid2){valid13 = true;passing1 = 10;if(props0 !== true){props0 = true;}}const _errs88 = errors;if(!(validate43(data25, {instancePath:instancePath+"/actions/" + i1,parentData:data24,parentDataProperty:i1,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate43.errors : vErrors.concat(validate43.errors);errors = vErrors.length;}var _valid2 = _errs88 === errors;if(_valid2 && valid13){valid13 = false;passing1 = [passing1, 11];}else {if(_valid2){valid13 = true;passing1 = 11;if(props0 !== true){props0 = true;}}const _errs89 = errors;if(!(validate45(data25, {instancePath:instancePath+"/actions/" + i1,parentData:data24,parentDataProperty:i1,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate45.errors : vErrors.concat(validate45.errors);errors = vErrors.length;}var _valid2 = _errs89 === errors;if(_valid2 && valid13){valid13 = false;passing1 = [passing1, 12];}else {if(_valid2){valid13 = true;passing1 = 12;if(props0 !== true){props0 = true;}}const _errs90 = errors;if(!(validate47(data25, {instancePath:instancePath+"/actions/" + i1,parentData:data24,parentDataProperty:i1,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate47.errors : vErrors.concat(validate47.errors);errors = vErrors.length;}var _valid2 = _errs90 === errors;if(_valid2 && valid13){valid13 = false;passing1 = [passing1, 13];}else {if(_valid2){valid13 = true;passing1 = 13;if(props0 !== true){props0 = true;}}const _errs91 = errors;if(!(validate49(data25, {instancePath:instancePath+"/actions/" + i1,parentData:data24,parentDataProperty:i1,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate49.errors : vErrors.concat(validate49.errors);errors = vErrors.length;}var _valid2 = _errs91 === errors;if(_valid2 && valid13){valid13 = false;passing1 = [passing1, 14];}else {if(_valid2){valid13 = true;passing1 = 14;if(props0 !== true){props0 = true;}}const _errs92 = errors;if(!(validate51(data25, {instancePath:instancePath+"/actions/" + i1,parentData:data24,parentDataProperty:i1,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate51.errors : vErrors.concat(validate51.errors);errors = vErrors.length;}var _valid2 = _errs92 === errors;if(_valid2 && valid13){valid13 = false;passing1 = [passing1, 15];}else {if(_valid2){valid13 = true;passing1 = 15;if(props0 !== true){props0 = true;}}const _errs93 = errors;if(!(validate53(data25, {instancePath:instancePath+"/actions/" + i1,parentData:data24,parentDataProperty:i1,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate53.errors : vErrors.concat(validate53.errors);errors = vErrors.length;}var _valid2 = _errs93 === errors;if(_valid2 && valid13){valid13 = false;passing1 = [passing1, 16];}else {if(_valid2){valid13 = true;passing1 = 16;if(props0 !== true){props0 = true;}}const _errs94 = errors;if(!(validate55(data25, {instancePath:instancePath+"/actions/" + i1,parentData:data24,parentDataProperty:i1,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate55.errors : vErrors.concat(validate55.errors);errors = vErrors.length;}var _valid2 = _errs94 === errors;if(_valid2 && valid13){valid13 = false;passing1 = [passing1, 17];}else {if(_valid2){valid13 = true;passing1 = 17;if(props0 !== true){props0 = true;}}const _errs95 = errors;if(!(validate74(data25, {instancePath:instancePath+"/actions/" + i1,parentData:data24,parentDataProperty:i1,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate74.errors : vErrors.concat(validate74.errors);errors = vErrors.length;}var _valid2 = _errs95 === errors;if(_valid2 && valid13){valid13 = false;passing1 = [passing1, 18];}else {if(_valid2){valid13 = true;passing1 = 18;if(props0 !== true){props0 = true;}}const _errs96 = errors;if(!(validate76(data25, {instancePath:instancePath+"/actions/" + i1,parentData:data24,parentDataProperty:i1,rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate76.errors : vErrors.concat(validate76.errors);errors = vErrors.length;}var _valid2 = _errs96 === errors;if(_valid2 && valid13){valid13 = false;passing1 = [passing1, 19];}else {if(_valid2){valid13 = true;passing1 = 19;if(props0 !== true){props0 = true;}}}}}}}}}}}}}}}}}}}}}if(!valid13){const err49 = {instancePath:instancePath+"/actions/" + i1,schemaPath:"#/properties/actions/items/oneOf",keyword:"oneOf",params:{passingSchemas: passing1},message:"must match exactly one schema in oneOf"};if(vErrors === null){vErrors = [err49];}else {vErrors.push(err49);}errors++;}else {errors = _errs76;if(vErrors !== null){if(_errs76){vErrors.length = _errs76;}else {vErrors = null;}}}}}else {const err50 = {instancePath:instancePath+"/actions",schemaPath:"#/properties/actions/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err50];}else {vErrors.push(err50);}errors++;}}}else {const err51 = {instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err51];}else {vErrors.push(err51);}errors++;}validate20.errors = vErrors;return errors === 0;}validate20.evaluated = {"props":true,"dynamicProps":false,"dynamicItems":false};exports.route_1_0_schema_json = validate83;const schema73 = {"$schema":"https://json-schema.org/draft/2020-12/schema","$id":"https://mova.dev/schemas/route.1.0.schema.json","title":"MOVA Route v1.0","type":"object","required":["route_version","trigger","invoke"],"properties":{"route_version":{"type":"string","const":"1.0"},"description":{"type":"string"},"policies":{"$ref":"policies.schema.json"},"trigger":{"type":"object","required":["type"],"properties":{"type":{"type":"string","enum":["http","queue","schedule","event"]},"http":{"type":"object","properties":{"path":{"type":"string"},"method":{"type":"string"}},"additionalProperties":false},"queue":{"type":"object","properties":{"name":{"type":"string"}},"additionalProperties":false},"schedule":{"type":"object","properties":{"cron":{"type":"string"}},"additionalProperties":false},"event":{"type":"object","properties":{"topic":{"type":"string"}},"additionalProperties":false}},"additionalProperties":true},"match":{"type":"array","description":"Optional match conditions (key/equals/contains/regex etc.)","items":{"type":"object"}},"map":{"type":"object","description":"Optional mapping/transforms to build plan input/vars","additionalProperties":true},"invoke":{"type":"object","description":"How to invoke: inline plan or reference","oneOf":[{"properties":{"plan":{"$ref":"envelope.3.3.schema.json"}},"required":["plan"],"additionalProperties":false},{"properties":{"plan_ref":{"type":"string"}},"required":["plan_ref"],"additionalProperties":false}]}},"additionalProperties":false};function validate83(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="https://mova.dev/schemas/route.1.0.schema.json" */;let vErrors = null;let errors = 0;const evaluated0 = validate83.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}if(data && typeof data == "object" && !Array.isArray(data)){if(data.route_version === undefined){const err0 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "route_version"},message:"must have required property '"+"route_version"+"'"};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}if(data.trigger === undefined){const err1 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "trigger"},message:"must have required property '"+"trigger"+"'"};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}if(data.invoke === undefined){const err2 = {instancePath,schemaPath:"#/required",keyword:"required",params:{missingProperty: "invoke"},message:"must have required property '"+"invoke"+"'"};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}for(const key0 in data){if(!(((((((key0 === "route_version") || (key0 === "description")) || (key0 === "policies")) || (key0 === "trigger")) || (key0 === "match")) || (key0 === "map")) || (key0 === "invoke"))){const err3 = {instancePath,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key0},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}}if(data.route_version !== undefined){let data0 = data.route_version;if(typeof data0 !== "string"){const err4 = {instancePath:instancePath+"/route_version",schemaPath:"#/properties/route_version/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}if("1.0" !== data0){const err5 = {instancePath:instancePath+"/route_version",schemaPath:"#/properties/route_version/const",keyword:"const",params:{allowedValue: "1.0"},message:"must be equal to constant"};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}}if(data.description !== undefined){if(typeof data.description !== "string"){const err6 = {instancePath:instancePath+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}}if(data.policies !== undefined){let data2 = data.policies;if(data2 && typeof data2 == "object" && !Array.isArray(data2)){for(const key1 in data2){if(!((((key1 === "timeout_ms") || (key1 === "retry")) || (key1 === "dlq")) || (key1 === "budget_ms"))){const err7 = {instancePath:instancePath+"/policies",schemaPath:"policies.schema.json/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key1},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}}if(data2.timeout_ms !== undefined){let data3 = data2.timeout_ms;if(!(((typeof data3 == "number") && (!(data3 % 1) && !isNaN(data3))) && (isFinite(data3)))){const err8 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"policies.schema.json/properties/timeout_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}if((typeof data3 == "number") && (isFinite(data3))){if(data3 < 0 || isNaN(data3)){const err9 = {instancePath:instancePath+"/policies/timeout_ms",schemaPath:"policies.schema.json/properties/timeout_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}}}if(data2.retry !== undefined){let data4 = data2.retry;if(data4 && typeof data4 == "object" && !Array.isArray(data4)){for(const key2 in data4){if(!(((key2 === "max_attempts") || (key2 === "backoff_ms")) || (key2 === "strategy"))){const err10 = {instancePath:instancePath+"/policies/retry",schemaPath:"policies.schema.json/properties/retry/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key2},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}}if(data4.max_attempts !== undefined){let data5 = data4.max_attempts;if(!(((typeof data5 == "number") && (!(data5 % 1) && !isNaN(data5))) && (isFinite(data5)))){const err11 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"policies.schema.json/properties/retry/properties/max_attempts/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}if((typeof data5 == "number") && (isFinite(data5))){if(data5 < 0 || isNaN(data5)){const err12 = {instancePath:instancePath+"/policies/retry/max_attempts",schemaPath:"policies.schema.json/properties/retry/properties/max_attempts/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}}}if(data4.backoff_ms !== undefined){let data6 = data4.backoff_ms;const _errs18 = errors;let valid4 = false;const _errs19 = errors;if(!(((typeof data6 == "number") && (!(data6 % 1) && !isNaN(data6))) && (isFinite(data6)))){const err13 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}if((typeof data6 == "number") && (isFinite(data6))){if(data6 < 0 || isNaN(data6)){const err14 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"policies.schema.json/properties/retry/properties/backoff_ms/anyOf/0/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}}var _valid0 = _errs19 === errors;valid4 = valid4 || _valid0;const _errs21 = errors;if(Array.isArray(data6)){const len0 = data6.length;for(let i0=0; i0<len0; i0++){let data7 = data6[i0];if(!(((typeof data7 == "number") && (!(data7 % 1) && !isNaN(data7))) && (isFinite(data7)))){const err15 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}if((typeof data7 == "number") && (isFinite(data7))){if(data7 < 0 || isNaN(data7)){const err16 = {instancePath:instancePath+"/policies/retry/backoff_ms/" + i0,schemaPath:"policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/items/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err16];}else {vErrors.push(err16);}errors++;}}}}else {const err17 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"policies.schema.json/properties/retry/properties/backoff_ms/anyOf/1/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err17];}else {vErrors.push(err17);}errors++;}var _valid0 = _errs21 === errors;valid4 = valid4 || _valid0;if(!valid4){const err18 = {instancePath:instancePath+"/policies/retry/backoff_ms",schemaPath:"policies.schema.json/properties/retry/properties/backoff_ms/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err18];}else {vErrors.push(err18);}errors++;}else {errors = _errs18;if(vErrors !== null){if(_errs18){vErrors.length = _errs18;}else {vErrors = null;}}}}if(data4.strategy !== undefined){let data8 = data4.strategy;if(typeof data8 !== "string"){const err19 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"policies.schema.json/properties/retry/properties/strategy/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err19];}else {vErrors.push(err19);}errors++;}if(!((data8 === "fixed") || (data8 === "exp"))){const err20 = {instancePath:instancePath+"/policies/retry/strategy",schemaPath:"policies.schema.json/properties/retry/properties/strategy/enum",keyword:"enum",params:{allowedValues: schema32.properties.retry.properties.strategy.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err20];}else {vErrors.push(err20);}errors++;}}}else {const err21 = {instancePath:instancePath+"/policies/retry",schemaPath:"policies.schema.json/properties/retry/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err21];}else {vErrors.push(err21);}errors++;}}if(data2.dlq !== undefined){let data9 = data2.dlq;if(data9 && typeof data9 == "object" && !Array.isArray(data9)){for(const key3 in data9){if(!((key3 === "enabled") || (key3 === "target"))){const err22 = {instancePath:instancePath+"/policies/dlq",schemaPath:"policies.schema.json/properties/dlq/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key3},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err22];}else {vErrors.push(err22);}errors++;}}if(data9.enabled !== undefined){if(typeof data9.enabled !== "boolean"){const err23 = {instancePath:instancePath+"/policies/dlq/enabled",schemaPath:"policies.schema.json/properties/dlq/properties/enabled/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"};if(vErrors === null){vErrors = [err23];}else {vErrors.push(err23);}errors++;}}if(data9.target !== undefined){if(typeof data9.target !== "string"){const err24 = {instancePath:instancePath+"/policies/dlq/target",schemaPath:"policies.schema.json/properties/dlq/properties/target/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err24];}else {vErrors.push(err24);}errors++;}}}else {const err25 = {instancePath:instancePath+"/policies/dlq",schemaPath:"policies.schema.json/properties/dlq/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err25];}else {vErrors.push(err25);}errors++;}}if(data2.budget_ms !== undefined){let data12 = data2.budget_ms;if(!(((typeof data12 == "number") && (!(data12 % 1) && !isNaN(data12))) && (isFinite(data12)))){const err26 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"policies.schema.json/properties/budget_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err26];}else {vErrors.push(err26);}errors++;}if((typeof data12 == "number") && (isFinite(data12))){if(data12 < 0 || isNaN(data12)){const err27 = {instancePath:instancePath+"/policies/budget_ms",schemaPath:"policies.schema.json/properties/budget_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err27];}else {vErrors.push(err27);}errors++;}}}}else {const err28 = {instancePath:instancePath+"/policies",schemaPath:"policies.schema.json/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err28];}else {vErrors.push(err28);}errors++;}}if(data.trigger !== undefined){let data13 = data.trigger;if(data13 && typeof data13 == "object" && !Array.isArray(data13)){if(data13.type === undefined){const err29 = {instancePath:instancePath+"/trigger",schemaPath:"#/properties/trigger/required",keyword:"required",params:{missingProperty: "type"},message:"must have required property '"+"type"+"'"};if(vErrors === null){vErrors = [err29];}else {vErrors.push(err29);}errors++;}if(data13.type !== undefined){let data14 = data13.type;if(typeof data14 !== "string"){const err30 = {instancePath:instancePath+"/trigger/type",schemaPath:"#/properties/trigger/properties/type/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err30];}else {vErrors.push(err30);}errors++;}if(!((((data14 === "http") || (data14 === "queue")) || (data14 === "schedule")) || (data14 === "event"))){const err31 = {instancePath:instancePath+"/trigger/type",schemaPath:"#/properties/trigger/properties/type/enum",keyword:"enum",params:{allowedValues: schema73.properties.trigger.properties.type.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err31];}else {vErrors.push(err31);}errors++;}}if(data13.http !== undefined){let data15 = data13.http;if(data15 && typeof data15 == "object" && !Array.isArray(data15)){for(const key4 in data15){if(!((key4 === "path") || (key4 === "method"))){const err32 = {instancePath:instancePath+"/trigger/http",schemaPath:"#/properties/trigger/properties/http/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key4},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err32];}else {vErrors.push(err32);}errors++;}}if(data15.path !== undefined){if(typeof data15.path !== "string"){const err33 = {instancePath:instancePath+"/trigger/http/path",schemaPath:"#/properties/trigger/properties/http/properties/path/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err33];}else {vErrors.push(err33);}errors++;}}if(data15.method !== undefined){if(typeof data15.method !== "string"){const err34 = {instancePath:instancePath+"/trigger/http/method",schemaPath:"#/properties/trigger/properties/http/properties/method/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err34];}else {vErrors.push(err34);}errors++;}}}else {const err35 = {instancePath:instancePath+"/trigger/http",schemaPath:"#/properties/trigger/properties/http/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err35];}else {vErrors.push(err35);}errors++;}}if(data13.queue !== undefined){let data18 = data13.queue;if(data18 && typeof data18 == "object" && !Array.isArray(data18)){for(const key5 in data18){if(!(key5 === "name")){const err36 = {instancePath:instancePath+"/trigger/queue",schemaPath:"#/properties/trigger/properties/queue/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key5},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err36];}else {vErrors.push(err36);}errors++;}}if(data18.name !== undefined){if(typeof data18.name !== "string"){const err37 = {instancePath:instancePath+"/trigger/queue/name",schemaPath:"#/properties/trigger/properties/queue/properties/name/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err37];}else {vErrors.push(err37);}errors++;}}}else {const err38 = {instancePath:instancePath+"/trigger/queue",schemaPath:"#/properties/trigger/properties/queue/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err38];}else {vErrors.push(err38);}errors++;}}if(data13.schedule !== undefined){let data20 = data13.schedule;if(data20 && typeof data20 == "object" && !Array.isArray(data20)){for(const key6 in data20){if(!(key6 === "cron")){const err39 = {instancePath:instancePath+"/trigger/schedule",schemaPath:"#/properties/trigger/properties/schedule/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key6},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err39];}else {vErrors.push(err39);}errors++;}}if(data20.cron !== undefined){if(typeof data20.cron !== "string"){const err40 = {instancePath:instancePath+"/trigger/schedule/cron",schemaPath:"#/properties/trigger/properties/schedule/properties/cron/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err40];}else {vErrors.push(err40);}errors++;}}}else {const err41 = {instancePath:instancePath+"/trigger/schedule",schemaPath:"#/properties/trigger/properties/schedule/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err41];}else {vErrors.push(err41);}errors++;}}if(data13.event !== undefined){let data22 = data13.event;if(data22 && typeof data22 == "object" && !Array.isArray(data22)){for(const key7 in data22){if(!(key7 === "topic")){const err42 = {instancePath:instancePath+"/trigger/event",schemaPath:"#/properties/trigger/properties/event/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key7},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err42];}else {vErrors.push(err42);}errors++;}}if(data22.topic !== undefined){if(typeof data22.topic !== "string"){const err43 = {instancePath:instancePath+"/trigger/event/topic",schemaPath:"#/properties/trigger/properties/event/properties/topic/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err43];}else {vErrors.push(err43);}errors++;}}}else {const err44 = {instancePath:instancePath+"/trigger/event",schemaPath:"#/properties/trigger/properties/event/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err44];}else {vErrors.push(err44);}errors++;}}}else {const err45 = {instancePath:instancePath+"/trigger",schemaPath:"#/properties/trigger/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err45];}else {vErrors.push(err45);}errors++;}}if(data.match !== undefined){let data24 = data.match;if(Array.isArray(data24)){const len1 = data24.length;for(let i1=0; i1<len1; i1++){let data25 = data24[i1];if(!(data25 && typeof data25 == "object" && !Array.isArray(data25))){const err46 = {instancePath:instancePath+"/match/" + i1,schemaPath:"#/properties/match/items/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err46];}else {vErrors.push(err46);}errors++;}}}else {const err47 = {instancePath:instancePath+"/match",schemaPath:"#/properties/match/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err47];}else {vErrors.push(err47);}errors++;}}if(data.map !== undefined){let data26 = data.map;if(data26 && typeof data26 == "object" && !Array.isArray(data26)){}else {const err48 = {instancePath:instancePath+"/map",schemaPath:"#/properties/map/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err48];}else {vErrors.push(err48);}errors++;}}if(data.invoke !== undefined){let data27 = data.invoke;if(!(data27 && typeof data27 == "object" && !Array.isArray(data27))){const err49 = {instancePath:instancePath+"/invoke",schemaPath:"#/properties/invoke/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err49];}else {vErrors.push(err49);}errors++;}const _errs72 = errors;let valid15 = false;let passing0 = null;const _errs73 = errors;if(data27 && typeof data27 == "object" && !Array.isArray(data27)){if(data27.plan === undefined){const err50 = {instancePath:instancePath+"/invoke",schemaPath:"#/properties/invoke/oneOf/0/required",keyword:"required",params:{missingProperty: "plan"},message:"must have required property '"+"plan"+"'"};if(vErrors === null){vErrors = [err50];}else {vErrors.push(err50);}errors++;}for(const key8 in data27){if(!(key8 === "plan")){const err51 = {instancePath:instancePath+"/invoke",schemaPath:"#/properties/invoke/oneOf/0/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key8},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err51];}else {vErrors.push(err51);}errors++;}}if(data27.plan !== undefined){if(!(validate20(data27.plan, {instancePath:instancePath+"/invoke/plan",parentData:data27,parentDataProperty:"plan",rootData,dynamicAnchors}))){vErrors = vErrors === null ? validate20.errors : vErrors.concat(validate20.errors);errors = vErrors.length;}}}var _valid1 = _errs73 === errors;if(_valid1){valid15 = true;passing0 = 0;var props0 = true;}const _errs76 = errors;if(data27 && typeof data27 == "object" && !Array.isArray(data27)){if(data27.plan_ref === undefined){const err52 = {instancePath:instancePath+"/invoke",schemaPath:"#/properties/invoke/oneOf/1/required",keyword:"required",params:{missingProperty: "plan_ref"},message:"must have required property '"+"plan_ref"+"'"};if(vErrors === null){vErrors = [err52];}else {vErrors.push(err52);}errors++;}for(const key9 in data27){if(!(key9 === "plan_ref")){const err53 = {instancePath:instancePath+"/invoke",schemaPath:"#/properties/invoke/oneOf/1/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key9},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err53];}else {vErrors.push(err53);}errors++;}}if(data27.plan_ref !== undefined){if(typeof data27.plan_ref !== "string"){const err54 = {instancePath:instancePath+"/invoke/plan_ref",schemaPath:"#/properties/invoke/oneOf/1/properties/plan_ref/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err54];}else {vErrors.push(err54);}errors++;}}}var _valid1 = _errs76 === errors;if(_valid1 && valid15){valid15 = false;passing0 = [passing0, 1];}else {if(_valid1){valid15 = true;passing0 = 1;if(props0 !== true){props0 = true;}}}if(!valid15){const err55 = {instancePath:instancePath+"/invoke",schemaPath:"#/properties/invoke/oneOf",keyword:"oneOf",params:{passingSchemas: passing0},message:"must match exactly one schema in oneOf"};if(vErrors === null){vErrors = [err55];}else {vErrors.push(err55);}errors++;}else {errors = _errs72;if(vErrors !== null){if(_errs72){vErrors.length = _errs72;}else {vErrors = null;}}}}}else {const err56 = {instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err56];}else {vErrors.push(err56);}errors++;}validate83.errors = vErrors;return errors === 0;}validate83.evaluated = {"props":true,"dynamicProps":false,"dynamicItems":false};exports.policies_schema_json = validate85;function validate85(data, {instancePath="", parentData, parentDataProperty, rootData=data, dynamicAnchors={}}={}){/*# sourceURL="https://mova.dev/schemas/policies.schema.json" */;let vErrors = null;let errors = 0;const evaluated0 = validate85.evaluated;if(evaluated0.dynamicProps){evaluated0.props = undefined;}if(evaluated0.dynamicItems){evaluated0.items = undefined;}if(data && typeof data == "object" && !Array.isArray(data)){for(const key0 in data){if(!((((key0 === "timeout_ms") || (key0 === "retry")) || (key0 === "dlq")) || (key0 === "budget_ms"))){const err0 = {instancePath,schemaPath:"#/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key0},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err0];}else {vErrors.push(err0);}errors++;}}if(data.timeout_ms !== undefined){let data0 = data.timeout_ms;if(!(((typeof data0 == "number") && (!(data0 % 1) && !isNaN(data0))) && (isFinite(data0)))){const err1 = {instancePath:instancePath+"/timeout_ms",schemaPath:"#/properties/timeout_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err1];}else {vErrors.push(err1);}errors++;}if((typeof data0 == "number") && (isFinite(data0))){if(data0 < 0 || isNaN(data0)){const err2 = {instancePath:instancePath+"/timeout_ms",schemaPath:"#/properties/timeout_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err2];}else {vErrors.push(err2);}errors++;}}}if(data.retry !== undefined){let data1 = data.retry;if(data1 && typeof data1 == "object" && !Array.isArray(data1)){for(const key1 in data1){if(!(((key1 === "max_attempts") || (key1 === "backoff_ms")) || (key1 === "strategy"))){const err3 = {instancePath:instancePath+"/retry",schemaPath:"#/properties/retry/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key1},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err3];}else {vErrors.push(err3);}errors++;}}if(data1.max_attempts !== undefined){let data2 = data1.max_attempts;if(!(((typeof data2 == "number") && (!(data2 % 1) && !isNaN(data2))) && (isFinite(data2)))){const err4 = {instancePath:instancePath+"/retry/max_attempts",schemaPath:"#/properties/retry/properties/max_attempts/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err4];}else {vErrors.push(err4);}errors++;}if((typeof data2 == "number") && (isFinite(data2))){if(data2 < 0 || isNaN(data2)){const err5 = {instancePath:instancePath+"/retry/max_attempts",schemaPath:"#/properties/retry/properties/max_attempts/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err5];}else {vErrors.push(err5);}errors++;}}}if(data1.backoff_ms !== undefined){let data3 = data1.backoff_ms;const _errs10 = errors;let valid2 = false;const _errs11 = errors;if(!(((typeof data3 == "number") && (!(data3 % 1) && !isNaN(data3))) && (isFinite(data3)))){const err6 = {instancePath:instancePath+"/retry/backoff_ms",schemaPath:"#/properties/retry/properties/backoff_ms/anyOf/0/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err6];}else {vErrors.push(err6);}errors++;}if((typeof data3 == "number") && (isFinite(data3))){if(data3 < 0 || isNaN(data3)){const err7 = {instancePath:instancePath+"/retry/backoff_ms",schemaPath:"#/properties/retry/properties/backoff_ms/anyOf/0/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err7];}else {vErrors.push(err7);}errors++;}}var _valid0 = _errs11 === errors;valid2 = valid2 || _valid0;const _errs13 = errors;if(Array.isArray(data3)){const len0 = data3.length;for(let i0=0; i0<len0; i0++){let data4 = data3[i0];if(!(((typeof data4 == "number") && (!(data4 % 1) && !isNaN(data4))) && (isFinite(data4)))){const err8 = {instancePath:instancePath+"/retry/backoff_ms/" + i0,schemaPath:"#/properties/retry/properties/backoff_ms/anyOf/1/items/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err8];}else {vErrors.push(err8);}errors++;}if((typeof data4 == "number") && (isFinite(data4))){if(data4 < 0 || isNaN(data4)){const err9 = {instancePath:instancePath+"/retry/backoff_ms/" + i0,schemaPath:"#/properties/retry/properties/backoff_ms/anyOf/1/items/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err9];}else {vErrors.push(err9);}errors++;}}}}else {const err10 = {instancePath:instancePath+"/retry/backoff_ms",schemaPath:"#/properties/retry/properties/backoff_ms/anyOf/1/type",keyword:"type",params:{type: "array"},message:"must be array"};if(vErrors === null){vErrors = [err10];}else {vErrors.push(err10);}errors++;}var _valid0 = _errs13 === errors;valid2 = valid2 || _valid0;if(!valid2){const err11 = {instancePath:instancePath+"/retry/backoff_ms",schemaPath:"#/properties/retry/properties/backoff_ms/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};if(vErrors === null){vErrors = [err11];}else {vErrors.push(err11);}errors++;}else {errors = _errs10;if(vErrors !== null){if(_errs10){vErrors.length = _errs10;}else {vErrors = null;}}}}if(data1.strategy !== undefined){let data5 = data1.strategy;if(typeof data5 !== "string"){const err12 = {instancePath:instancePath+"/retry/strategy",schemaPath:"#/properties/retry/properties/strategy/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err12];}else {vErrors.push(err12);}errors++;}if(!((data5 === "fixed") || (data5 === "exp"))){const err13 = {instancePath:instancePath+"/retry/strategy",schemaPath:"#/properties/retry/properties/strategy/enum",keyword:"enum",params:{allowedValues: schema32.properties.retry.properties.strategy.enum},message:"must be equal to one of the allowed values"};if(vErrors === null){vErrors = [err13];}else {vErrors.push(err13);}errors++;}}}else {const err14 = {instancePath:instancePath+"/retry",schemaPath:"#/properties/retry/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err14];}else {vErrors.push(err14);}errors++;}}if(data.dlq !== undefined){let data6 = data.dlq;if(data6 && typeof data6 == "object" && !Array.isArray(data6)){for(const key2 in data6){if(!((key2 === "enabled") || (key2 === "target"))){const err15 = {instancePath:instancePath+"/dlq",schemaPath:"#/properties/dlq/additionalProperties",keyword:"additionalProperties",params:{additionalProperty: key2},message:"must NOT have additional properties"};if(vErrors === null){vErrors = [err15];}else {vErrors.push(err15);}errors++;}}if(data6.enabled !== undefined){if(typeof data6.enabled !== "boolean"){const err16 = {instancePath:instancePath+"/dlq/enabled",schemaPath:"#/properties/dlq/properties/enabled/type",keyword:"type",params:{type: "boolean"},message:"must be boolean"};if(vErrors === null){vErrors = [err16];}else {vErrors.push(err16);}errors++;}}if(data6.target !== undefined){if(typeof data6.target !== "string"){const err17 = {instancePath:instancePath+"/dlq/target",schemaPath:"#/properties/dlq/properties/target/type",keyword:"type",params:{type: "string"},message:"must be string"};if(vErrors === null){vErrors = [err17];}else {vErrors.push(err17);}errors++;}}}else {const err18 = {instancePath:instancePath+"/dlq",schemaPath:"#/properties/dlq/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err18];}else {vErrors.push(err18);}errors++;}}if(data.budget_ms !== undefined){let data9 = data.budget_ms;if(!(((typeof data9 == "number") && (!(data9 % 1) && !isNaN(data9))) && (isFinite(data9)))){const err19 = {instancePath:instancePath+"/budget_ms",schemaPath:"#/properties/budget_ms/type",keyword:"type",params:{type: "integer"},message:"must be integer"};if(vErrors === null){vErrors = [err19];}else {vErrors.push(err19);}errors++;}if((typeof data9 == "number") && (isFinite(data9))){if(data9 < 0 || isNaN(data9)){const err20 = {instancePath:instancePath+"/budget_ms",schemaPath:"#/properties/budget_ms/minimum",keyword:"minimum",params:{comparison: ">=", limit: 0},message:"must be >= 0"};if(vErrors === null){vErrors = [err20];}else {vErrors.push(err20);}errors++;}}}}else {const err21 = {instancePath,schemaPath:"#/type",keyword:"type",params:{type: "object"},message:"must be object"};if(vErrors === null){vErrors = [err21];}else {vErrors.push(err21);}errors++;}validate85.errors = vErrors;return errors === 0;}validate85.evaluated = {"props":true,"dynamicProps":false,"dynamicItems":false};