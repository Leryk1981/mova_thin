{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://mova.dev/schemas/actions/if.schema.json",
  "title": "Action: if",
  "type": "object",
  "required": ["type", "params"],
  "properties": {
    "type": { "const": "if" },
    "params": {
      "type": "object",
      "required": ["when", "then"],
      "properties": {
        "when": {
          "type": "object",
          "required": ["path"],
          "properties": {
            "path": { "type": "string", "minLength": 1 },
            "eq": {},
            "ne": {},
            "gt": {},
            "gte": {},
            "lt": {},
            "lte": {},
            "contains": {},
            "exists": { "type": "boolean" }
          },
          "anyOf": [
            {
              "properties": {
                "eq": {}
              },
              "required": ["eq"]
            },
            {
              "properties": {
                "ne": {}
              },
              "required": ["ne"]
            },
            {
              "properties": {
                "gt": {}
              },
              "required": ["gt"]
            },
            {
              "properties": {
                "gte": {}
              },
              "required": ["gte"]
            },
            {
              "properties": {
                "lt": {}
              },
              "required": ["lt"]
            },
            {
              "properties": {
                "lte": {}
              },
              "required": ["lte"]
            },
            {
              "properties": {
                "contains": {}
              },
              "required": ["contains"]
            },
            {
              "properties": {
                "exists": { "type": "boolean" }
              },
              "required": ["exists"]
            }
          ],
          "unevaluatedProperties": false
        },
        "then": {
          "type": "array",
          "minItems": 1,
          "items": { "$ref": "../envelope.3.3.schema.json#/properties/actions/items" }
        },
        "else": {
          "type": "array",
          "minItems": 1,
          "items": { "$ref": "../envelope.3.3.schema.json#/properties/actions/items" }
        }
      },
      "unevaluatedProperties": false
    }
  },
  "unevaluatedProperties": false
}
